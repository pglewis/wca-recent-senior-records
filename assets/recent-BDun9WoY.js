import{p as q,t as Z,c as z,d as i,a as J,b as Q,e as tt}from"./cubing-icons-BRZPWdAH.js";var X;(function(t){var n=function(){function r(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),r.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},r.prototype.getData=function(e){return this._data[e]||""},r.prototype.setData=function(e,s){this._data[e]=s},r.prototype.setDragImage=function(e,s,c){var a=o._instance;a._imgCustom=e,a._imgOffset={x:s,y:c}},r}();t.DataTransfer=n;var o=function(){function r(){if(this._lastClick=0,r._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var s=document,c=this._touchstart.bind(this),a=this._touchmove.bind(this),l=this._touchend.bind(this),d=e?{passive:!1,capture:!1}:!1;s.addEventListener("touchstart",c,d),s.addEventListener("touchmove",a,d),s.addEventListener("touchend",l),s.addEventListener("touchcancel",l)}}return r.getInstance=function(){return r._instance},r.prototype._touchstart=function(e){var s=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<r._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var c=this._closestDraggable(e.target);c&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=c,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){s._dragSource==c&&s._img==null&&s._dispatchEvent(e,"contextmenu",c)&&s._reset()},r._CTXMENU),r._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){s._isDragEnabled=!0,s._touchmove(e)},r._PRESSHOLDAWAIT)))}},r.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var s=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",s)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",s)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),s!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",s),this._lastTarget=s),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",s))}},r.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},r.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},r.prototype._shouldHandleMove=function(e){return!r._ISPRESSHOLDMODE&&this._shouldHandle(e)},r.prototype._shouldHandlePressHoldMove=function(e){return r._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},r.prototype._shouldCancelPressHoldMove=function(e){return r._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>r._PRESSHOLDMARGIN},r.prototype._shouldStartDragging=function(e){var s=this._getDelta(e);return s>r._THRESHOLD||r._ISPRESSHOLDMODE&&s>=r._PRESSHOLDTHRESHOLD},r.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new n,clearInterval(this._pressHoldInterval)},r.prototype._getPoint=function(e,s){return e&&e.touches&&(e=e.touches[0]),{x:s?e.pageX:e.clientX,y:s?e.pageY:e.clientY}},r.prototype._getDelta=function(e){if(r._ISPRESSHOLDMODE&&!this._ptDown)return 0;var s=this._getPoint(e);return Math.abs(s.x-this._ptDown.x)+Math.abs(s.y-this._ptDown.y)},r.prototype._getTarget=function(e){for(var s=this._getPoint(e),c=document.elementFromPoint(s.x,s.y);c&&getComputedStyle(c).pointerEvents=="none";)c=c.parentElement;return c},r.prototype._createImage=function(e){this._img&&this._destroyImage();var s=this._imgCustom||this._dragSource;if(this._img=s.cloneNode(!0),this._copyStyle(s,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var c=s.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-c.left,y:a.y-c.top},this._img.style.opacity=r._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},r.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},r.prototype._moveImage=function(e){var s=this;requestAnimationFrame(function(){if(s._img){var c=s._getPoint(e,!0),a=s._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(c.x-s._imgOffset.x)+"px",a.top=Math.round(c.y-s._imgOffset.y)+"px"}})},r.prototype._copyProps=function(e,s,c){for(var a=0;a<c.length;a++){var l=c[a];e[l]=s[l]}},r.prototype._copyStyle=function(e,s){if(r._rmvAtts.forEach(function(v){s.removeAttribute(v)}),e instanceof HTMLCanvasElement){var c=e,a=s;a.width=c.width,a.height=c.height,a.getContext("2d").drawImage(c,0,0)}for(var l=getComputedStyle(e),d=0;d<l.length;d++){var f=l[d];f.indexOf("transition")<0&&(s.style[f]=l[f])}s.style.pointerEvents="none";for(var d=0;d<e.children.length;d++)this._copyStyle(e.children[d],s.children[d])},r.prototype._dispatchEvent=function(e,s,c){if(e&&c){var a=document.createEvent("Event"),l=e.touches?e.touches[0]:e;return a.initEvent(s,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,r._kbdProps),this._copyProps(a,l,r._ptProps),a.dataTransfer=this._dataTransfer,c.dispatchEvent(a),a.defaultPrevented}return!1},r.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},r}();o._instance=new o,o._THRESHOLD=5,o._OPACITY=.5,o._DBLCLICK=500,o._CTXMENU=900,o._ISPRESSHOLDMODE=!1,o._PRESSHOLDAWAIT=400,o._PRESSHOLDMARGIN=25,o._PRESSHOLDTHRESHOLD=0,o._rmvAtts="id,class,style,draggable".split(","),o._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),o._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=o})(X||(X={}));var g=(t=>(t.rankingsDataSet="rankingsDataSet",t.searchFilterChanged="searchFilterChanged",t.eventFilterChanged="eventFilterChanged",t.eventTypeFilterChanged="eventTypeFilterChanged",t.ageFilterChanged="ageFilterChanged",t.continentFilterChanged="continentFilterChanged",t.countryFilterChanged="countryFilterChanged",t.topNChanged="topNChanged",t.rankingTypeChanged="rankingTypeChanged",t.timeFrameChanged="timeFrameChanged",t.rankingsFiltered="rankingsFiltered",t.resultsSorted="resultsSorted",t.sortColumnsChanged="sortColumnsChanged",t.uiStateSet="uiStateSet",t))(g||{});function et(t){return{type:g.rankingsDataSet,payload:t}}function nt(t=F.rankings,n){const{type:o,payload:r}=n;switch(o){case g.rankingsDataSet:{const e=rt(r),s=ot(r),c=it(r),a=st(r),l=at(r,s,c,a);return{lastUpdated:r.refreshed,data:r,competitionIDToIndex:e,personIDToIndex:s,continentIDToIndex:c,countryIDToIndex:a,activeRegions:l}}}return t}function rt(t){const n={};for(const[o,r]of t.competitions.entries())n[r.id]=o;return n}function ot(t){const n={};for(const[o,r]of t.persons.entries())n[r.id]=o;return n}function it(t){const n={};for(const[o,r]of t.continents.entries())n[r.id]=o;return n}function st(t){const n={};for(const[o,r]of t.countries.entries())n[r.id]=o;return n}function at(t,n,o,r){const e={continents:new Set,countries:new Set};for(const s of t.events)for(const c of s.rankings)for(const a of c.ranks){const l=t.persons[n[a.id]];if(!l)throw new Error(`Missing competitor ID ${a.id}`);const d=t.countries[r[l.country]];if(!d)throw new Error(`Missing country ID ${l.country}`);const f=t.continents[o[d.continent]];if(!f)throw new Error(`Missing continent ID ${d.continent}`);e.continents.add(f.id),e.countries.add(d.id)}return e}function ct(t){return{type:g.searchFilterChanged,payload:t}}function lt(t){return{type:g.eventFilterChanged,payload:t}}function ut(t){return{type:g.eventTypeFilterChanged,payload:t}}function dt(t){return{type:g.ageFilterChanged,payload:t}}function ht(t){return{type:g.continentFilterChanged,payload:t}}function gt(t){return{type:g.countryFilterChanged,payload:t}}function ft(t){return{type:g.topNChanged,payload:t}}function pt(t){return{type:g.rankingTypeChanged,payload:t}}function mt(t){return{type:g.timeFrameChanged,payload:t}}function vt(t=F.filters,n){const{type:o,payload:r}=n;switch(o){case g.searchFilterChanged:return{...t,search:r};case g.eventFilterChanged:return{...t,event:r};case g.eventTypeFilterChanged:return{...t,eventType:r};case g.ageFilterChanged:return{...t,age:r};case g.continentFilterChanged:return{...t,continent:r};case g.countryFilterChanged:return{...t,country:r};case g.topNChanged:return{...t,topN:r};case g.rankingTypeChanged:return{...t,rankingType:r};case g.timeFrameChanged:return{...t,timeFrame:r}}return t}function yt(t,n){return{type:g.rankingsFiltered,payload:{rankings:t,filters:n}}}function _t(t,n){return{type:g.resultsSorted,payload:{sortColumns:t,rankingType:n}}}function bt(t=[],n){const{type:o,payload:r}=n;switch(o){case g.rankingsFiltered:return Ct(r.rankings,r.filters);case g.resultsSorted:return Ft(t,r.sortColumns,r.rankingType)}return t}function Ct(t,n){var v,u,h,p,m,w,A;const o=t.data,{competitionIDToIndex:r,personIDToIndex:e,continentIDToIndex:s,countryIDToIndex:c}=t,{topN:a,timeFrame:l}=n,d=24*60*60*1e3,f=[];for(const U of o.events)for(const _ of U.rankings){const b={world:0,continents:{},countries:{}};for(const[M,C]of _.ranks.entries()){const I=o.competitions[r[C.competition]];if(!I)throw new Error(`Missing competition ID ${C.competition}`);const O=o.persons[e[C.id]];if(!O)throw new Error(`Missing competitor ID ${C.id}`);const y=o.countries[c[O.country]];if(!y)throw new Error(`Missing country ID ${O.country}`);const D=o.continents[s[y.continent]];if(!D)throw new Error(`Missing continent ID ${y.continent}`);const V=Math.floor((new Date().getTime()-new Date(I.startDate).getTime())/d);b.world++,(v=b.continents)[u=D.id]??(v[u]=0),b.continents[D.id]++,(h=b.countries)[p=y.id]??(h[p]=0),b.countries[y.id]++;const E=((m=_.missing)==null?void 0:m.world)??0;let P,k=1,T;n.rankingType==="cr"?((w=_.missing.continents)!=null&&w[D.id]?(P=_.missing.continents[D.id],E>0&&(k=P/E)):E>0&&(k=0),T=b.continents[D.id]+k*(C.rank-M-1)):n.rankingType==="nr"?((A=_.missing.countries)!=null&&A[y.id]?(P=_.missing.countries[y.id],E>0&&(k=P/E)):E>0&&(k=0),T=b.countries[y.id]+k*(C.rank-M-1)):(P=E,T=b.world+k*(C.rank-M-1)),T=Number(T.toFixed(0));const Y={event:U,eventType:_.type,age:_.age,date:I.startDate,rank:T,name:O.name,wcaID:O.id,continent:D,country:y,result:C.best,compName:I.name,compWebID:I.webId,compCountry:I.country};V<=l&&T<=a&&St(Y,n)&&f.push(Y)}}return f}function St(t,n){return Rt(t,n.search)&&Dt(t,n.event)&&Et(t,n.eventType)&&kt(t,n.age)&&Tt(t,n.continent)&&It(t,n.country)}function Dt(t,n){return n?t.event.id===n:!0}function Et(t,n){return n?t.eventType===n:!0}function kt(t,n){return n?t.age>=n:!0}function Tt(t,n){return n?t.continent.id===n:!0}function It(t,n){return n?t.country.id===n:!0}function Rt(t,n){return n?[t.date,t.event.id,t.continent.id,t.age,t.event.id,t.country.id,t.age,t.event.id,t.age,t.event.id,t.eventType,t.continent.id,t.age,t.event.id,t.eventType,t.country.id,t.age,t.event.id,t.eventType,t.age,t.name,t.compName].map(e=>String(e)).join(" ").toLowerCase().includes(n.toLowerCase()):!0}function Ft(t,n,o){const r=[...t];return[...n].reverse().map(s),r;function s(c){const{name:a,direction:l}=c;function d(u,h){switch(o){case"wr":return l*(u.age-h.age);case"cr":{const p=`${u.continent.id} ${u.age}`,m=`${h.continent.id} ${h.age}`;return l*p.localeCompare(m)}case"nr":{const p=`${u.country.id} ${u.age}`,m=`${h.country.id} ${h.age}`;return l*p.localeCompare(m)}}}function f(u,h){const p=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],m=p.indexOf(u.event.id),w=p.indexOf(h.event.id);return m===w&&u.eventType!==h.eventType?l*(u.eventType==="single"?-1:1):l*(m-w)}function v(u,h){if(u.event.format!==h.event.format)return u.event.format==="time"||h.event.format==="time"?l*(u.event.format==="time"?-1:1):l*(u.event.format==="number"?-1:1);switch(u.event.format){case"time":{const[p,m]=[u.result,h.result].map(Z);return l*(p-m)}case"number":return l*(Number(u.result)-Number(h.result));case"multi":{const[p,m]=[u.result,h.result].map(q);return p.score!==m.score?-l*(p.score-m.score):p.seconds!==m.seconds?l*(p.seconds-m.seconds):l*(p.unsolved-m.unsolved)}}}switch(a){case"date":case"name":r.sort((u,h)=>l*u[a].localeCompare(h[a]));break;case"rank":r.sort((u,h)=>l*(u[a]-h[a]));break;case"event":r.sort(f);break;case"group":r.sort(d);break;case"result":r.sort(v);break}return r}}function N(t){return{type:g.sortColumnsChanged,payload:t}}function wt(t=[],n){const{type:o,payload:r}=n;switch(o){case g.sortColumnsChanged:return Ot(t,r)}return t}function Ot(t,n){const o=[...t],r=t.findIndex(e=>e.name===n.name);return r<0?(o[n.position]={name:n.name,label:n.label,direction:n.defaultDirection||1},o):r===n.position?(o[n.position].direction*=-1,o):(o.splice(r,1),o.splice(n.position,0,t[r]),o)}function Pt(t){return{type:g.uiStateSet,payload:t}}function Lt(t=F.uiState,n){const{type:o,payload:r}=n;switch(o){case g.uiStateSet:return r}return t}const F={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{},activeRegions:{continents:new Set,countries:new Set}},results:[],filters:{search:"",event:"",eventType:"",age:"",continent:"",country:"",topN:10,rankingType:"wr",timeFrame:30},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}],uiState:{scrollX:0,scrollY:0,activeID:null}},xt=z({rankings:nt,results:bt,filters:vt,sortColumns:wt,uiState:Lt});function Ht(t=F,n){return xt(t,n)}function Mt(t){return i.h("div",{id:"info"},i.h("p",{class:"refreshed"},"Last refreshed: ",t.lastUpdated," (UTC)"),i.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}function Nt(){const t=["40, 50, 60, etc.","competitor name","competition name"];return"e.g. "+t[Math.floor(Math.random()*t.length)]}function $t(t){const{store:n,handleRender:o}=t,{search:r}=n.getState().filters;function e(s){const c=s.target;n.dispatch(ct(c.value)),o()}return i.h("div",{id:"search"},i.h("label",{class:"strong"},"Search:"),i.h("input",{id:"search-input",value:r,onInput:J(e,350),type:"search",size:19,placeholder:Nt()}))}function S(t,n){return t.map(o=>i.h("option",{value:o.value,selected:o.value==n},o.label))}function At(t){const{store:n,handleRender:o}=t,{event:r}=n.getState().filters,e=[];for(const c of n.getState().rankings.data.events)e.push({label:c.name,value:c.id});function s(){n.dispatch(lt(this.value)),o()}return i.h("div",null,i.h("label",{class:"strong"},"Event:"),i.h("select",{id:"event-filter",onChange:s},i.h("option",{value:""},"All Events"),S(e,r)))}function Ut(t){const{store:n,handleRender:o}=t,{rankings:r,filters:e}=n.getState(),{continent:s,country:c}=e,{countryIDToIndex:a}=r,{continents:l,countries:d}=r.data,f=r.activeRegions.continents,v=[];function u(){n.dispatch(ht(this.value)),o()}let h;if(c){const p=d[a[c]];h=l.filter(m=>p.continent===m.id)}else h=l.filter(p=>f.has(p.id));for(const p of h)v.push({label:p.name,value:p.id});return i.h("div",null,i.h("label",{class:"strong"},"Continent:"),i.h("select",{id:"continent-filter",onChange:u},i.h("option",{value:""},"All Continents"),S(v,s)))}function Yt(t){const{store:n,handleRender:o}=t,r=n.getState().rankings.data.countries,e=n.getState().rankings.activeRegions.countries,s=n.getState().filters.country,c=n.getState().filters.continent;function a(){n.dispatch(gt(this.value)),o()}const l=r.filter(f=>e.has(f.id)).filter(f=>c===""||f.continent===c),d=[];for(const f of l)d.push({label:f.name,value:f.id});return i.h("div",null,i.h("label",{class:"strong"},"Country:"),i.h("select",{id:"country-filter",onChange:a},i.h("option",{value:""},"All Countries"),S(d,s)))}const Xt=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"}],Bt=[{value:"wr",label:"World (WR)"},{value:"cr",label:"Continent (CR)"},{value:"nr",label:"National (NR)"}],Kt=[{value:"7",label:"7 days"},{value:"14",label:"14 days"},{value:"30",label:"30 days"},{value:"60",label:"60 days"},{value:"90",label:"90 days"}];function Wt(t){const{store:n,handleRender:o}=t,{timeFrame:r,topN:e,rankingType:s}=n.getState().filters;function c(){n.dispatch(mt(Number(this.value))),o()}function a(){n.dispatch(ft(Number(this.value))),o()}function l(){n.dispatch(pt(this.value)),o()}return i.h("div",{id:"parameters"},i.h("div",null,i.h("label",{class:"strong"},"Top:"),i.h("select",{id:"top-n",onChange:a},S(Xt,e))),i.h("div",null,i.h("label",{class:"strong"},"Ranking Type:"),i.h("select",{id:"ranking-type-filter",onChange:l},S(Bt,s))),i.h("div",null,i.h("label",{class:"strong"},"Time frame:"),i.h("select",{id:"time-frame",onChange:c},S(Kt,r))))}let H,$,L;function jt(t){return H=t.store,$=t.handleRender,i.h("div",{id:"sort-columns"},i.h("div",{class:"strong"},"Sort:"),H.getState().sortColumns.map(Gt))}function Gt(t,n){const o=["primary","secondary","tertiary"],r=t.direction==1?"ascending":"descending";return i.h("button",{onClick:Vt,onDragStart:B,onDragEnter:Zt,onDragOver:qt,onDragLeave:zt,onDrop:Jt,onDragEnd:K,class:`sort-column ${r} ${o[n]} strong`,draggable:"true","data-sort-on":t.name,"data-position":n},t.label,i.h("span",{"aria-hidden":"true"}))}function Vt(t){const n=t.currentTarget,o=String(n.dataset.sortOn),r=String(n.textContent).trim(),e=Number(n.dataset.position);H.dispatch(N({name:o,label:r,position:e,defaultDirection:null})),$()}function B(t){const n=t.currentTarget,o=t.dataTransfer;L=n,n.style.opacity="0.4",o.effectAllowed="move"}function qt(t){const n=t.dataTransfer;t.preventDefault(),n.dropEffect="move"}function Zt(t){t.currentTarget.classList.add("over")}function zt(t){t.currentTarget.classList.remove("over")}function Jt(t){const n=t.currentTarget;if(t.stopPropagation(),n.classList.remove("over"),L.dataset.sortOn!==n.dataset.sortOn){const o=L.querySelector("span.text"),r=String(L.dataset.sortOn),e=String(o==null?void 0:o.textContent).trim(),s=Number(n.dataset.position),c=Number(L.dataset.defaultDirection)||null;H.dispatch(N({name:r,label:e,position:s,defaultDirection:c})),$()}}function K(t){t.currentTarget.removeAttribute("style")}function Qt(t){const{store:n,handleRender:o}=t,{eventType:r}=n.getState().filters;function e(){n.dispatch(ut(this.value)),o()}const s=[{label:"Single",value:"single"},{label:"Average",value:"average"}];return i.h("div",null,i.h("label",{class:"strong"},"Result:"),i.h("select",{id:"event-type-filter",onChange:e},i.h("option",{value:""},"Any"),S(s,r)))}function te(t){const{store:n,handleRender:o}=t,{age:r}=n.getState().filters;function e(){n.dispatch(dt(Number(this.value))),o()}const s=[{label:"Over 40",value:"40"},{label:"Over 50",value:"50"},{label:"Over 60",value:"60"},{label:"Over 70",value:"70"},{label:"Over 80",value:"80"},{label:"Over 90",value:"90"}];return i.h("div",null,i.h("label",{class:"strong"},"Age:"),i.h("select",{id:"age-filter",onChange:e},S(s,r)))}function ee(t){return i.h("div",{id:"panel"},i.h("div",{class:"panel-grid"},i.h(Wt,{...t}),i.h(ne,{...t}),i.h(jt,{...t})))}function ne(t){return i.h("div",{id:"dropdown-filters"},i.h(At,{...t}),i.h(Qt,{...t}),i.h(te,{...t}),i.h(Ut,{...t}),i.h(Yt,{...t}),i.h($t,{...t}))}const re=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function oe(t){const{results:n}=t.store.getState();return!n||n.length===0?de():ie(t)}function ie(t){const{results:n}=t.store.getState(),o=[];for(const r of n)o.push(i.h(ue,{rowData:r,appProps:t}));return i.h("table",{id:"ranking-table",class:"rankings sortable"},i.h("thead",null,i.h(se,{headers:re,appProps:t})),i.h("tbody",null,o))}function se(t){const{headers:n,appProps:o}=t,r=[];for(const e of n)r.push(i.h(ae,{columnHeader:e,appProps:o}));return i.h("tr",null,r)}function ae(t){const{columnHeader:n,appProps:o}=t;return n.defaultSortDirection===null?i.h(le,{columnHeader:n}):i.h(ce,{columnHeader:n,appProps:o})}function ce(t){const{columnHeader:n,appProps:o}=t,{sortColumns:r}=o.store.getState();function e(a){const l=(a.ctrlKey?1:0)+(a.shiftKey?1:0);o.store.dispatch(N({name:n.name,label:n.label,position:l,defaultDirection:n.defaultSortDirection})),o.handleRender()}const s=[n.name];let c=null;for(const[a,l]of r.entries())if(l.name===n.name){const d=l.direction==1?"ascending":"descending",f=["primary","secondary","tertiary"];s.push(d),s.push(f[a]),a===0&&(c=d)}return i.h("th",{draggable:"true",class:s.join(" "),"data-sort-on":n.name,"data-default-direction":n.defaultSortDirection,"aria-sort":c,onClick:e,onDragStart:B,onDragEnd:K},i.h("button",{class:"strong",type:"button"},i.h("div",{class:"column"},i.h("span",{class:"text"},n.label)),i.h("div",{class:"column"},i.h("span",{class:"sort up","aria-hidden":"true"},"▲"),i.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function le(t){return i.h("th",{class:`${t.columnHeader.name} no-sort strong`},i.h("span",null,t.columnHeader.label))}function ue(t){const n="https://www.worldcubeassociation.org/persons",o="https://www.worldcubeassociation.org/competitions",r="https://wca-seniors.org/Senior_Rankings.html",{rowData:e,appProps:s}=t,c=s.store.getState().filters.rankingType,a=e.date.indexOf("-"),l=e.date.slice(0,a+1),d=e.date.slice(a+1),f=`${n}/${e.wcaID}?event=${e.event.id}`,v=`${o}/${e.compWebID}/results/by_person#${e.wcaID}`,u=`${r}#${e.event.id}-${e.eventType}-${e.age}`;let h;switch(c){case"wr":{h=i.h("a",{href:u,target:"_blank"},e.age,"+");break}case"cr":{h=i.h("a",{href:u+`-${e.continent.id}`,target:"_blank"},e.continent.id," ",e.age,"+");break}case"nr":{h=i.h("a",{href:u+`-xx-${e.country.id}`,target:"_blank"},e.country.id," ",e.age,"+");break}}return i.h("tr",null,i.h("td",{class:"date"},l,i.h("wbr",null),d),i.h("td",{class:"event"},i.h("i",{class:`event-${e.event.id} cubing-icon icon`}),e.event.id," ",e.eventType),i.h("td",{class:"group"},h),i.h("td",{class:"rank"},e.rank),i.h("td",{class:"name"},i.h("a",{href:f,target:"_blank"},i.h("span",{class:`flag-${e.country.id} flag`})," ",e.name)),i.h("td",{class:"result"},e.result),i.h("td",{class:"competition"},i.h("a",{href:v,target:"_blank"},i.h("span",{class:`flag-${e.compCountry} flag`})," ",e.compName)))}function de(){return i.h("h3",{class:"no-results"},"No results")}function he(t){const o=t.store.getState(),r=o.results;return i.h("div",null,i.h(Mt,{lastUpdated:o.rankings.lastUpdated}),i.h(ee,{...t}),i.h("div",{class:"strong"},"Showing ",r.length," ",r.length===1?"result":"results"),i.h(oe,{...t}))}function ge(){return i.h("h3",{class:"message"},"Loading... please wait")}function W(t){return i.h("div",{class:"error"},i.h("h3",null,"Something went wrong ™"),i.h("div",{class:"message"},t))}const j=window.rankings,x=Q("#app");if(!j)throw x.render(W("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const R=tt(F,Ht);R.dispatch(et(j));G();function G(){try{const t=R.getState();R.dispatch(Pt(fe())),x.render(ge()),R.dispatch(yt(t.rankings,t.filters)),R.dispatch(_t(t.sortColumns,t.filters.rankingType)),x.render(he({store:R,handleRender:G})),pe(t.uiState)}catch(t){throw t instanceof Error&&x.render(W(t.message)),t}}function fe(){var o;const t=F.uiState;t.scrollX=window.scrollX,t.scrollY=window.scrollY,t.activeID=((o=document.activeElement)==null?void 0:o.id)||null;const n=document.getElementById("search-input");return t.selectionStart=n==null?void 0:n.selectionStart,t.selectionEnd=n==null?void 0:n.selectionEnd,t.selectionDirection=n==null?void 0:n.selectionDirection,t}function pe(t){var n;if(t.activeID&&((n=document.getElementById(t.activeID))==null||n.focus()),t.activeID==="search-input"){const o=document.getElementById("search-input");o.selectionStart=(t==null?void 0:t.selectionStart)||null,o.selectionEnd=(t==null?void 0:t.selectionEnd)||null,o.selectionDirection=(t==null?void 0:t.selectionDirection)||"none"}window.scroll(t.scrollX,t.scrollY)}
