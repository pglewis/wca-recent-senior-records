(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();var ne;(function(e){var n=function(){function r(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),r.prototype.clearData=function(t){t!=null?delete this._data[t]:this._data=null},r.prototype.getData=function(t){return this._data[t]||""},r.prototype.setData=function(t,o){this._data[t]=o},r.prototype.setDragImage=function(t,o,s){var a=i._instance;a._imgCustom=t,a._imgOffset={x:o,y:s}},r}();e.DataTransfer=n;var i=function(){function r(){if(this._lastClick=0,r._instance)throw"DragDropTouch instance already created.";var t=!1;if(document.addEventListener("test",function(){},{get passive(){return t=!0,!0}}),"ontouchstart"in document){var o=document,s=this._touchstart.bind(this),a=this._touchmove.bind(this),u=this._touchend.bind(this),l=t?{passive:!1,capture:!1}:!1;o.addEventListener("touchstart",s,l),o.addEventListener("touchmove",a,l),o.addEventListener("touchend",u),o.addEventListener("touchcancel",u)}}return r.getInstance=function(){return r._instance},r.prototype._touchstart=function(t){var o=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<r._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target)){t.cancelable&&t.preventDefault(),this._reset();return}this._reset();var s=this._closestDraggable(t.target);s&&!this._dispatchEvent(t,"mousemove",t.target)&&!this._dispatchEvent(t,"mousedown",t.target)&&(this._dragSource=s,this._ptDown=this._getPoint(t),this._lastTouch=t,t.cancelable&&t.preventDefault(),setTimeout(function(){o._dragSource==s&&o._img==null&&o._dispatchEvent(t,"contextmenu",s)&&o._reset()},r._CTXMENU),r._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){o._isDragEnabled=!0,o._touchmove(t)},r._PRESSHOLDAWAIT)))}},r.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t)){this._reset();return}if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var o=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",o)){this._lastTouch=t,t.cancelable&&t.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",o)),this._img&&(this._lastTouch=t,t.cancelable&&t.preventDefault(),o!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",o),this._lastTarget=o),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",o))}},r.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target)){t.cancelable&&t.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},r.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},r.prototype._shouldHandleMove=function(t){return!r._ISPRESSHOLDMODE&&this._shouldHandle(t)},r.prototype._shouldHandlePressHoldMove=function(t){return r._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},r.prototype._shouldCancelPressHoldMove=function(t){return r._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>r._PRESSHOLDMARGIN},r.prototype._shouldStartDragging=function(t){var o=this._getDelta(t);return o>r._THRESHOLD||r._ISPRESSHOLDMODE&&o>=r._PRESSHOLDTHRESHOLD},r.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new n,clearInterval(this._pressHoldInterval)},r.prototype._getPoint=function(t,o){return t&&t.touches&&(t=t.touches[0]),{x:o?t.pageX:t.clientX,y:o?t.pageY:t.clientY}},r.prototype._getDelta=function(t){if(r._ISPRESSHOLDMODE&&!this._ptDown)return 0;var o=this._getPoint(t);return Math.abs(o.x-this._ptDown.x)+Math.abs(o.y-this._ptDown.y)},r.prototype._getTarget=function(t){for(var o=this._getPoint(t),s=document.elementFromPoint(o.x,o.y);s&&getComputedStyle(s).pointerEvents=="none";)s=s.parentElement;return s},r.prototype._createImage=function(t){this._img&&this._destroyImage();var o=this._imgCustom||this._dragSource;if(this._img=o.cloneNode(!0),this._copyStyle(o,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var s=o.getBoundingClientRect(),a=this._getPoint(t);this._imgOffset={x:a.x-s.left,y:a.y-s.top},this._img.style.opacity=r._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},r.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},r.prototype._moveImage=function(t){var o=this;requestAnimationFrame(function(){if(o._img){var s=o._getPoint(t,!0),a=o._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(s.x-o._imgOffset.x)+"px",a.top=Math.round(s.y-o._imgOffset.y)+"px"}})},r.prototype._copyProps=function(t,o,s){for(var a=0;a<s.length;a++){var u=s[a];t[u]=o[u]}},r.prototype._copyStyle=function(t,o){if(r._rmvAtts.forEach(function(y){o.removeAttribute(y)}),t instanceof HTMLCanvasElement){var s=t,a=o;a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0)}for(var u=getComputedStyle(t),l=0;l<u.length;l++){var h=u[l];h.indexOf("transition")<0&&(o.style[h]=u[h])}o.style.pointerEvents="none";for(var l=0;l<t.children.length;l++)this._copyStyle(t.children[l],o.children[l])},r.prototype._dispatchEvent=function(t,o,s){if(t&&s){var a=document.createEvent("Event"),u=t.touches?t.touches[0]:t;return a.initEvent(o,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,t,r._kbdProps),this._copyProps(a,u,r._ptProps),a.dataTransfer=this._dataTransfer,s.dispatchEvent(a),a.defaultPrevented}return!1},r.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},r}();i._instance=new i,i._THRESHOLD=5,i._OPACITY=.5,i._DBLCLICK=500,i._CTXMENU=900,i._ISPRESSHOLDMODE=!1,i._PRESSHOLDAWAIT=400,i._PRESSHOLDMARGIN=25,i._PRESSHOLDTHRESHOLD=0,i._rmvAtts="id,class,style,draggable".split(","),i._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),i._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=i})(ne||(ne={}));function Re(e){return(n={},i)=>{const r={};for(const t in e){const o=e[t];r[t]=o(n[t],i)}return r}}function ke(e,n){let i=e;function r(){return i}function t(o){i=n(r(),o)}return{getState:r,dispatch:t}}var g=(e=>(e.rankingsDataSet="rankingsDataSet",e.searchFilterChanged="searchFilterChanged",e.topNChanged="topNChanged",e.timeFrameChanged="timeFrameChanged",e.rankingTypeChanged="rankingTypeChanged",e.continentFilterChanged="continentFilterChanged",e.countryFilterChanged="countryFilterChanged",e.rankingsFiltered="rankingsFiltered",e.resultsSorted="resultsSorted",e.sortColumnsChanged="sortColumnsChanged",e.uiStateSet="uiStateSet",e))(g||{});function Oe(e){return{type:g.topNChanged,payload:e}}function we(e){return{type:g.timeFrameChanged,payload:e}}function xe(e){return{type:g.searchFilterChanged,payload:e}}function Pe(e){return{type:g.rankingTypeChanged,payload:e}}function Ae(e){return{type:g.continentFilterChanged,payload:e}}function Le(e){return{type:g.countryFilterChanged,payload:e}}function Me(e=q.filters,n){const{type:i,payload:r}=n;switch(i){case g.topNChanged:return{...e,topN:r};case g.timeFrameChanged:return{...e,timeFrame:r};case g.searchFilterChanged:return{...e,search:r};case g.rankingTypeChanged:return{...e,rankingType:r};case g.continentFilterChanged:return{...e,continent:r};case g.countryFilterChanged:return{...e,country:r}}return e}function He(e){return{type:g.rankingsDataSet,payload:e}}function Fe(e=q.rankings,n){const{type:i,payload:r}=n;switch(i){case g.rankingsDataSet:{const t=Ne(r),o=je(r),s=$e(r),a=qe(r),u=Ue(r,o,s,a);return{lastUpdated:r.refreshed,data:r,competitionIDToIndex:t,personIDToIndex:o,continentIDToIndex:s,countryIDToIndex:a,activeRegions:u}}}return e}function Ne(e){const n={};for(const[i,r]of e.competitions.entries())n[r.id]=i;return n}function je(e){const n={};for(const[i,r]of e.persons.entries())n[r.id]=i;return n}function $e(e){const n={};for(const[i,r]of e.continents.entries())n[r.id]=i;return n}function qe(e){const n={};for(const[i,r]of e.countries.entries())n[r.id]=i;return n}function Ue(e,n,i,r){const t={continents:new Set,countries:new Set};for(const o of e.events)for(const s of o.rankings)for(const a of s.ranks){const u=e.persons[n[a.id]];if(!u)throw new Error(`Missing competitor ID ${a.id}`);const l=e.countries[r[u.country]];if(!l)throw new Error(`Missing country ID ${u.country}`);const h=e.continents[i[l.continent]];if(!h)throw new Error(`Missing continent ID ${l.continent}`);t.continents.add(h.id),t.countries.add(l.id)}return t}function Be(e,n){return{type:g.rankingsFiltered,payload:{rankings:e,filters:n}}}function Ye(e,n){return{type:g.resultsSorted,payload:{sortColumns:e,rankingType:n}}}function Ke(e=[],n){const{type:i,payload:r}=n;switch(i){case g.rankingsFiltered:return Xe(r.rankings,r.filters);case g.resultsSorted:return ze(e,r.sortColumns,r.rankingType)}return e}function Xe(e,n){var y,d,f,p,m,x,ee;const i=e.data,{competitionIDToIndex:r,personIDToIndex:t,continentIDToIndex:o,countryIDToIndex:s}=e,{topN:a,timeFrame:u}=n,l=24*60*60*1e3,h=[];for(const U of i.events)for(const S of U.rankings){const C={world:0,continents:{},countries:{}};for(const[K,E]of S.ranks.entries()){const O=i.competitions[r[E.competition]];if(!O)throw new Error(`Missing competition ID ${E.competition}`);const P=i.persons[t[E.id]];if(!P)throw new Error(`Missing competitor ID ${E.id}`);const v=i.countries[s[P.country]];if(!v)throw new Error(`Missing country ID ${P.country}`);const T=i.continents[o[v.continent]];if(!T)throw new Error(`Missing continent ID ${v.continent}`);const Ie=Math.floor((new Date().getTime()-new Date(O.startDate).getTime())/l);C.world++,(y=C.continents)[d=T.id]??(y[d]=0),C.continents[T.id]++,(f=C.countries)[p=v.id]??(f[p]=0),C.countries[v.id]++;const I=((m=S.missing)==null?void 0:m.world)??0;let A,R=1,k;n.rankingType==="cr"?((x=S.missing.continents)!=null&&x[T.id]?(A=S.missing.continents[T.id],I>0&&(R=A/I)):I>0&&(R=0),k=C.continents[T.id]+R*(E.rank-K-1)):n.rankingType==="nr"?((ee=S.missing.countries)!=null&&ee[v.id]?(A=S.missing.countries[v.id],I>0&&(R=A/I)):I>0&&(R=0),k=C.countries[v.id]+R*(E.rank-K-1)):(A=I,k=C.world+R*(E.rank-K-1)),k=Number(k.toFixed(0));const te={eventID:U.id,eventName:U.name,eventType:S.type,eventFormat:U.format,age:S.age,date:O.startDate,rank:k,name:P.name,wcaID:P.id,continent:T,country:v,result:E.best,compName:O.name,compWebID:O.webId,compCountry:O.country};Ie<=u&&k<=a&&Ve(te,n)&&h.push(te)}}return h}function Ve(e,n){return Ze(e,n.search)&&Ge(e,n.continent)&&We(e,n.country)}function Ge(e,n){return n?e.continent.id===n:!0}function We(e,n){return n?e.country.id===n:!0}function Ze(e,n){return n?[e.date,e.eventID,e.continent.id,e.age,e.eventID,e.country.id,e.age,e.eventID,e.age,e.eventID,e.eventType,e.continent.id,e.age,e.eventID,e.eventType,e.country.id,e.age,e.eventID,e.eventType,e.age,e.name,e.compName].map(t=>String(t)).join(" ").toLowerCase().includes(n.toLowerCase()):!0}function ze(e,n,i){const r=[...e];return[...n].reverse().map(o),r;function o(s){const{name:a,direction:u}=s;function l(d,f){switch(i){case"wr":return u*(d.age-f.age);case"cr":{const p=`${d.continent.id} ${d.age}`,m=`${f.continent.id} ${f.age}`;return u*p.localeCompare(m)}case"nr":{const p=`${d.country.id} ${d.age}`,m=`${f.country.id} ${f.age}`;return u*p.localeCompare(m)}}}function h(d,f){const p=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],m=p.indexOf(d.eventID),x=p.indexOf(f.eventID);return m===x&&d.eventType!==f.eventType?u*(d.eventType==="single"?-1:1):u*(m-x)}function y(d,f){if(d.eventFormat!==f.eventFormat)return d.eventFormat==="time"||f.eventFormat==="time"?u*(d.eventFormat==="time"?-1:1):u*(d.eventFormat==="number"?-1:1);switch(d.eventFormat){case"time":{const[p,m]=[d.result,f.result].map(ye);return u*(p-m)}case"number":return u*(Number(d.result)-Number(f.result));case"multi":{const[p,m]=[d.result,f.result].map(Je);return p.score!==m.score?-u*(p.score-m.score):p.seconds!==m.seconds?u*(p.seconds-m.seconds):u*(p.unsolved-m.unsolved)}}}switch(a){case"date":case"name":r.sort((d,f)=>u*d[a].localeCompare(f[a]));break;case"rank":r.sort((d,f)=>u*(d[a]-f[a]));break;case"event":r.sort(h);break;case"group":r.sort(l);break;case"result":r.sort(y);break}return r}}function Je(e){const[n,i]=e.split(" in "),[r,t]=n.split("/").map(Number),o=t-r,s=r-o,a=ye(i);return{score:s,seconds:a,unsolved:o}}function ye(e){const n=e.split(":").reverse();let i=0,r=1;for(const t of n)i+=Number(t)*r,r*=60;return i}function J(e){return{type:g.sortColumnsChanged,payload:e}}function Qe(e=[],n){const{type:i,payload:r}=n;switch(i){case g.sortColumnsChanged:return et(e,r)}return e}function et(e,n){const i=[...e],r=e.findIndex(t=>t.name===n.name);return r<0?(i[n.position]={name:n.name,label:n.label,direction:n.defaultDirection||1},i):r===n.position?(i[n.position].direction*=-1,i):(i.splice(r,1),i.splice(n.position,0,e[r]),i)}function tt(e){return{type:g.uiStateSet,payload:e}}function nt(e=q.uiState,n){const{type:i,payload:r}=n;switch(i){case g.uiStateSet:return r}return e}const q={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{},activeRegions:{continents:new Set,countries:new Set}},results:[],filters:{search:"",topN:10,timeFrame:30,rankingType:"wr",continent:"",country:""},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}],uiState:{scrollX:0,scrollY:0,activeID:null}},rt=Re({rankings:Fe,results:Ke,filters:Me,sortColumns:Qe,uiState:nt});function ot(e){const n=document.querySelector(e);function i(r){if(!n)throw new Error(`render(): "${e}" was not found`);Array.isArray(r)?n.replaceChildren(...r):n.replaceChildren(r)}return{render:i}}var L={},_={},M={},H={},X={},re;function it(){return re||(re=1,Object.defineProperty(X,"__esModule",{value:!0})),X}var V={},oe;function st(){return oe||(oe=1,Object.defineProperty(V,"__esModule",{value:!0})),V}var G={},ie;function at(){return ie||(ie=1,Object.defineProperty(G,"__esModule",{value:!0})),G}var W={},se;function ct(){return se||(se=1,Object.defineProperty(W,"__esModule",{value:!0})),W}var Z={},ae;function ut(){return ae||(ae=1,Object.defineProperty(Z,"__esModule",{value:!0})),Z}var F={},ce;function lt(){if(ce)return F;ce=1,Object.defineProperty(F,"__esModule",{value:!0}),F.classnames=void 0;const e=s=>Object.entries(s).map(([a,u])=>u&&a),n=s=>!!s,i=(s,a,u)=>u.indexOf(s)===a,r=[];function t(s){return s?typeof s=="string"?[s]:Array.isArray(s)?s.flatMap(t).filter(n):e(s).filter(n):r}function o(s){const a=t(s).filter(i);return a.length>0?a.join(" "):void 0}return F.classnames=o,F}var ue;function dt(){return ue||(ue=1,function(e){var n=H.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(t,o);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,a)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),i=H.__exportStar||function(r,t){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&n(t,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),i(it(),e),i(st(),e),i(at(),e),i(ct(),e),i(ut(),e),i(lt(),e)}(H)),H}var le;function ve(){if(le)return M;le=1,Object.defineProperty(M,"__esModule",{value:!0}),M.setAttributes=void 0;const e=dt();function n(t,o){for(const s of Object.keys(t))s in o&&(o[s]=t[s])}const i=new RegExp("^on\\p{Lu}","u");function r(t,o){for(const s of Object.keys(o)){if(s==="__source"||s==="__self"||s==="tsxTag")continue;const a=o[s];if(s==="class"){const u=(0,e.classnames)(a);u&&t.setAttribute(s,u)}else if(s==="ref")a.current=t;else if(i.test(s)){const u=s.replace(/Capture$/,""),l=s!==u,h=u.toLowerCase().substring(2);t.addEventListener(h,a,l)}else s==="style"&&typeof a!="string"?n(a,t.style):s==="dangerouslySetInnerHTML"?t.innerHTML=a:a===!0?t.setAttribute(s,s):(a||a===0)&&t.setAttribute(s,a.toString())}}return M.setAttributes=r,M}var b={},de;function _e(){if(de)return b;de=1,Object.defineProperty(b,"__esModule",{value:!0}),b.applyTsxTag=b.createDomElement=b.applyChildren=void 0;function e(t,o){o instanceof Element?t.appendChild(o):typeof o=="string"||typeof o=="number"?t.appendChild(document.createTextNode(o.toString())):console.warn("Unknown type to append: ",o)}function n(t,o){for(const s of o)!s&&s!==0||(Array.isArray(s)?n(t,s):e(t,s))}b.applyChildren=n;function i(t,o){const s=o!=null&&o.is?{is:o.is}:void 0;return o!=null&&o.xmlns?document.createElementNS(o.xmlns,t,s):document.createElement(t,s)}b.createDomElement=i;function r(t,o){let s=t,a=o;return a&&"tsxTag"in a&&(s=a.tsxTag,!a.is&&t.includes("-")&&(a={...a,is:t})),{finalTag:s,finalAttrs:a}}return b.applyTsxTag=r,b}var fe;function ft(){if(fe)return _;fe=1,Object.defineProperty(_,"__esModule",{value:!0}),_.createRef=_.h=_.createElement=void 0;const e=ve(),n=_e();function i(t,o,...s){if(typeof t=="function")return t({...o,children:s});const{finalTag:a,finalAttrs:u}=(0,n.applyTsxTag)(t,o),l=(0,n.createDomElement)(a,u);return u&&(0,e.setAttributes)(l,u),(0,n.applyChildren)(l,s),l}_.createElement=i,_.h=i;const r=()=>({current:null});return _.createRef=r,_}var N={},D={},he;function be(){if(he)return D;he=1,Object.defineProperty(D,"__esModule",{value:!0}),D.jsxDEV=D.jsxs=D.jsx=void 0;const e=ve(),n=_e();function i(r,t){if(typeof r=="function")return r(t);const{children:o,...s}=t,{finalTag:a,finalAttrs:u}=(0,n.applyTsxTag)(r,s),l=(0,n.createDomElement)(a,u);return(0,e.setAttributes)(l,u),(0,n.applyChildren)(l,[o]),l}return D.jsx=i,D.jsxs=i,D.jsxDEV=i,D}var pe;function ht(){if(pe)return N;pe=1,Object.defineProperty(N,"__esModule",{value:!0}),N.defineCustomElement=void 0;const e=be();function n(i,r,t){return customElements.define(i,r,t),o=>(0,e.jsx)(i,o)}return N.defineCustomElement=n,N}var z={},ge;function pt(){return ge||(ge=1,Object.defineProperty(z,"__esModule",{value:!0})),z}var me;function gt(){return me||(me=1,function(e){var n=L.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(t,o);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,a)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),i=L.__exportStar||function(r,t){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&n(t,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),i(ft(),e),i(ht(),e),i(be(),e),i(pt(),e)}(L)),L}var c=gt();function mt(e){const{store:n}=e,{lastUpdated:i}=n.getState().rankings;return c.h("div",{id:"info"},c.h("p",{class:"refreshed"},"Last refreshed: ",i," (UTC)"),c.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}let Y,Q,j;function yt(e){return Y=e.store,Q=e.handleRender,c.h("div",{id:"sort-columns"},c.h("div",{class:"strong"},"Sort:"),Y.getState().sortColumns.map(vt))}function vt(e,n){const i=["primary","secondary","tertiary"],r=e.direction==1?"ascending":"descending";return c.h("button",{onClick:_t,onDragStart:De,onDragEnter:Dt,onDragOver:bt,onDragLeave:St,onDrop:Ct,onDragEnd:Se,class:`sort-column ${r} ${i[n]} strong`,draggable:"true","data-sort-on":e.name,"data-position":n},e.label,c.h("span",{"aria-hidden":"true"}))}function _t(e){const n=e.currentTarget,i=String(n.dataset.sortOn),r=String(n.textContent).trim(),t=Number(n.dataset.position);Y.dispatch(J({name:i,label:r,position:t,defaultDirection:null})),Q()}function De(e){const n=e.currentTarget,i=e.dataTransfer;j=n,n.style.opacity="0.4",i.effectAllowed="move"}function bt(e){const n=e.dataTransfer;e.preventDefault(),n.dropEffect="move"}function Dt(e){e.currentTarget.classList.add("over")}function St(e){e.currentTarget.classList.remove("over")}function Ct(e){const n=e.currentTarget;if(e.stopPropagation(),n.classList.remove("over"),j.dataset.sortOn!==n.dataset.sortOn){const i=j.querySelector("span.text"),r=String(j.dataset.sortOn),t=String(i==null?void 0:i.textContent).trim(),o=Number(n.dataset.position),s=Number(j.dataset.defaultDirection)||null;Y.dispatch(J({name:r,label:t,position:o,defaultDirection:s})),Q()}}function Se(e){e.currentTarget.removeAttribute("style")}function Et(e,n=300){let i=null;return(...r)=>{i!==null&&window.clearTimeout(i),i=window.setTimeout(()=>e(...r),n)}}function Tt(){const e=["333bf","333 60","sq1 eu","555 au 40","50","skewb single na 50","clock average","333fm average","competitor name","competition name"];return"e.g. "+e[Math.floor(Math.random()*e.length)]}function It(e){const{store:n,handleRender:i}=e,{search:r}=n.getState().filters;function t(o){const s=o.target;n.dispatch(xe(s.value)),i()}return c.h("div",{id:"search"},c.h("label",{class:"strong"},"Search: ",c.h("input",{value:r,onInput:Et(t,350),id:"search-input",type:"search",size:25,placeholder:Tt()})))}function $(e,n){return e.map(i=>c.h("option",{value:i.value,selected:i.value==n},i.label))}const Rt=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"}],kt=[{value:"wr",label:"WR"},{value:"cr",label:"CR"},{value:"nr",label:"NR"}],Ot=[{value:"7",label:"7 days"},{value:"14",label:"14 days"},{value:"30",label:"30 days"},{value:"60",label:"60 days"},{value:"90",label:"90 days"}];function wt(e){const{store:n,handleRender:i}=e,{timeFrame:r,topN:t,rankingType:o}=n.getState().filters;function s(){n.dispatch(we(Number(this.value))),i()}function a(){n.dispatch(Oe(Number(this.value))),i()}function u(){n.dispatch(Pe(this.value)),i()}return c.h("div",{id:"parameters"},c.h("label",{class:"strong"},"Top: ",c.h("select",{id:"top-n",onChange:a},$(Rt,t))),c.h("label",{class:"strong"},"  Type: ",c.h("select",{id:"ranking-type-filter",onChange:u},$(kt,o))),c.h("label",{class:"strong"},"  Time frame: ",c.h("select",{id:"time-frame",onChange:s},$(Ot,r))))}function xt(e){const{store:n,handleRender:i}=e,{rankings:r,filters:t}=n.getState(),{continent:o,country:s}=t,{countryIDToIndex:a}=r,{continents:u,countries:l}=r.data,h=r.activeRegions.continents,y=[];function d(){const p=this.value!=="xx"?this.value:"";n.dispatch(Ae(p)),i()}let f;if(s){const p=l[a[s]];f=u.filter(m=>p.continent===m.id)}else f=u.filter(p=>h.has(p.id));for(const p of f)y.push({label:p.name,value:p.id});return c.h("div",null,c.h("label",{class:"strong"},"Continent: ",c.h("select",{id:"continent-filter",onChange:d},c.h("option",{value:"xx"},"All Continents"),$(y,o))))}function Pt(e){const{store:n,handleRender:i}=e,r=n.getState().rankings.data.countries,t=n.getState().rankings.activeRegions.countries,o=n.getState().filters.country,s=n.getState().filters.continent,a=[];function u(){const h=this.value!=="xx"?this.value:"";n.dispatch(Le(h)),i()}const l=r.filter(h=>t.has(h.id)).filter(h=>s===""||h.continent===s);for(const h of l)a.push({label:h.name,value:h.id});return c.h("div",null,c.h("label",{class:"strong"},"Country: ",c.h("select",{id:"country-filter",onChange:u},c.h("option",{value:"xx"},"All Countries"),$(a,o))))}function At(e){const{results:n}=e.store.getState();return c.h("div",{id:"panel"},c.h("div",{class:"panel-grid"},c.h(It,e),c.h(xt,e),c.h(Pt,e),c.h(wt,e),c.h(yt,e),c.h("div",{class:"strong"},"Showing ",n.length," ",n.length===1?"result":"results")))}const Lt=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function Mt(e){const{results:n}=e.store.getState();return!n||n.length===0?Ut():Ht(e)}function Ht(e){const{results:n}=e.store.getState(),i=[];for(const r of n)i.push(c.h(qt,{rowData:r,appProps:e}));return c.h("table",{id:"ranking-table",class:"rankings sortable"},c.h("thead",null,c.h(Ft,{headers:Lt,appProps:e})),c.h("tbody",null,i))}function Ft(e){const{headers:n,appProps:i}=e,r=[];for(const t of n)r.push(c.h(Nt,{columnHeader:t,appProps:i}));return c.h("tr",null,r)}function Nt(e){const{columnHeader:n,appProps:i}=e;return n.defaultSortDirection===null?c.h($t,{columnHeader:n}):c.h(jt,{columnHeader:n,appProps:i})}function jt(e){const{columnHeader:n,appProps:i}=e,{sortColumns:r}=i.store.getState();function t(a){const u=(a.ctrlKey?1:0)+(a.shiftKey?1:0);i.store.dispatch(J({name:n.name,label:n.label,position:u,defaultDirection:n.defaultSortDirection})),i.handleRender()}const o=[n.name];let s=null;for(const[a,u]of r.entries())if(u.name===n.name){const l=u.direction==1?"ascending":"descending",h=["primary","secondary","tertiary"];o.push(l),o.push(h[a]),a===0&&(s=l)}return c.h("th",{draggable:"true",class:o.join(" "),"data-sort-on":n.name,"data-default-direction":n.defaultSortDirection,"aria-sort":s,onClick:t,onDragStart:De,onDragEnd:Se},c.h("button",{class:"strong",type:"button"},c.h("div",{class:"column"},c.h("span",{class:"text"},n.label)),c.h("div",{class:"column"},c.h("span",{class:"sort up","aria-hidden":"true"},"▲"),c.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function $t(e){return c.h("th",{class:`${e.columnHeader.name} no-sort strong`},c.h("span",null,e.columnHeader.label))}function qt(e){const n="https://www.worldcubeassociation.org/persons",i="https://www.worldcubeassociation.org/competitions",r="https://wca-seniors.org/Senior_Rankings.html",{rowData:t,appProps:o}=e,s=o.store.getState().filters.rankingType,a=t.date.indexOf("-"),u=t.date.slice(0,a+1),l=t.date.slice(a+1),h=`${n}/${t.wcaID}?event=${t.eventID}`,y=`${i}/${t.compWebID}/results/by_person#${t.wcaID}`,d=`${r}#${t.eventID}-${t.eventType}-${t.age}`;let f;switch(s){case"wr":{f=c.h("a",{href:d,target:"_blank"},t.age,"+");break}case"cr":{f=c.h("a",{href:d+`-${t.continent.id}`,target:"_blank"},t.continent.id," ",t.age,"+");break}case"nr":{f=c.h("a",{href:d+`-xx-${t.country.id}`,target:"_blank"},t.country.id," ",t.age,"+");break}}return c.h("tr",null,c.h("td",{class:"date"},u,c.h("wbr",null),l),c.h("td",{class:"event"},c.h("i",{class:`event-${t.eventID} cubing-icon icon`}),t.eventID," ",t.eventType),c.h("td",{class:"group"},f),c.h("td",{class:"rank"},t.rank),c.h("td",{class:"name"},c.h("a",{href:h,target:"_blank"},c.h("span",{class:`flag-${t.country.id} flag`})," ",t.name)),c.h("td",{class:"result"},t.result),c.h("td",{class:"competition"},c.h("a",{href:y,target:"_blank"},c.h("span",{class:`flag-${t.compCountry} flag`})," ",t.compName)))}function Ut(){return c.h("h3",{class:"no-results"},"No results")}function Bt(e){return c.h("div",null,c.h(mt,e),c.h(At,e),c.h(Mt,e))}function Yt(){return c.h("h3",{class:"message"},"Loading... please wait")}function Ce(e){return c.h("div",{class:"error"},c.h("h3",null,"Something went wrong ™"),c.h("div",{class:"message"},e))}const Ee=window.rankings,B=ot("#app");if(!Ee)throw B.render(Ce("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const w=ke(q,rt);w.dispatch(He(Ee));Te();function Te(){try{const e=w.getState();w.dispatch(tt(Kt())),B.render(Yt()),w.dispatch(Be(e.rankings,e.filters)),w.dispatch(Ye(e.sortColumns,e.filters.rankingType)),B.render(Bt({store:w,handleRender:Te})),Xt(e.uiState)}catch(e){throw e instanceof Error&&B.render(Ce(e.message)),e}}function Kt(){var i;const e=q.uiState;e.scrollX=window.scrollX,e.scrollY=window.scrollY,e.activeID=((i=document.activeElement)==null?void 0:i.id)||null;const n=document.getElementById("search-input");return e.selectionStart=n==null?void 0:n.selectionStart,e.selectionEnd=n==null?void 0:n.selectionEnd,e.selectionDirection=n==null?void 0:n.selectionDirection,e}function Xt(e){var i;e.activeID&&((i=document.getElementById(e.activeID))==null||i.focus());const n=document.getElementById("search-input");n.selectionStart=(e==null?void 0:e.selectionStart)||null,n.selectionEnd=(e==null?void 0:e.selectionEnd)||null,n.selectionDirection=(e==null?void 0:e.selectionDirection)||"none",window.scroll(e.scrollX,e.scrollY)}
