(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();var ne;(function(t){var r=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,o){this._data[e]=o},n.prototype.setDragImage=function(e,o,i){var a=s._instance;a._imgCustom=e,a._imgOffset={x:o,y:i}},n}();t.DataTransfer=r;var s=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var o=document,i=this._touchstart.bind(this),a=this._touchmove.bind(this),u=this._touchend.bind(this),l=e?{passive:!1,capture:!1}:!1;o.addEventListener("touchstart",i,l),o.addEventListener("touchmove",a,l),o.addEventListener("touchend",u),o.addEventListener("touchcancel",u)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var o=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var i=this._closestDraggable(e.target);i&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=i,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){o._dragSource==i&&o._img==null&&o._dispatchEvent(e,"contextmenu",i)&&o._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){o._isDragEnabled=!0,o._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var o=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",o)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",o)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),o!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",o),this._lastTarget=o),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",o))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var o=this._getDelta(e);return o>n._THRESHOLD||n._ISPRESSHOLDMODE&&o>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new r,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,o){return e&&e.touches&&(e=e.touches[0]),{x:o?e.pageX:e.clientX,y:o?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var o=this._getPoint(e);return Math.abs(o.x-this._ptDown.x)+Math.abs(o.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var o=this._getPoint(e),i=document.elementFromPoint(o.x,o.y);i&&getComputedStyle(i).pointerEvents=="none";)i=i.parentElement;return i},n.prototype._createImage=function(e){this._img&&this._destroyImage();var o=this._imgCustom||this._dragSource;if(this._img=o.cloneNode(!0),this._copyStyle(o,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var i=o.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-i.left,y:a.y-i.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var o=this;requestAnimationFrame(function(){if(o._img){var i=o._getPoint(e,!0),a=o._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(i.x-o._imgOffset.x)+"px",a.top=Math.round(i.y-o._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,o,i){for(var a=0;a<i.length;a++){var u=i[a];e[u]=o[u]}},n.prototype._copyStyle=function(e,o){if(n._rmvAtts.forEach(function(D){o.removeAttribute(D)}),e instanceof HTMLCanvasElement){var i=e,a=o;a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0)}for(var u=getComputedStyle(e),l=0;l<u.length;l++){var g=u[l];g.indexOf("transition")<0&&(o.style[g]=u[g])}o.style.pointerEvents="none";for(var l=0;l<e.children.length;l++)this._copyStyle(e.children[l],o.children[l])},n.prototype._dispatchEvent=function(e,o,i){if(e&&i){var a=document.createEvent("Event"),u=e.touches?e.touches[0]:e;return a.initEvent(o,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,n._kbdProps),this._copyProps(a,u,n._ptProps),a.dataTransfer=this._dataTransfer,i.dispatchEvent(a),a.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();s._instance=new s,s._THRESHOLD=5,s._OPACITY=.5,s._DBLCLICK=500,s._CTXMENU=900,s._ISPRESSHOLDMODE=!1,s._PRESSHOLDAWAIT=400,s._PRESSHOLDMARGIN=25,s._PRESSHOLDTHRESHOLD=0,s._rmvAtts="id,class,style,draggable".split(","),s._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),s._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=s})(ne||(ne={}));function Re(t){return(r={},s)=>{const n={};for(const e in t){const o=t[e];n[e]=o(r[e],s)}return n}}function we(t,r){let s=t;function n(){return s}function e(o){s=r(n(),o)}return{getState:n,dispatch:e}}var h=(t=>(t.searchFilterChanged="searchFilterChanged",t.topNChanged="topNChanged",t.timeFrameChanged="timeFrameChanged",t.regionChanged="regionChanged",t.rankingsDataSet="rankingsDataSet",t.rankingsFiltered="rankingsFiltered",t.resultsSorted="resultsSorted",t.sortColumnsChanged="sortColumnsChanged",t.uiStateSet="uiStateSet",t))(h||{});function Pe(t){return{type:h.topNChanged,payload:t}}function xe(t){return{type:h.timeFrameChanged,payload:t}}function Ae(t){return{type:h.searchFilterChanged,payload:t}}function ke(t){return{type:h.regionChanged,payload:t}}function Le(t=F.filters,r){const{type:s,payload:n}=r;switch(s){case h.topNChanged:return{...t,topN:n};case h.timeFrameChanged:return{...t,timeFrame:n};case h.searchFilterChanged:return{...t,search:n};case h.regionChanged:return{...t,region:n}}return t}function Me(t){return{type:h.rankingsDataSet,payload:t}}function He(t=F.rankings,r){const{type:s,payload:n}=r;switch(s){case h.rankingsDataSet:return{lastUpdated:n.refreshed,data:n,competitionIDToIndex:Ne(n),personIDToIndex:je(n),continentIDToIndex:$e(n),countryIDToIndex:Fe(n)}}return t}function Ne(t){const r={};for(const[s,n]of t.competitions.entries())r[n.id]=s;return r}function je(t){const r={};for(const[s,n]of t.persons.entries())r[n.id]=s;return r}function $e(t){const r={};for(const[s,n]of t.continents.entries())r[n.id]=s;return r}function Fe(t){const r={};for(const[s,n]of t.countries.entries())r[n.id]=s;return r}function qe(t,r){return{type:h.rankingsFiltered,payload:{rankings:t,filters:r}}}function Ue(t,r){return{type:h.resultsSorted,payload:{sortColumns:t,region:r}}}function Be(t=[],r){const{type:s,payload:n}=r;switch(s){case h.rankingsFiltered:return Ye(n.rankings,n.filters);case h.resultsSorted:return Xe(t,n.sortColumns,n.region)}return t}function Ye(t,r){var D,d,f,p,m,x,ee;const s=t.data,{competitionIDToIndex:n,personIDToIndex:e,continentIDToIndex:o,countryIDToIndex:i}=t,{topN:a,timeFrame:u}=r,l=24*60*60*1e3,g=[];for(const q of s.events)for(const S of q.rankings){const E={world:0,continents:{},countries:{}};for(const[Y,C]of S.ranks.entries()){const P=s.competitions[n[C.competition]];if(!P)throw new Error(`Missing competition ID ${C.competition}`);const A=s.persons[e[C.id]];if(!A)throw new Error(`Missing competitor ID ${C.id}`);const _=s.countries[i[A.country]];if(!_)throw new Error(`Missing country ID ${A.country}`);const T=s.continents[o[_.continent]];if(!T)throw new Error(`Missing continent ID ${_.continent}`);const Oe=Math.floor((new Date().getTime()-new Date(P.startDate).getTime())/l);E.world++,(D=E.continents)[d=T.id]??(D[d]=0),E.continents[T.id]++,(f=E.countries)[p=_.id]??(f[p]=0),E.countries[_.id]++;const I=((m=S.missing)==null?void 0:m.world)??0;let k,O=1,R;r.region==="continent"?((x=S.missing.continents)!=null&&x[T.id]?(k=S.missing.continents[T.id],I>0&&(O=k/I)):I>0&&(O=0),R=E.continents[T.id]+O*(C.rank-Y-1)):r.region==="country"?((ee=S.missing.countries)!=null&&ee[_.id]?(k=S.missing.countries[_.id],I>0&&(O=k/I)):I>0&&(O=0),R=E.countries[_.id]+O*(C.rank-Y-1)):(k=I,R=E.world+O*(C.rank-Y-1)),R=Number(R.toFixed(0));const te={eventID:q.id,eventName:q.name,eventType:S.type,eventFormat:q.format,age:S.age,date:P.startDate,rank:R,name:A.name,wcaID:A.id,continent:T,country:_,result:C.best,compName:P.name,compWebID:P.webId,compCountry:P.country};Oe<=u&&R<=a&&Ke(te,r)&&g.push(te)}}return g}function Ke(t,r){const{search:s}=r;return s?[t.date,t.eventID,t.continent.id,t.age,t.eventID,t.country.id,t.age,t.eventID,t.age,t.eventID,t.eventType,t.continent.id,t.age,t.eventID,t.eventType,t.country.id,t.age,t.eventID,t.eventType,t.age,t.name,t.compName].map(o=>String(o)).join(" ").toLowerCase().includes(s.toLowerCase()):!0}function Xe(t,r,s){const n=[...t];return[...r].reverse().map(o),n;function o(i){const{name:a,direction:u}=i;function l(d,f){switch(s){case"world":return u*(d.age-f.age);case"continent":{const p=`${d.continent.id} ${d.age}`,m=`${f.continent.id} ${f.age}`;return u*p.localeCompare(m)}case"country":{const p=`${d.country.id} ${d.age}`,m=`${f.country.id} ${f.age}`;return u*p.localeCompare(m)}}}function g(d,f){const p=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],m=p.indexOf(d.eventID),x=p.indexOf(f.eventID);return m===x&&d.eventType!==f.eventType?u*(d.eventType==="single"?-1:1):u*(m-x)}function D(d,f){if(d.eventFormat!==f.eventFormat)return d.eventFormat==="time"||f.eventFormat==="time"?u*(d.eventFormat==="time"?-1:1):u*(d.eventFormat==="number"?-1:1);switch(d.eventFormat){case"time":{const[p,m]=[d.result,f.result].map(ve);return u*(p-m)}case"number":return u*(Number(d.result)-Number(f.result));case"multi":{const[p,m]=[d.result,f.result].map(Ve);return p.score!==m.score?-u*(p.score-m.score):p.seconds!==m.seconds?u*(p.seconds-m.seconds):u*(p.unsolved-m.unsolved)}}}switch(a){case"date":case"name":n.sort((d,f)=>u*d[a].localeCompare(f[a]));break;case"rank":n.sort((d,f)=>u*(d[a]-f[a]));break;case"event":n.sort(g);break;case"group":n.sort(l);break;case"result":n.sort(D);break}return n}}function Ve(t){const[r,s]=t.split(" in "),[n,e]=r.split("/").map(Number),o=e-n,i=n-o,a=ve(s);return{score:i,seconds:a,unsolved:o}}function ve(t){const r=t.split(":").reverse();let s=0,n=1;for(const e of r)s+=Number(e)*n,n*=60;return s}function J(t){return{type:h.sortColumnsChanged,payload:t}}function Ge(t=[],r){const{type:s,payload:n}=r;switch(s){case h.sortColumnsChanged:return We(t,n)}return t}function We(t,r){const s=[...t],n=t.findIndex(e=>e.name===r.name);return n<0?(s[r.position]={name:r.name,label:r.label,direction:r.defaultDirection||1},s):n===r.position?(s[r.position].direction*=-1,s):(s.splice(n,1),s.splice(r.position,0,t[n]),s)}function Ze(t){return{type:h.uiStateSet,payload:t}}function ze(t=F.uiState,r){const{type:s,payload:n}=r;switch(s){case h.uiStateSet:return n}return t}const F={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{}},results:[],filters:{search:"",topN:10,timeFrame:30,region:"world"},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}],uiState:{scrollX:0,scrollY:0,activeID:null}},Je=Re({rankings:He,results:Be,filters:Le,sortColumns:Ge,uiState:ze});function Qe(t){const r=document.querySelector(t);function s(n){if(!r)throw new Error(`render(): "${t}" was not found`);Array.isArray(n)?r.replaceChildren(...n):r.replaceChildren(n)}return{render:s}}var L={},v={},M={},H={},K={},re;function et(){return re||(re=1,Object.defineProperty(K,"__esModule",{value:!0})),K}var X={},oe;function tt(){return oe||(oe=1,Object.defineProperty(X,"__esModule",{value:!0})),X}var V={},se;function nt(){return se||(se=1,Object.defineProperty(V,"__esModule",{value:!0})),V}var G={},ie;function rt(){return ie||(ie=1,Object.defineProperty(G,"__esModule",{value:!0})),G}var W={},ae;function ot(){return ae||(ae=1,Object.defineProperty(W,"__esModule",{value:!0})),W}var N={},ce;function st(){if(ce)return N;ce=1,Object.defineProperty(N,"__esModule",{value:!0}),N.classnames=void 0;const t=i=>Object.entries(i).map(([a,u])=>u&&a),r=i=>!!i,s=(i,a,u)=>u.indexOf(i)===a,n=[];function e(i){return i?typeof i=="string"?[i]:Array.isArray(i)?i.flatMap(e).filter(r):t(i).filter(r):n}function o(i){const a=e(i).filter(s);return a.length>0?a.join(" "):void 0}return N.classnames=o,N}var ue;function it(){return ue||(ue=1,function(t){var r=H.__createBinding||(Object.create?function(n,e,o,i){i===void 0&&(i=o);var a=Object.getOwnPropertyDescriptor(e,o);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(n,i,a)}:function(n,e,o,i){i===void 0&&(i=o),n[i]=e[o]}),s=H.__exportStar||function(n,e){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&r(e,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),s(et(),t),s(tt(),t),s(nt(),t),s(rt(),t),s(ot(),t),s(st(),t)}(H)),H}var le;function ye(){if(le)return M;le=1,Object.defineProperty(M,"__esModule",{value:!0}),M.setAttributes=void 0;const t=it();function r(e,o){for(const i of Object.keys(e))i in o&&(o[i]=e[i])}const s=new RegExp("^on\\p{Lu}","u");function n(e,o){for(const i of Object.keys(o)){if(i==="__source"||i==="__self"||i==="tsxTag")continue;const a=o[i];if(i==="class"){const u=(0,t.classnames)(a);u&&e.setAttribute(i,u)}else if(i==="ref")a.current=e;else if(s.test(i)){const u=i.replace(/Capture$/,""),l=i!==u,g=u.toLowerCase().substring(2);e.addEventListener(g,a,l)}else i==="style"&&typeof a!="string"?r(a,e.style):i==="dangerouslySetInnerHTML"?e.innerHTML=a:a===!0?e.setAttribute(i,i):(a||a===0)&&e.setAttribute(i,a.toString())}}return M.setAttributes=n,M}var y={},de;function be(){if(de)return y;de=1,Object.defineProperty(y,"__esModule",{value:!0}),y.applyTsxTag=y.createDomElement=y.applyChildren=void 0;function t(e,o){o instanceof Element?e.appendChild(o):typeof o=="string"||typeof o=="number"?e.appendChild(document.createTextNode(o.toString())):console.warn("Unknown type to append: ",o)}function r(e,o){for(const i of o)!i&&i!==0||(Array.isArray(i)?r(e,i):t(e,i))}y.applyChildren=r;function s(e,o){const i=o!=null&&o.is?{is:o.is}:void 0;return o!=null&&o.xmlns?document.createElementNS(o.xmlns,e,i):document.createElement(e,i)}y.createDomElement=s;function n(e,o){let i=e,a=o;return a&&"tsxTag"in a&&(i=a.tsxTag,!a.is&&e.includes("-")&&(a={...a,is:e})),{finalTag:i,finalAttrs:a}}return y.applyTsxTag=n,y}var fe;function at(){if(fe)return v;fe=1,Object.defineProperty(v,"__esModule",{value:!0}),v.createRef=v.h=v.createElement=void 0;const t=ye(),r=be();function s(e,o,...i){if(typeof e=="function")return e({...o,children:i});const{finalTag:a,finalAttrs:u}=(0,r.applyTsxTag)(e,o),l=(0,r.createDomElement)(a,u);return u&&(0,t.setAttributes)(l,u),(0,r.applyChildren)(l,i),l}v.createElement=s,v.h=s;const n=()=>({current:null});return v.createRef=n,v}var j={},b={},he;function De(){if(he)return b;he=1,Object.defineProperty(b,"__esModule",{value:!0}),b.jsxDEV=b.jsxs=b.jsx=void 0;const t=ye(),r=be();function s(n,e){if(typeof n=="function")return n(e);const{children:o,...i}=e,{finalTag:a,finalAttrs:u}=(0,r.applyTsxTag)(n,i),l=(0,r.createDomElement)(a,u);return(0,t.setAttributes)(l,u),(0,r.applyChildren)(l,[o]),l}return b.jsx=s,b.jsxs=s,b.jsxDEV=s,b}var pe;function ct(){if(pe)return j;pe=1,Object.defineProperty(j,"__esModule",{value:!0}),j.defineCustomElement=void 0;const t=De();function r(s,n,e){return customElements.define(s,n,e),o=>(0,t.jsx)(s,o)}return j.defineCustomElement=r,j}var Z={},me;function ut(){return me||(me=1,Object.defineProperty(Z,"__esModule",{value:!0})),Z}var ge;function lt(){return ge||(ge=1,function(t){var r=L.__createBinding||(Object.create?function(n,e,o,i){i===void 0&&(i=o);var a=Object.getOwnPropertyDescriptor(e,o);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(n,i,a)}:function(n,e,o,i){i===void 0&&(i=o),n[i]=e[o]}),s=L.__exportStar||function(n,e){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(e,o)&&r(e,n,o)};Object.defineProperty(t,"__esModule",{value:!0}),s(at(),t),s(ct(),t),s(De(),t),s(ut(),t)}(L)),L}var c=lt();function dt(t){const{store:r}=t,{lastUpdated:s}=r.getState().rankings;return c.h("div",{id:"info"},c.h("p",{class:"refreshed"},"Last refreshed: ",s," (UTC)"),c.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}let B,Q,$;function ft(t){return B=t.store,Q=t.handleRender,c.h("div",{id:"sort-columns"},c.h("div",{class:"strong"},"Sort:"),B.getState().sortColumns.map(ht))}function ht(t,r){const s=["primary","secondary","tertiary"],n=t.direction==1?"ascending":"descending";return c.h("button",{onClick:pt,onDragStart:Se,onDragEnter:gt,onDragOver:mt,onDragLeave:_t,onDrop:vt,onDragEnd:Ee,class:`sort-column ${n} ${s[r]} strong`,draggable:"true","data-sort-on":t.name,"data-position":r},t.label,c.h("span",{"aria-hidden":"true"}))}function pt(t){const r=t.currentTarget,s=String(r.dataset.sortOn),n=String(r.textContent).trim(),e=Number(r.dataset.position);B.dispatch(J({name:s,label:n,position:e,defaultDirection:null})),Q()}function Se(t){const r=t.currentTarget,s=t.dataTransfer;$=r,r.style.opacity="0.4",s.effectAllowed="move"}function mt(t){const r=t.dataTransfer;t.preventDefault(),r.dropEffect="move"}function gt(t){t.currentTarget.classList.add("over")}function _t(t){t.currentTarget.classList.remove("over")}function vt(t){const r=t.currentTarget;if(t.stopPropagation(),r.classList.remove("over"),$.dataset.sortOn!==r.dataset.sortOn){const s=$.querySelector("span.text"),n=String($.dataset.sortOn),e=String(s==null?void 0:s.textContent).trim(),o=Number(r.dataset.position),i=Number($.dataset.defaultDirection)||null;B.dispatch(J({name:n,label:e,position:o,defaultDirection:i})),Q()}}function Ee(t){t.currentTarget.removeAttribute("style")}function yt(t,r=300){let s=null;return(...n)=>{s!==null&&window.clearTimeout(s),s=window.setTimeout(()=>t(...n),r)}}const _e=["333bf","333 60","sq1 eu","555 au 40","60"],bt=_e[Math.floor(Math.random()*_e.length)];function Dt(t){const{store:r,handleRender:s}=t,{search:n}=r.getState().filters,e="e.g. "+bt;function o(i){const a=i.target;r.dispatch(Ae(a.value)),s()}return c.h("div",{id:"search"},c.h("label",{class:"strong"},"Search: ",c.h("input",{value:n,onInput:yt(o,500),id:"search-input",type:"search",size:20,placeholder:e})))}const St=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"}],Et=[{value:"world",label:"World"},{value:"continent",label:"Continent"},{value:"country",label:"Country"}],Ct=[{value:"7",label:"7 days"},{value:"14",label:"14 days"},{value:"30",label:"30 days"},{value:"60",label:"60 days"},{value:"90",label:"90 days"}];function Tt(t){const{store:r,handleRender:s}=t,{timeFrame:n,topN:e,region:o}=r.getState().filters;function i(){r.dispatch(xe(Number(this.value))),s()}function a(){r.dispatch(Pe(Number(this.value))),s()}function u(){r.dispatch(ke(this.value)),s()}return c.h("div",{id:"parameters"},c.h("label",{class:"strong"},"Top: ",c.h("select",{id:"top-n",onChange:a},z(St,e))),c.h("label",{class:"strong"},"  Region: ",c.h("select",{id:"region",onChange:u},z(Et,o))),c.h("label",{class:"strong"},"  Time frame: ",c.h("select",{id:"time-frame",onChange:i},z(Ct,n))))}function z(t,r){return t.map(s=>c.h("option",{value:s.value,selected:s.value==r},s.label))}function It(t){const{results:r}=t.store.getState();return c.h("div",{id:"panel"},c.h("div",{class:"panel-grid"},c.h(Dt,t),c.h(Tt,t),c.h(ft,t),c.h("div",{class:"strong"},"Showing ",r.length," ",r.length===1?"result":"results")))}const Ot=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function Rt(t){const{results:r}=t.store.getState();return!r||r.length===0?Mt():wt(t)}function wt(t){const{results:r}=t.store.getState(),s=[];for(const n of r)s.push(c.h(Lt,{rowData:n,appProps:t}));return c.h("table",{id:"ranking-table",class:"rankings sortable"},c.h("thead",null,c.h(Pt,{headers:Ot,appProps:t})),c.h("tbody",null,s))}function Pt(t){const{headers:r,appProps:s}=t,n=[];for(const e of r)n.push(c.h(xt,{columnHeader:e,appProps:s}));return c.h("tr",null,n)}function xt(t){const{columnHeader:r,appProps:s}=t;return r.defaultSortDirection===null?c.h(kt,{columnHeader:r}):c.h(At,{columnHeader:r,appProps:s})}function At(t){const{columnHeader:r,appProps:s}=t,{sortColumns:n}=s.store.getState();function e(a){const u=(a.ctrlKey?1:0)+(a.shiftKey?1:0);s.store.dispatch(J({name:r.name,label:r.label,position:u,defaultDirection:r.defaultSortDirection})),s.handleRender()}const o=[r.name];let i=null;for(const[a,u]of n.entries())if(u.name===r.name){const l=u.direction==1?"ascending":"descending",g=["primary","secondary","tertiary"];o.push(l),o.push(g[a]),a===0&&(i=l)}return c.h("th",{draggable:"true",class:o.join(" "),"data-sort-on":r.name,"data-default-direction":r.defaultSortDirection,"aria-sort":i,onClick:e,onDragStart:Se,onDragEnd:Ee},c.h("button",{class:"strong",type:"button"},c.h("div",{class:"column"},c.h("span",{class:"text"},r.label)),c.h("div",{class:"column"},c.h("span",{class:"sort up","aria-hidden":"true"},"▲"),c.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function kt(t){return c.h("th",{class:`${t.columnHeader.name} no-sort strong`},c.h("span",null,t.columnHeader.label))}function Lt(t){const r="https://www.worldcubeassociation.org/persons",s="https://www.worldcubeassociation.org/competitions",n="https://wca-seniors.org/Senior_Rankings.html",{rowData:e,appProps:o}=t,i=o.store.getState().filters.region,a=e.date.indexOf("-"),u=e.date.slice(0,a+1),l=e.date.slice(a+1),g=`${r}/${e.wcaID}?event=${e.eventID}`,D=`${s}/${e.compWebID}/results/by_person#${e.wcaID}`,d=`${n}#${e.eventID}-${e.eventType}-${e.age}`;let f;switch(i){case"world":{f=c.h("a",{href:d,target:"_blank"},e.age,"+");break}case"continent":{f=c.h("a",{href:d+`-${e.continent.id}`,target:"_blank"},e.continent.id," ",e.age,"+");break}case"country":{f=c.h("a",{href:d+`-xx-${e.country.id}`,target:"_blank"},c.h("span",{class:`flag-${e.country.id} flag`})," ",e.country.id," ",e.age,"+");break}}return c.h("tr",null,c.h("td",{class:"date"},u,c.h("wbr",null),l),c.h("td",{class:"event"},c.h("i",{class:`event-${e.eventID} cubing-icon icon`}),e.eventID," ",e.eventType),c.h("td",{class:"group"},f),c.h("td",{class:"rank"},e.rank),c.h("td",{class:"name"},c.h("a",{href:g,target:"_blank"},e.name)),c.h("td",{class:"result"},e.result),c.h("td",{class:"competition"},c.h("a",{href:D,target:"_blank"},c.h("span",{class:`flag-${e.compCountry} flag`})," ",e.compName)))}function Mt(){return c.h("h3",{class:"no-results"},"No results")}function Ht(t){return c.h("div",null,c.h(dt,t),c.h(It,t),c.h(Rt,t))}function Nt(){return c.h("h3",{class:"message"},"Loading... please wait")}function Ce(t){return c.h("div",{class:"error"},c.h("h3",null,"Something went wrong ™"),c.h("div",{class:"message"},t))}const Te=window.rankings,U=Qe("#app");if(!Te)throw U.render(Ce("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const w=we(F,Je);w.dispatch(Me(Te));Ie();function Ie(){try{const t=w.getState();w.dispatch(Ze(jt())),U.render(Nt()),w.dispatch(qe(t.rankings,t.filters)),w.dispatch(Ue(t.sortColumns,t.filters.region)),U.render(Ht({store:w,handleRender:Ie})),$t(w.getState().uiState)}catch(t){throw t instanceof Error&&U.render(Ce(t.message)),t}}function jt(){var s;const t=F.uiState;t.scrollX=window.scrollX,t.scrollY=window.scrollY,t.activeID=((s=document.activeElement)==null?void 0:s.id)||null;const r=document.getElementById("search-input");return t.selectionStart=r==null?void 0:r.selectionStart,t.selectionEnd=r==null?void 0:r.selectionEnd,t.selectionDirection=r==null?void 0:r.selectionDirection,t}function $t(t){var s;t.activeID&&((s=document.getElementById(t.activeID))==null||s.focus());const r=document.getElementById("search-input");r.selectionStart=(t==null?void 0:t.selectionStart)||null,r.selectionEnd=(t==null?void 0:t.selectionEnd)||null,r.selectionDirection=(t==null?void 0:t.selectionDirection)||"none",window.scroll(t.scrollX,t.scrollY)}
