(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();var ne;(function(e){var n=function(){function r(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),r.prototype.clearData=function(t){t!=null?delete this._data[t]:this._data=null},r.prototype.getData=function(t){return this._data[t]||""},r.prototype.setData=function(t,o){this._data[t]=o},r.prototype.setDragImage=function(t,o,s){var a=i._instance;a._imgCustom=t,a._imgOffset={x:o,y:s}},r}();e.DataTransfer=n;var i=function(){function r(){if(this._lastClick=0,r._instance)throw"DragDropTouch instance already created.";var t=!1;if(document.addEventListener("test",function(){},{get passive(){return t=!0,!0}}),"ontouchstart"in document){var o=document,s=this._touchstart.bind(this),a=this._touchmove.bind(this),l=this._touchend.bind(this),u=t?{passive:!1,capture:!1}:!1;o.addEventListener("touchstart",s,u),o.addEventListener("touchmove",a,u),o.addEventListener("touchend",l),o.addEventListener("touchcancel",l)}}return r.getInstance=function(){return r._instance},r.prototype._touchstart=function(t){var o=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<r._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target)){t.cancelable&&t.preventDefault(),this._reset();return}this._reset();var s=this._closestDraggable(t.target);s&&!this._dispatchEvent(t,"mousemove",t.target)&&!this._dispatchEvent(t,"mousedown",t.target)&&(this._dragSource=s,this._ptDown=this._getPoint(t),this._lastTouch=t,t.cancelable&&t.preventDefault(),setTimeout(function(){o._dragSource==s&&o._img==null&&o._dispatchEvent(t,"contextmenu",s)&&o._reset()},r._CTXMENU),r._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){o._isDragEnabled=!0,o._touchmove(t)},r._PRESSHOLDAWAIT)))}},r.prototype._touchmove=function(t){if(this._shouldCancelPressHoldMove(t)){this._reset();return}if(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t)){var o=this._getTarget(t);if(this._dispatchEvent(t,"mousemove",o)){this._lastTouch=t,t.cancelable&&t.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",o)),this._img&&(this._lastTouch=t,t.cancelable&&t.preventDefault(),o!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",o),this._lastTarget=o),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",o))}},r.prototype._touchend=function(t){if(this._shouldHandle(t)){if(this._dispatchEvent(this._lastTouch,"mouseup",t.target)){t.cancelable&&t.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},r.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},r.prototype._shouldHandleMove=function(t){return!r._ISPRESSHOLDMODE&&this._shouldHandle(t)},r.prototype._shouldHandlePressHoldMove=function(t){return r._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},r.prototype._shouldCancelPressHoldMove=function(t){return r._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>r._PRESSHOLDMARGIN},r.prototype._shouldStartDragging=function(t){var o=this._getDelta(t);return o>r._THRESHOLD||r._ISPRESSHOLDMODE&&o>=r._PRESSHOLDTHRESHOLD},r.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new n,clearInterval(this._pressHoldInterval)},r.prototype._getPoint=function(t,o){return t&&t.touches&&(t=t.touches[0]),{x:o?t.pageX:t.clientX,y:o?t.pageY:t.clientY}},r.prototype._getDelta=function(t){if(r._ISPRESSHOLDMODE&&!this._ptDown)return 0;var o=this._getPoint(t);return Math.abs(o.x-this._ptDown.x)+Math.abs(o.y-this._ptDown.y)},r.prototype._getTarget=function(t){for(var o=this._getPoint(t),s=document.elementFromPoint(o.x,o.y);s&&getComputedStyle(s).pointerEvents=="none";)s=s.parentElement;return s},r.prototype._createImage=function(t){this._img&&this._destroyImage();var o=this._imgCustom||this._dragSource;if(this._img=o.cloneNode(!0),this._copyStyle(o,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var s=o.getBoundingClientRect(),a=this._getPoint(t);this._imgOffset={x:a.x-s.left,y:a.y-s.top},this._img.style.opacity=r._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},r.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},r.prototype._moveImage=function(t){var o=this;requestAnimationFrame(function(){if(o._img){var s=o._getPoint(t,!0),a=o._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(s.x-o._imgOffset.x)+"px",a.top=Math.round(s.y-o._imgOffset.y)+"px"}})},r.prototype._copyProps=function(t,o,s){for(var a=0;a<s.length;a++){var l=s[a];t[l]=o[l]}},r.prototype._copyStyle=function(t,o){if(r._rmvAtts.forEach(function(v){o.removeAttribute(v)}),t instanceof HTMLCanvasElement){var s=t,a=o;a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0)}for(var l=getComputedStyle(t),u=0;u<l.length;u++){var p=l[u];p.indexOf("transition")<0&&(o.style[p]=l[p])}o.style.pointerEvents="none";for(var u=0;u<t.children.length;u++)this._copyStyle(t.children[u],o.children[u])},r.prototype._dispatchEvent=function(t,o,s){if(t&&s){var a=document.createEvent("Event"),l=t.touches?t.touches[0]:t;return a.initEvent(o,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,t,r._kbdProps),this._copyProps(a,l,r._ptProps),a.dataTransfer=this._dataTransfer,s.dispatchEvent(a),a.defaultPrevented}return!1},r.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},r}();i._instance=new i,i._THRESHOLD=5,i._OPACITY=.5,i._DBLCLICK=500,i._CTXMENU=900,i._ISPRESSHOLDMODE=!1,i._PRESSHOLDAWAIT=400,i._PRESSHOLDMARGIN=25,i._PRESSHOLDTHRESHOLD=0,i._rmvAtts="id,class,style,draggable".split(","),i._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),i._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=i})(ne||(ne={}));function Oe(e){return(n={},i)=>{const r={};for(const t in e){const o=e[t];r[t]=o(n[t],i)}return r}}function ke(e,n){let i=e;function r(){return i}function t(o){i=n(r(),o)}return{getState:r,dispatch:t}}var h=(e=>(e.rankingsDataSet="rankingsDataSet",e.searchFilterChanged="searchFilterChanged",e.eventFilterChanged="eventFilterChanged",e.eventTypeFilterChanged="eventTypeFilterChanged",e.ageFilterChanged="ageFilterChanged",e.continentFilterChanged="continentFilterChanged",e.countryFilterChanged="countryFilterChanged",e.topNChanged="topNChanged",e.rankingTypeChanged="rankingTypeChanged",e.timeFrameChanged="timeFrameChanged",e.rankingsFiltered="rankingsFiltered",e.resultsSorted="resultsSorted",e.sortColumnsChanged="sortColumnsChanged",e.uiStateSet="uiStateSet",e))(h||{});function Ie(e){return{type:h.searchFilterChanged,payload:e}}function we(e){return{type:h.eventFilterChanged,payload:e}}function xe(e){return{type:h.eventTypeFilterChanged,payload:e}}function Pe(e){return{type:h.ageFilterChanged,payload:e}}function Fe(e){return{type:h.continentFilterChanged,payload:e}}function Ae(e){return{type:h.countryFilterChanged,payload:e}}function Le(e){return{type:h.topNChanged,payload:e}}function Me(e){return{type:h.rankingTypeChanged,payload:e}}function He(e){return{type:h.timeFrameChanged,payload:e}}function Ne(e=q.filters,n){const{type:i,payload:r}=n;switch(i){case h.searchFilterChanged:return{...e,search:r};case h.eventFilterChanged:return{...e,event:r};case h.eventTypeFilterChanged:return{...e,eventType:r};case h.ageFilterChanged:return{...e,age:r};case h.continentFilterChanged:return{...e,continent:r};case h.countryFilterChanged:return{...e,country:r};case h.topNChanged:return{...e,topN:r};case h.rankingTypeChanged:return{...e,rankingType:r};case h.timeFrameChanged:return{...e,timeFrame:r}}return e}function je(e){return{type:h.rankingsDataSet,payload:e}}function $e(e=q.rankings,n){const{type:i,payload:r}=n;switch(i){case h.rankingsDataSet:{const t=qe(r),o=Ue(r),s=Be(r),a=Ye(r),l=Ke(r,o,s,a);return{lastUpdated:r.refreshed,data:r,competitionIDToIndex:t,personIDToIndex:o,continentIDToIndex:s,countryIDToIndex:a,activeRegions:l}}}return e}function qe(e){const n={};for(const[i,r]of e.competitions.entries())n[r.id]=i;return n}function Ue(e){const n={};for(const[i,r]of e.persons.entries())n[r.id]=i;return n}function Be(e){const n={};for(const[i,r]of e.continents.entries())n[r.id]=i;return n}function Ye(e){const n={};for(const[i,r]of e.countries.entries())n[r.id]=i;return n}function Ke(e,n,i,r){const t={continents:new Set,countries:new Set};for(const o of e.events)for(const s of o.rankings)for(const a of s.ranks){const l=e.persons[n[a.id]];if(!l)throw new Error(`Missing competitor ID ${a.id}`);const u=e.countries[r[l.country]];if(!u)throw new Error(`Missing country ID ${l.country}`);const p=e.continents[i[u.continent]];if(!p)throw new Error(`Missing continent ID ${u.continent}`);t.continents.add(p.id),t.countries.add(u.id)}return t}function Xe(e,n){return{type:h.rankingsFiltered,payload:{rankings:e,filters:n}}}function Ve(e,n){return{type:h.resultsSorted,payload:{sortColumns:e,rankingType:n}}}function Ge(e=[],n){const{type:i,payload:r}=n;switch(i){case h.rankingsFiltered:return We(r.rankings,r.filters);case h.resultsSorted:return rt(e,r.sortColumns,r.rankingType)}return e}function We(e,n){var v,d,f,g,m,P,Q;const i=e.data,{competitionIDToIndex:r,personIDToIndex:t,continentIDToIndex:o,countryIDToIndex:s}=e,{topN:a,timeFrame:l}=n,u=24*60*60*1e3,p=[];for(const ee of i.events)for(const S of ee.rankings){const E={world:0,continents:{},countries:{}};for(const[Y,T]of S.ranks.entries()){const w=i.competitions[r[T.competition]];if(!w)throw new Error(`Missing competition ID ${T.competition}`);const F=i.persons[t[T.id]];if(!F)throw new Error(`Missing competitor ID ${T.id}`);const y=i.countries[s[F.country]];if(!y)throw new Error(`Missing country ID ${F.country}`);const R=i.continents[o[y.continent]];if(!R)throw new Error(`Missing continent ID ${y.continent}`);const Re=Math.floor((new Date().getTime()-new Date(w.startDate).getTime())/u);E.world++,(v=E.continents)[d=R.id]??(v[d]=0),E.continents[R.id]++,(f=E.countries)[g=y.id]??(f[g]=0),E.countries[y.id]++;const O=((m=S.missing)==null?void 0:m.world)??0;let A,k=1,I;n.rankingType==="cr"?((P=S.missing.continents)!=null&&P[R.id]?(A=S.missing.continents[R.id],O>0&&(k=A/O)):O>0&&(k=0),I=E.continents[R.id]+k*(T.rank-Y-1)):n.rankingType==="nr"?((Q=S.missing.countries)!=null&&Q[y.id]?(A=S.missing.countries[y.id],O>0&&(k=A/O)):O>0&&(k=0),I=E.countries[y.id]+k*(T.rank-Y-1)):(A=O,I=E.world+k*(T.rank-Y-1)),I=Number(I.toFixed(0));const te={event:ee,eventType:S.type,age:S.age,date:w.startDate,rank:I,name:F.name,wcaID:F.id,continent:R,country:y,result:T.best,compName:w.name,compWebID:w.webId,compCountry:w.country};Re<=l&&I<=a&&Ze(te,n)&&p.push(te)}}return p}function Ze(e,n){return nt(e,n.search)&&ze(e,n.event)&&Je(e,n.eventType)&&Qe(e,n.age)&&et(e,n.continent)&&tt(e,n.country)}function ze(e,n){return n?e.event.id===n:!0}function Je(e,n){return n?e.eventType===n:!0}function Qe(e,n){return n?e.age>=n:!0}function et(e,n){return n?e.continent.id===n:!0}function tt(e,n){return n?e.country.id===n:!0}function nt(e,n){return n?[e.date,e.event.id,e.continent.id,e.age,e.event.id,e.country.id,e.age,e.event.id,e.age,e.event.id,e.eventType,e.continent.id,e.age,e.event.id,e.eventType,e.country.id,e.age,e.event.id,e.eventType,e.age,e.name,e.compName].map(t=>String(t)).join(" ").toLowerCase().includes(n.toLowerCase()):!0}function rt(e,n,i){const r=[...e];return[...n].reverse().map(o),r;function o(s){const{name:a,direction:l}=s;function u(d,f){switch(i){case"wr":return l*(d.age-f.age);case"cr":{const g=`${d.continent.id} ${d.age}`,m=`${f.continent.id} ${f.age}`;return l*g.localeCompare(m)}case"nr":{const g=`${d.country.id} ${d.age}`,m=`${f.country.id} ${f.age}`;return l*g.localeCompare(m)}}}function p(d,f){const g=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],m=g.indexOf(d.event.id),P=g.indexOf(f.event.id);return m===P&&d.eventType!==f.eventType?l*(d.eventType==="single"?-1:1):l*(m-P)}function v(d,f){if(d.event.format!==f.event.format)return d.event.format==="time"||f.event.format==="time"?l*(d.event.format==="time"?-1:1):l*(d.event.format==="number"?-1:1);switch(d.event.format){case"time":{const[g,m]=[d.result,f.result].map(ve);return l*(g-m)}case"number":return l*(Number(d.result)-Number(f.result));case"multi":{const[g,m]=[d.result,f.result].map(ot);return g.score!==m.score?-l*(g.score-m.score):g.seconds!==m.seconds?l*(g.seconds-m.seconds):l*(g.unsolved-m.unsolved)}}}switch(a){case"date":case"name":r.sort((d,f)=>l*d[a].localeCompare(f[a]));break;case"rank":r.sort((d,f)=>l*(d[a]-f[a]));break;case"event":r.sort(p);break;case"group":r.sort(u);break;case"result":r.sort(v);break}return r}}function ot(e){const[n,i]=e.split(" in "),[r,t]=n.split("/").map(Number),o=t-r,s=r-o,a=ve(i);return{score:s,seconds:a,unsolved:o}}function ve(e){const n=e.split(":").reverse();let i=0,r=1;for(const t of n)i+=Number(t)*r,r*=60;return i}function z(e){return{type:h.sortColumnsChanged,payload:e}}function it(e=[],n){const{type:i,payload:r}=n;switch(i){case h.sortColumnsChanged:return st(e,r)}return e}function st(e,n){const i=[...e],r=e.findIndex(t=>t.name===n.name);return r<0?(i[n.position]={name:n.name,label:n.label,direction:n.defaultDirection||1},i):r===n.position?(i[n.position].direction*=-1,i):(i.splice(r,1),i.splice(n.position,0,e[r]),i)}function at(e){return{type:h.uiStateSet,payload:e}}function ct(e=q.uiState,n){const{type:i,payload:r}=n;switch(i){case h.uiStateSet:return r}return e}const q={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{},activeRegions:{continents:new Set,countries:new Set}},results:[],filters:{search:"",event:"",eventType:"",age:"",continent:"",country:"",topN:10,rankingType:"wr",timeFrame:30},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}],uiState:{scrollX:0,scrollY:0,activeID:null}},lt=Oe({rankings:$e,results:Ge,filters:Ne,sortColumns:it,uiState:ct});function ut(e){const n=document.querySelector(e);function i(r){if(!n)throw new Error(`render(): "${e}" was not found`);Array.isArray(r)?n.replaceChildren(...r):n.replaceChildren(r)}return{render:i}}var L={},_={},M={},H={},K={},re;function dt(){return re||(re=1,Object.defineProperty(K,"__esModule",{value:!0})),K}var X={},oe;function ft(){return oe||(oe=1,Object.defineProperty(X,"__esModule",{value:!0})),X}var V={},ie;function ht(){return ie||(ie=1,Object.defineProperty(V,"__esModule",{value:!0})),V}var G={},se;function pt(){return se||(se=1,Object.defineProperty(G,"__esModule",{value:!0})),G}var W={},ae;function gt(){return ae||(ae=1,Object.defineProperty(W,"__esModule",{value:!0})),W}var N={},ce;function mt(){if(ce)return N;ce=1,Object.defineProperty(N,"__esModule",{value:!0}),N.classnames=void 0;const e=s=>Object.entries(s).map(([a,l])=>l&&a),n=s=>!!s,i=(s,a,l)=>l.indexOf(s)===a,r=[];function t(s){return s?typeof s=="string"?[s]:Array.isArray(s)?s.flatMap(t).filter(n):e(s).filter(n):r}function o(s){const a=t(s).filter(i);return a.length>0?a.join(" "):void 0}return N.classnames=o,N}var le;function vt(){return le||(le=1,function(e){var n=H.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(t,o);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,a)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),i=H.__exportStar||function(r,t){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&n(t,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),i(dt(),e),i(ft(),e),i(ht(),e),i(pt(),e),i(gt(),e),i(mt(),e)}(H)),H}var ue;function ye(){if(ue)return M;ue=1,Object.defineProperty(M,"__esModule",{value:!0}),M.setAttributes=void 0;const e=vt();function n(t,o){for(const s of Object.keys(t))s in o&&(o[s]=t[s])}const i=new RegExp("^on\\p{Lu}","u");function r(t,o){for(const s of Object.keys(o)){if(s==="__source"||s==="__self"||s==="tsxTag")continue;const a=o[s];if(s==="class"){const l=(0,e.classnames)(a);l&&t.setAttribute(s,l)}else if(s==="ref")a.current=t;else if(i.test(s)){const l=s.replace(/Capture$/,""),u=s!==l,p=l.toLowerCase().substring(2);t.addEventListener(p,a,u)}else s==="style"&&typeof a!="string"?n(a,t.style):s==="dangerouslySetInnerHTML"?t.innerHTML=a:a===!0?t.setAttribute(s,s):(a||a===0)&&t.setAttribute(s,a.toString())}}return M.setAttributes=r,M}var b={},de;function _e(){if(de)return b;de=1,Object.defineProperty(b,"__esModule",{value:!0}),b.applyTsxTag=b.createDomElement=b.applyChildren=void 0;function e(t,o){o instanceof Element?t.appendChild(o):typeof o=="string"||typeof o=="number"?t.appendChild(document.createTextNode(o.toString())):console.warn("Unknown type to append: ",o)}function n(t,o){for(const s of o)!s&&s!==0||(Array.isArray(s)?n(t,s):e(t,s))}b.applyChildren=n;function i(t,o){const s=o!=null&&o.is?{is:o.is}:void 0;return o!=null&&o.xmlns?document.createElementNS(o.xmlns,t,s):document.createElement(t,s)}b.createDomElement=i;function r(t,o){let s=t,a=o;return a&&"tsxTag"in a&&(s=a.tsxTag,!a.is&&t.includes("-")&&(a={...a,is:t})),{finalTag:s,finalAttrs:a}}return b.applyTsxTag=r,b}var fe;function yt(){if(fe)return _;fe=1,Object.defineProperty(_,"__esModule",{value:!0}),_.createRef=_.h=_.createElement=void 0;const e=ye(),n=_e();function i(t,o,...s){if(typeof t=="function")return t({...o,children:s});const{finalTag:a,finalAttrs:l}=(0,n.applyTsxTag)(t,o),u=(0,n.createDomElement)(a,l);return l&&(0,e.setAttributes)(u,l),(0,n.applyChildren)(u,s),u}_.createElement=i,_.h=i;const r=()=>({current:null});return _.createRef=r,_}var j={},C={},he;function be(){if(he)return C;he=1,Object.defineProperty(C,"__esModule",{value:!0}),C.jsxDEV=C.jsxs=C.jsx=void 0;const e=ye(),n=_e();function i(r,t){if(typeof r=="function")return r(t);const{children:o,...s}=t,{finalTag:a,finalAttrs:l}=(0,n.applyTsxTag)(r,s),u=(0,n.createDomElement)(a,l);return(0,e.setAttributes)(u,l),(0,n.applyChildren)(u,[o]),u}return C.jsx=i,C.jsxs=i,C.jsxDEV=i,C}var pe;function _t(){if(pe)return j;pe=1,Object.defineProperty(j,"__esModule",{value:!0}),j.defineCustomElement=void 0;const e=be();function n(i,r,t){return customElements.define(i,r,t),o=>(0,e.jsx)(i,o)}return j.defineCustomElement=n,j}var Z={},ge;function bt(){return ge||(ge=1,Object.defineProperty(Z,"__esModule",{value:!0})),Z}var me;function Ct(){return me||(me=1,function(e){var n=L.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(t,o);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,a)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),i=L.__exportStar||function(r,t){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(t,o)&&n(t,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),i(yt(),e),i(_t(),e),i(be(),e),i(bt(),e)}(L)),L}var c=Ct();function St(e){const{store:n}=e,{lastUpdated:i}=n.getState().rankings;return c.h("div",{id:"info"},c.h("p",{class:"refreshed"},"Last refreshed: ",i," (UTC)"),c.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}function Et(e,n=300){let i=null;return(...r)=>{i!==null&&window.clearTimeout(i),i=window.setTimeout(()=>e(...r),n)}}function Tt(){const e=["40, 50, 60, etc.","competitor name","competition name"];return"e.g. "+e[Math.floor(Math.random()*e.length)]}function Dt(e){const{store:n,handleRender:i}=e,{search:r}=n.getState().filters;function t(o){const s=o.target;n.dispatch(Ie(s.value)),i()}return c.h("div",{id:"search"},c.h("label",{class:"strong"},"Search:"),c.h("input",{value:r,onInput:Et(t,350),id:"search-input",type:"search",size:18,placeholder:Tt()}))}function D(e,n){return e.map(i=>c.h("option",{value:i.value,selected:i.value==n},i.label))}function Rt(e){const{store:n,handleRender:i}=e,{event:r}=n.getState().filters,t=[];for(const s of n.getState().rankings.data.events)t.push({label:s.name,value:s.id});function o(){const s=this.value!=="xx"?this.value:"";n.dispatch(we(s)),i()}return c.h("div",null,c.h("label",{class:"strong"},"Event:"),c.h("select",{id:"event-filter",onChange:o},c.h("option",{value:"xx"},"All Events"),D(t,r)))}function Ot(e){const{store:n,handleRender:i}=e,{rankings:r,filters:t}=n.getState(),{continent:o,country:s}=t,{countryIDToIndex:a}=r,{continents:l,countries:u}=r.data,p=r.activeRegions.continents,v=[];function d(){const g=this.value!=="xx"?this.value:"";n.dispatch(Fe(g)),i()}let f;if(s){const g=u[a[s]];f=l.filter(m=>g.continent===m.id)}else f=l.filter(g=>p.has(g.id));for(const g of f)v.push({label:g.name,value:g.id});return c.h("div",null,c.h("label",{class:"strong"},"Continent:"),c.h("select",{id:"continent-filter",onChange:d},c.h("option",{value:"xx"},"All Continents"),D(v,o)))}function kt(e){const{store:n,handleRender:i}=e,r=n.getState().rankings.data.countries,t=n.getState().rankings.activeRegions.countries,o=n.getState().filters.country,s=n.getState().filters.continent;function a(){const p=this.value!=="xx"?this.value:"";n.dispatch(Ae(p)),i()}const l=r.filter(p=>t.has(p.id)).filter(p=>s===""||p.continent===s),u=[];for(const p of l)u.push({label:p.name,value:p.id});return c.h("div",null,c.h("label",{class:"strong"},"Country:"),c.h("select",{id:"country-filter",onChange:a},c.h("option",{value:"xx"},"All Countries"),D(u,o)))}const It=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"}],wt=[{value:"wr",label:"World (WR)"},{value:"cr",label:"Continent (CR)"},{value:"nr",label:"National (NR)"}],xt=[{value:"7",label:"7 days"},{value:"14",label:"14 days"},{value:"30",label:"30 days"},{value:"60",label:"60 days"},{value:"90",label:"90 days"}];function Pt(e){const{store:n,handleRender:i}=e,{timeFrame:r,topN:t,rankingType:o}=n.getState().filters;function s(){n.dispatch(He(Number(this.value))),i()}function a(){n.dispatch(Le(Number(this.value))),i()}function l(){n.dispatch(Me(this.value)),i()}return c.h("div",{id:"parameters"},c.h("div",null,c.h("label",{class:"strong"},"Show Top:"),c.h("select",{id:"top-n",onChange:a},D(It,t))),c.h("div",null,c.h("label",{class:"strong"},"Ranking Type:"),c.h("select",{id:"ranking-type-filter",onChange:l},D(wt,o))),c.h("div",null,c.h("label",{class:"strong"},"Time frame:"),c.h("select",{id:"time-frame",onChange:s},D(xt,r))))}let B,J,$;function Ft(e){return B=e.store,J=e.handleRender,c.h("div",{id:"sort-columns"},c.h("div",{class:"strong"},"Sort:"),B.getState().sortColumns.map(At))}function At(e,n){const i=["primary","secondary","tertiary"],r=e.direction==1?"ascending":"descending";return c.h("button",{onClick:Lt,onDragStart:Ce,onDragEnter:Ht,onDragOver:Mt,onDragLeave:Nt,onDrop:jt,onDragEnd:Se,class:`sort-column ${r} ${i[n]} strong`,draggable:"true","data-sort-on":e.name,"data-position":n},e.label,c.h("span",{"aria-hidden":"true"}))}function Lt(e){const n=e.currentTarget,i=String(n.dataset.sortOn),r=String(n.textContent).trim(),t=Number(n.dataset.position);B.dispatch(z({name:i,label:r,position:t,defaultDirection:null})),J()}function Ce(e){const n=e.currentTarget,i=e.dataTransfer;$=n,n.style.opacity="0.4",i.effectAllowed="move"}function Mt(e){const n=e.dataTransfer;e.preventDefault(),n.dropEffect="move"}function Ht(e){e.currentTarget.classList.add("over")}function Nt(e){e.currentTarget.classList.remove("over")}function jt(e){const n=e.currentTarget;if(e.stopPropagation(),n.classList.remove("over"),$.dataset.sortOn!==n.dataset.sortOn){const i=$.querySelector("span.text"),r=String($.dataset.sortOn),t=String(i==null?void 0:i.textContent).trim(),o=Number(n.dataset.position),s=Number($.dataset.defaultDirection)||null;B.dispatch(z({name:r,label:t,position:o,defaultDirection:s})),J()}}function Se(e){e.currentTarget.removeAttribute("style")}function $t(e){const{store:n,handleRender:i}=e,{eventType:r}=n.getState().filters;function t(){const s=this.value!=="xx"?this.value:"";n.dispatch(xe(s)),i()}const o=[{label:"Single",value:"single"},{label:"Average",value:"average"}];return c.h("div",null,c.h("label",{class:"strong"},"Result:"),c.h("select",{id:"event-type-filter",onChange:t},c.h("option",{value:"xx"},"Any"),D(o,r)))}function qt(e){const{store:n,handleRender:i}=e,{age:r}=n.getState().filters;function t(){const s=this.value!=="xx"?Number(this.value):"";n.dispatch(Pe(Number(s))),i()}const o=[{label:"Over 40",value:"40"},{label:"Over 50",value:"50"},{label:"Over 60",value:"60"},{label:"Over 70",value:"70"},{label:"Over 80",value:"80"},{label:"Over 90",value:"90"}];return c.h("div",null,c.h("label",{class:"strong"},"Age:"),c.h("select",{id:"age-filter",onChange:t},D(o,r)))}function Ut(e){return c.h("div",{id:"panel"},c.h("div",{class:"panel-grid"},c.h(Pt,e),c.h(Bt,e),c.h(Ft,e)))}function Bt(e){return c.h("div",{id:"dropdown-filters"},c.h(Rt,e),c.h($t,e),c.h(qt,e),c.h(Ot,e),c.h(kt,e),c.h(Dt,e))}const Yt=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function Kt(e){const{results:n}=e.store.getState();return!n||n.length===0?Jt():Xt(e)}function Xt(e){const{results:n}=e.store.getState(),i=[];for(const r of n)i.push(c.h(zt,{rowData:r,appProps:e}));return c.h("table",{id:"ranking-table",class:"rankings sortable"},c.h("thead",null,c.h(Vt,{headers:Yt,appProps:e})),c.h("tbody",null,i))}function Vt(e){const{headers:n,appProps:i}=e,r=[];for(const t of n)r.push(c.h(Gt,{columnHeader:t,appProps:i}));return c.h("tr",null,r)}function Gt(e){const{columnHeader:n,appProps:i}=e;return n.defaultSortDirection===null?c.h(Zt,{columnHeader:n}):c.h(Wt,{columnHeader:n,appProps:i})}function Wt(e){const{columnHeader:n,appProps:i}=e,{sortColumns:r}=i.store.getState();function t(a){const l=(a.ctrlKey?1:0)+(a.shiftKey?1:0);i.store.dispatch(z({name:n.name,label:n.label,position:l,defaultDirection:n.defaultSortDirection})),i.handleRender()}const o=[n.name];let s=null;for(const[a,l]of r.entries())if(l.name===n.name){const u=l.direction==1?"ascending":"descending",p=["primary","secondary","tertiary"];o.push(u),o.push(p[a]),a===0&&(s=u)}return c.h("th",{draggable:"true",class:o.join(" "),"data-sort-on":n.name,"data-default-direction":n.defaultSortDirection,"aria-sort":s,onClick:t,onDragStart:Ce,onDragEnd:Se},c.h("button",{class:"strong",type:"button"},c.h("div",{class:"column"},c.h("span",{class:"text"},n.label)),c.h("div",{class:"column"},c.h("span",{class:"sort up","aria-hidden":"true"},"▲"),c.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function Zt(e){return c.h("th",{class:`${e.columnHeader.name} no-sort strong`},c.h("span",null,e.columnHeader.label))}function zt(e){const n="https://www.worldcubeassociation.org/persons",i="https://www.worldcubeassociation.org/competitions",r="https://wca-seniors.org/Senior_Rankings.html",{rowData:t,appProps:o}=e,s=o.store.getState().filters.rankingType,a=t.date.indexOf("-"),l=t.date.slice(0,a+1),u=t.date.slice(a+1),p=`${n}/${t.wcaID}?event=${t.event.id}`,v=`${i}/${t.compWebID}/results/by_person#${t.wcaID}`,d=`${r}#${t.event.id}-${t.eventType}-${t.age}`;let f;switch(s){case"wr":{f=c.h("a",{href:d,target:"_blank"},t.age,"+");break}case"cr":{f=c.h("a",{href:d+`-${t.continent.id}`,target:"_blank"},t.continent.id," ",t.age,"+");break}case"nr":{f=c.h("a",{href:d+`-xx-${t.country.id}`,target:"_blank"},t.country.id," ",t.age,"+");break}}return c.h("tr",null,c.h("td",{class:"date"},l,c.h("wbr",null),u),c.h("td",{class:"event"},c.h("i",{class:`event-${t.event.id} cubing-icon icon`}),t.event.id," ",t.eventType),c.h("td",{class:"group"},f),c.h("td",{class:"rank"},t.rank),c.h("td",{class:"name"},c.h("a",{href:p,target:"_blank"},c.h("span",{class:`flag-${t.country.id} flag`})," ",t.name)),c.h("td",{class:"result"},t.result),c.h("td",{class:"competition"},c.h("a",{href:v,target:"_blank"},c.h("span",{class:`flag-${t.compCountry} flag`})," ",t.compName)))}function Jt(){return c.h("h3",{class:"no-results"},"No results")}function Qt(e){const n=e.store.getState().results;return c.h("div",null,c.h(St,e),c.h(Ut,e),c.h("div",{class:"strong"},"Showing ",n.length," ",n.length===1?"result":"results"),c.h(Kt,e))}function en(){return c.h("h3",{class:"message"},"Loading... please wait")}function Ee(e){return c.h("div",{class:"error"},c.h("h3",null,"Something went wrong ™"),c.h("div",{class:"message"},e))}const Te=window.rankings,U=ut("#app");if(!Te)throw U.render(Ee("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const x=ke(q,lt);x.dispatch(je(Te));De();function De(){try{const e=x.getState();x.dispatch(at(tn())),U.render(en()),x.dispatch(Xe(e.rankings,e.filters)),x.dispatch(Ve(e.sortColumns,e.filters.rankingType)),U.render(Qt({store:x,handleRender:De})),nn(e.uiState)}catch(e){throw e instanceof Error&&U.render(Ee(e.message)),e}}function tn(){var i;const e=q.uiState;e.scrollX=window.scrollX,e.scrollY=window.scrollY,e.activeID=((i=document.activeElement)==null?void 0:i.id)||null;const n=document.getElementById("search-input");return e.selectionStart=n==null?void 0:n.selectionStart,e.selectionEnd=n==null?void 0:n.selectionEnd,e.selectionDirection=n==null?void 0:n.selectionDirection,e}function nn(e){var i;e.activeID&&((i=document.getElementById(e.activeID))==null||i.focus());const n=document.getElementById("search-input");n.selectionStart=(e==null?void 0:e.selectionStart)||null,n.selectionEnd=(e==null?void 0:e.selectionEnd)||null,n.selectionDirection=(e==null?void 0:e.selectionDirection)||"none",window.scroll(e.scrollX,e.scrollY)}
