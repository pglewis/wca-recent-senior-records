(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();function Q(e){return(s={},i)=>{const o={};for(const t in e){const n=e[t];o[t]=n(s[t],i)}return o}}function Se(e,s){let i=e;function o(){return i}function t(n){i=s(o(),n)}return{getState:o,dispatch:t}}var l=(e=>(e.rankingsDataSet="rankingsDataSet",e.topRanksSet="topRanksSet",e.updateKinchRanks="updateKinchRanks",e.allFiltersSet="allFiltersSet",e.ageFilterChanged="ageFilterChanged",e.wcaidFilterChanged="wcaidFilterChanged",e.regionFilterChanged="regionFilterChanged",e.pageFilterChanged="pageFilterChanged",e.rowsPerPageFilterChanged="rowsPerPageFilterChanged",e.controlStateChanged="controlStateChanged",e.searchTermChanged="searchTermChanged",e.eventScoreSortChanged="eventScoreSortChanged",e))(l||{});function Z(e){const[s,i]=e.split(" in "),[o,t]=s.split("/").map(Number),n=t-o,r=o-n,a=I(i);return{score:r,seconds:a,unsolved:n}}function I(e){const s=e.split(":").reverse();let i=0,o=1;for(const t of s)i+=Number(t)*o,o*=60;return i}const J={333:!0,222:!0,444:!0,555:!0,666:!0,777:!0,"333bf":!1,"333fm":!1,"333oh":!0,clock:!0,minx:!0,pyram:!0,skewb:!0,sq1:!0,"444bf":!1,"555bf":!1,"333mbf":!1};function Re(e){return{type:l.topRanksSet,payload:e}}function _e(e,s,i){return{type:l.updateKinchRanks,payload:{rankings:e,topRanks:s,filters:i}}}function ee(e,s){const{type:i,payload:o}=s;switch(i){case l.topRanksSet:return{...e,topRanks:te(o)};case l.updateKinchRanks:{const{rankings:t,topRanks:n,filters:r}=o;let a=t.data.persons.map(u=>ne(t,n,r,u.id));return a=a.filter(u=>u.overall>0),a.sort((u,c)=>c.overall-u.overall),{...e,kinchRanks:a}}}return e}function te(e){const s=e.data,i=[];for(const o of s.events)for(const t of o.rankings){const{age:n,ranks:r}=t;if(r.length===0||J[o.id]&&t.type!=="average")continue;i.push({eventID:o.id,type:t.type,age:n,region:"world",result:r[0].best});const a=new Set;for(const u of r){const c=s.persons[e.personIDToIndex[u.id]],d=s.countries[e.countryIDToIndex[c.country]],p=s.continents[e.continentIDToIndex[d.continent]];a.has(p.id)||(a.add(p.id),i.push({eventID:o.id,type:t.type,age:n,region:p.id,result:u.best})),a.has(d.id)||(a.add(d.id),i.push({eventID:o.id,type:t.type,age:n,region:d.id,result:u.best}))}}return i}function ne(e,s,i,o){const t=e.data,n=t.persons.find(c=>c.id===o);if(!n)throw new Error(`We were looking for someone's rankings but WCA ID "${o}" was not found.`);const r={personID:o,personName:n.name,overall:0,events:[]},a=t.countries[e.countryIDToIndex[n.country]],u=t.continents[e.continentIDToIndex[a.continent]];if(i.region!=="world"&&i.region!==a.id&&i.region!==u.id)return r;for(const c of t.events)n.events.includes(c.id)?c.id==="333mbf"?r.events.push(oe(s,n.id,c,i)):J[c.id]?r.events.push(re(s,n.id,c,i)):r.events.push(ie(s,n.id,c,i)):r.events.push({eventID:c.id,eventName:c.name,score:0,result:"",type:null});return r.overall=r.events.reduce((c,d)=>c+d.score,0)/r.events.length,r}function R(e,s,i,o){return e.find(n=>n.eventID===s&&n.type===i&&n.age===o.age&&n.region===o.region)}function _(e,s,i,o){const t=e.rankings.find(r=>r.type===s&&r.age===o.age);if(!t)return;const n=t.ranks.find(r=>r.id===i);if(n)return n.best}function re(e,s,i,o){const t=R(e,i.id,"average",o),n=_(i,"average",s,o);return!n||!t?{eventID:i.id,eventName:i.name,score:0,result:"",type:null}:{eventID:i.id,eventName:i.name,score:j(i.format,t,n),result:n,type:"average"}}function ie(e,s,i,o){const t=R(e,i.id,"single",o),n=R(e,i.id,"average",o),r=_(i,"single",s,o),a=_(i,"average",s,o);if(!r||!t)return{eventID:i.id,eventName:i.name,score:0,result:"",type:null};let u,c=0,d;const p=j(i.format,t,r);if(a&&n){const q=j(i.format,n,a);p>q?(c=p,u=r,d="single"):(c=q,u=a,d="average")}else c=p,u=r,d="single";return{eventID:i.id,eventName:i.name,score:c,result:u,type:d}}function j(e,s,i){return e==="time"?I(s.result)/I(i)*100:Number(s.result)/Number(i)*100}function oe(e,s,i,o){const t=R(e,i.id,"single",o),n=_(i,"single",s,o);return!n||!t?{eventID:i.id,eventName:i.name,score:0,result:"",type:null}:{eventID:i.id,eventName:i.name,score:F(n)/F(t.result)*100,result:n,type:"single"}}function F(e){const s=Z(e);return s.score+1-s.seconds/(60*60)}function Ce(e){return{type:l.allFiltersSet,payload:e}}function we(e){return{type:l.ageFilterChanged,payload:e}}function Pe(e){return{type:l.wcaidFilterChanged,payload:e}}function De(e){return{type:l.regionFilterChanged,payload:e}}function Oe(e){return{type:l.pageFilterChanged,payload:e}}function se(e=A.filters,s){const{type:i,payload:o}=s;switch(i){case l.allFiltersSet:return{...e,...o};case l.ageFilterChanged:return{...e,age:o};case l.wcaidFilterChanged:return{...e,wcaid:o};case l.regionFilterChanged:return{...e,region:o};case l.pageFilterChanged:return{...e,page:o};case l.rowsPerPageFilterChanged:return{...e,rowsPerPage:o}}return e}function Te(e){return{type:l.controlStateChanged,payload:e}}function Ie(e){return{type:l.searchTermChanged,payload:e}}function je(e){return{type:l.eventScoreSortChanged,payload:e}}function ae(e=A.uiState,s){switch(s.type){case l.controlStateChanged:return{...e,controlState:{...e.controlState,...s.payload}};case l.searchTermChanged:return{...e,userInputState:{...e.userInputState,searchTerm:s.payload}};case l.eventScoreSortChanged:return{...e,userInputState:{...e.userInputState,eventScoreSort:s.payload}}}return e}const A={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{},activeRegions:{continents:[],countries:[]}},data:{kinchRanks:[],topRanks:[]},filters:{wcaid:void 0,age:40,region:"world",page:1,rowsPerPage:25},uiState:{controlState:{scrollX:window.scrollX,scrollY:window.scrollY,activeID:null,selectionStart:null,selectionEnd:null,selectionDirection:null},userInputState:{searchTerm:"",eventScoreSort:"event"}}},Ae=Q({rankings:ue,data:ee,filters:se,uiState:ae});function qe(e){return{type:l.rankingsDataSet,payload:e}}function ue(e=A.rankings,s){const{type:i,payload:o}=s;switch(i){case l.rankingsDataSet:return o}return e}function Fe(e){const s=document.querySelector(e);function i(o){if(!s)throw new Error(`render(): "${e}" was not found`);Array.isArray(o)?s.replaceChildren(...o):s.replaceChildren(o)}return{render:i}}var g={},f={},h={},y={},C={},k;function ce(){return k||(k=1,Object.defineProperty(C,"__esModule",{value:!0})),C}var w={},E;function le(){return E||(E=1,Object.defineProperty(w,"__esModule",{value:!0})),w}var P={},M;function de(){return M||(M=1,Object.defineProperty(P,"__esModule",{value:!0})),P}var D={},x;function fe(){return x||(x=1,Object.defineProperty(D,"__esModule",{value:!0})),D}var O={},N;function pe(){return N||(N=1,Object.defineProperty(O,"__esModule",{value:!0})),O}var b={},L;function ge(){if(L)return b;L=1,Object.defineProperty(b,"__esModule",{value:!0}),b.classnames=n;const e=r=>Object.entries(r).map(([a,u])=>u&&a),s=r=>!!r,i=(r,a,u)=>u.indexOf(r)===a,o=[];function t(r){return r?typeof r=="string"?[r]:Array.isArray(r)?r.flatMap(t).filter(s):e(r).filter(s):o}function n(r){const a=t(r).filter(i);return a.length>0?a.join(" "):void 0}return b}var $;function ye(){return $||($=1,function(e){var s=y&&y.__createBinding||(Object.create?function(o,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(o,r,a)}:function(o,t,n,r){r===void 0&&(r=n),o[r]=t[n]}),i=y&&y.__exportStar||function(o,t){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&s(t,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(ce(),e),i(le(),e),i(de(),e),i(fe(),e),i(pe(),e),i(ge(),e)}(y)),y}var H;function X(){if(H)return h;H=1,Object.defineProperty(h,"__esModule",{value:!0}),h.setAttributes=o;const e=ye();function s(t,n){for(const r of Object.keys(t))r in n&&(n[r]=t[r])}const i=/^on\p{Lu}/u;function o(t,n){for(const r of Object.keys(n)){if(r==="__source"||r==="__self"||r==="tsxTag")continue;const a=n[r];if(r==="class"){const u=(0,e.classnames)(a);u&&t.setAttribute(r,u)}else if(r==="ref")a.current=t;else if(i.test(r)){const u=r.replace(/Capture$/,""),c=r!==u,d=u.toLowerCase().substring(2);t.addEventListener(d,a,c)}else r==="style"&&typeof a!="string"?s(a,t.style):r==="dangerouslySetInnerHTML"?t.innerHTML=a:a===!0?t.setAttribute(r,r):(a||a===0||a==="")&&t.setAttribute(r,a.toString())}}return h}var m={},K;function Y(){if(K)return m;K=1,Object.defineProperty(m,"__esModule",{value:!0}),m.applyChildren=s,m.createDomElement=i,m.applyTsxTag=o;function e(t,n){n instanceof Element?t.appendChild(n):typeof n=="string"||typeof n=="number"?t.appendChild(document.createTextNode(n.toString())):console.warn("Unknown type to append: ",n)}function s(t,n){for(const r of n)!r&&r!==0||(Array.isArray(r)?s(t,r):e(t,r))}function i(t,n){const r=n?.is?{is:n.is}:void 0;return n?.xmlns?document.createElementNS(n.xmlns,t,r):document.createElement(t,r)}function o(t,n){let r=t,a=n;return a&&"tsxTag"in a&&(r=a.tsxTag,!a.is&&t.includes("-")&&(a={...a,is:t})),{finalTag:r,finalAttrs:a}}return m}var U;function me(){if(U)return f;U=1,Object.defineProperty(f,"__esModule",{value:!0}),f.createRef=f.h=void 0,f.createElement=i;const e=X(),s=Y();function i(t,n,...r){if(typeof t=="function")return t({...n,children:r});const{finalTag:a,finalAttrs:u}=(0,s.applyTsxTag)(t,n),c=(0,s.createDomElement)(a,u);return u&&(0,e.setAttributes)(c,u),(0,s.applyChildren)(c,r),c}f.h=i;const o=()=>({current:null});return f.createRef=o,f}var S={},v={},V;function z(){if(V)return v;V=1,Object.defineProperty(v,"__esModule",{value:!0}),v.jsx=i,v.jsxs=i,v.jsxDEV=i;const e=X(),s=Y();function i(o,t){if(typeof o=="function")return o(t);const{children:n,...r}=t,{finalTag:a,finalAttrs:u}=(0,s.applyTsxTag)(o,r),c=(0,s.createDomElement)(a,u);return(0,e.setAttributes)(c,u),(0,s.applyChildren)(c,[n]),c}return v}var B;function ve(){if(B)return S;B=1,Object.defineProperty(S,"__esModule",{value:!0}),S.defineCustomElement=s;const e=z();function s(i,o,t){return customElements.define(i,o,t),n=>(0,e.jsx)(i,n)}return S}var T={},G;function he(){return G||(G=1,Object.defineProperty(T,"__esModule",{value:!0})),T}var W;function be(){return W||(W=1,function(e){var s=g&&g.__createBinding||(Object.create?function(o,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(o,r,a)}:function(o,t,n,r){r===void 0&&(r=n),o[r]=t[n]}),i=g&&g.__exportStar||function(o,t){for(var n in o)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&s(t,o,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(me(),e),i(ve(),e),i(z(),e),i(he(),e)}(g)),g}var ke=be();function Ee(e,s=300){let i=null;return(...o)=>{i!==null&&window.clearTimeout(i),i=window.setTimeout(()=>e(...o),s)}}export{Ee as a,Fe as b,Q as c,ke as d,Se as e,Ae as f,J as g,Pe as h,A as i,De as j,Oe as k,Ie as l,we as m,Te as n,_e as o,Z as p,Ce as q,ue as r,je as s,I as t,qe as u,Re as v};
