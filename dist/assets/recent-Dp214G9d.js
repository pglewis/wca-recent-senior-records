import{p as X,t as B,c as K,d as o,a as W,b as j,e as G}from"./cubing-icons-C_3hSCmF.js";var H;(function(t){var n=function(){function r(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),r.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},r.prototype.getData=function(e){return this._data[e]||""},r.prototype.setData=function(e,s){this._data[e]=s},r.prototype.setDragImage=function(e,s,c){var a=i._instance;a._imgCustom=e,a._imgOffset={x:s,y:c}},r}();t.DataTransfer=n;var i=function(){function r(){if(this._lastClick=0,r._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var s=document,c=this._touchstart.bind(this),a=this._touchmove.bind(this),l=this._touchend.bind(this),h=e?{passive:!1,capture:!1}:!1;s.addEventListener("touchstart",c,h),s.addEventListener("touchmove",a,h),s.addEventListener("touchend",l),s.addEventListener("touchcancel",l)}}return r.getInstance=function(){return r._instance},r.prototype._touchstart=function(e){var s=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<r._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var c=this._closestDraggable(e.target);c&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=c,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){s._dragSource==c&&s._img==null&&s._dispatchEvent(e,"contextmenu",c)&&s._reset()},r._CTXMENU),r._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){s._isDragEnabled=!0,s._touchmove(e)},r._PRESSHOLDAWAIT)))}},r.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var s=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",s)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",s)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),s!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",s),this._lastTarget=s),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",s))}},r.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},r.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},r.prototype._shouldHandleMove=function(e){return!r._ISPRESSHOLDMODE&&this._shouldHandle(e)},r.prototype._shouldHandlePressHoldMove=function(e){return r._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},r.prototype._shouldCancelPressHoldMove=function(e){return r._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>r._PRESSHOLDMARGIN},r.prototype._shouldStartDragging=function(e){var s=this._getDelta(e);return s>r._THRESHOLD||r._ISPRESSHOLDMODE&&s>=r._PRESSHOLDTHRESHOLD},r.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new n,clearInterval(this._pressHoldInterval)},r.prototype._getPoint=function(e,s){return e&&e.touches&&(e=e.touches[0]),{x:s?e.pageX:e.clientX,y:s?e.pageY:e.clientY}},r.prototype._getDelta=function(e){if(r._ISPRESSHOLDMODE&&!this._ptDown)return 0;var s=this._getPoint(e);return Math.abs(s.x-this._ptDown.x)+Math.abs(s.y-this._ptDown.y)},r.prototype._getTarget=function(e){for(var s=this._getPoint(e),c=document.elementFromPoint(s.x,s.y);c&&getComputedStyle(c).pointerEvents=="none";)c=c.parentElement;return c},r.prototype._createImage=function(e){this._img&&this._destroyImage();var s=this._imgCustom||this._dragSource;if(this._img=s.cloneNode(!0),this._copyStyle(s,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var c=s.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-c.left,y:a.y-c.top},this._img.style.opacity=r._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},r.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},r.prototype._moveImage=function(e){var s=this;requestAnimationFrame(function(){if(s._img){var c=s._getPoint(e,!0),a=s._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(c.x-s._imgOffset.x)+"px",a.top=Math.round(c.y-s._imgOffset.y)+"px"}})},r.prototype._copyProps=function(e,s,c){for(var a=0;a<c.length;a++){var l=c[a];e[l]=s[l]}},r.prototype._copyStyle=function(e,s){if(r._rmvAtts.forEach(function(v){s.removeAttribute(v)}),e instanceof HTMLCanvasElement){var c=e,a=s;a.width=c.width,a.height=c.height,a.getContext("2d").drawImage(c,0,0)}for(var l=getComputedStyle(e),h=0;h<l.length;h++){var m=l[h];m.indexOf("transition")<0&&(s.style[m]=l[m])}s.style.pointerEvents="none";for(var h=0;h<e.children.length;h++)this._copyStyle(e.children[h],s.children[h])},r.prototype._dispatchEvent=function(e,s,c){if(e&&c){var a=document.createEvent("Event"),l=e.touches?e.touches[0]:e;return a.initEvent(s,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,r._kbdProps),this._copyProps(a,l,r._ptProps),a.dataTransfer=this._dataTransfer,c.dispatchEvent(a),a.defaultPrevented}return!1},r.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},r}();i._instance=new i,i._THRESHOLD=5,i._OPACITY=.5,i._DBLCLICK=500,i._CTXMENU=900,i._ISPRESSHOLDMODE=!1,i._PRESSHOLDAWAIT=400,i._PRESSHOLDMARGIN=25,i._PRESSHOLDTHRESHOLD=0,i._rmvAtts="id,class,style,draggable".split(","),i._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),i._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=i})(H||(H={}));var g=(t=>(t.rankingsDataSet="rankingsDataSet",t.searchFilterChanged="searchFilterChanged",t.eventFilterChanged="eventFilterChanged",t.eventTypeFilterChanged="eventTypeFilterChanged",t.ageFilterChanged="ageFilterChanged",t.continentFilterChanged="continentFilterChanged",t.countryFilterChanged="countryFilterChanged",t.topNChanged="topNChanged",t.rankingTypeChanged="rankingTypeChanged",t.timeFrameChanged="timeFrameChanged",t.rankingsFiltered="rankingsFiltered",t.resultsSorted="resultsSorted",t.sortColumnsChanged="sortColumnsChanged",t.uiStateSet="uiStateSet",t))(g||{});function V(t){return{type:g.rankingsDataSet,payload:t}}function q(t=T.rankings,n){const{type:i,payload:r}=n;switch(i){case g.rankingsDataSet:{const e=Z(r),s=z(r),c=J(r),a=Q(r),l=tt(r,s,c,a);return{lastUpdated:r.refreshed,data:r,competitionIDToIndex:e,personIDToIndex:s,continentIDToIndex:c,countryIDToIndex:a,activeRegions:l}}}return t}function Z(t){const n={};for(const[i,r]of t.competitions.entries())n[r.id]=i;return n}function z(t){const n={};for(const[i,r]of t.persons.entries())n[r.id]=i;return n}function J(t){const n={};for(const[i,r]of t.continents.entries())n[r.id]=i;return n}function Q(t){const n={};for(const[i,r]of t.countries.entries())n[r.id]=i;return n}function tt(t,n,i,r){const e={continents:new Set,countries:new Set};for(const s of t.events)for(const c of s.rankings)for(const a of c.ranks){const l=t.persons[n[a.id]];if(!l)throw new Error(`Missing competitor ID ${a.id}`);const h=t.countries[r[l.country]];if(!h)throw new Error(`Missing country ID ${l.country}`);const m=t.continents[i[h.continent]];if(!m)throw new Error(`Missing continent ID ${h.continent}`);e.continents.add(m.id),e.countries.add(h.id)}return e}function et(t){return{type:g.searchFilterChanged,payload:t}}function nt(t){return{type:g.eventFilterChanged,payload:t}}function rt(t){return{type:g.eventTypeFilterChanged,payload:t}}function ot(t){return{type:g.ageFilterChanged,payload:t}}function it(t){return{type:g.continentFilterChanged,payload:t}}function st(t){return{type:g.countryFilterChanged,payload:t}}function at(t){return{type:g.topNChanged,payload:t}}function ct(t){return{type:g.rankingTypeChanged,payload:t}}function lt(t){return{type:g.timeFrameChanged,payload:t}}function ut(t=T.filters,n){const{type:i,payload:r}=n;switch(i){case g.searchFilterChanged:return{...t,search:r};case g.eventFilterChanged:return{...t,event:r};case g.eventTypeFilterChanged:return{...t,eventType:r};case g.ageFilterChanged:return{...t,age:r};case g.continentFilterChanged:return{...t,continent:r};case g.countryFilterChanged:return{...t,country:r};case g.topNChanged:return{...t,topN:r};case g.rankingTypeChanged:return{...t,rankingType:r};case g.timeFrameChanged:return{...t,timeFrame:r}}return t}function dt(t,n){return{type:g.rankingsFiltered,payload:{rankings:t,filters:n}}}function ht(t,n){return{type:g.resultsSorted,payload:{sortColumns:t,rankingType:n}}}function gt(t=[],n){const{type:i,payload:r}=n;switch(i){case g.rankingsFiltered:return ft(r.rankings,r.filters);case g.resultsSorted:return Ct(t,r.sortColumns,r.rankingType)}return t}function ft(t,n){const i=t.data,{competitionIDToIndex:r,personIDToIndex:e,continentIDToIndex:s,countryIDToIndex:c}=t,{topN:a,timeFrame:l}=n,h=24*60*60*1e3,m=[];for(const v of i.events)for(const u of v.rankings){const d={world:0,continents:{},countries:{}};for(const[f,p]of u.ranks.entries()){const y=i.competitions[r[p.competition]];if(!y)throw new Error(`Missing competition ID ${p.competition}`);const I=i.persons[e[p.id]];if(!I)throw new Error(`Missing competitor ID ${p.id}`);const _=i.countries[c[I.country]];if(!_)throw new Error(`Missing country ID ${I.country}`);const S=i.continents[s[_.continent]];if(!S)throw new Error(`Missing continent ID ${_.continent}`);const Y=Math.floor((new Date().getTime()-new Date(y.startDate).getTime())/h);d.world++,d.continents[S.id]??=0,d.continents[S.id]++,d.countries[_.id]??=0,d.countries[_.id]++;const C=u.missing?.world??0;let R,D=1,E;n.rankingType==="cr"?(u.missing.continents?.[S.id]?(R=u.missing.continents[S.id],C>0&&(D=R/C)):C>0&&(D=0),E=d.continents[S.id]+D*(p.rank-f-1)):n.rankingType==="nr"?(u.missing.countries?.[_.id]?(R=u.missing.countries[_.id],C>0&&(D=R/C)):C>0&&(D=0),E=d.countries[_.id]+D*(p.rank-f-1)):(R=C,E=d.world+D*(p.rank-f-1)),E=Number(E.toFixed(0));const x={event:v,eventType:u.type,age:u.age,date:y.startDate,rank:E,name:I.name,wcaID:I.id,continent:S,country:_,result:p.best,compName:y.name,compWebID:y.webId,compCountry:y.country};Y<=l&&E<=a&&pt(x,n)&&m.push(x)}}return m}function pt(t,n){return St(t,n.search)&&mt(t,n.event)&&vt(t,n.eventType)&&yt(t,n.age)&&_t(t,n.continent)&&bt(t,n.country)}function mt(t,n){return n?t.event.id===n:!0}function vt(t,n){return n?t.eventType===n:!0}function yt(t,n){return n?t.age>=n:!0}function _t(t,n){return n?t.continent.id===n:!0}function bt(t,n){return n?t.country.id===n:!0}function St(t,n){return n?[t.date,t.event.id,t.continent.id,t.age,t.event.id,t.country.id,t.age,t.event.id,t.age,t.event.id,t.eventType,t.continent.id,t.age,t.event.id,t.eventType,t.country.id,t.age,t.event.id,t.eventType,t.age,t.name,t.compName].map(e=>String(e)).join(" ").toLowerCase().includes(n.toLowerCase()):!0}function Ct(t,n,i){const r=[...t];return[...n].reverse().map(s),r;function s(c){const{name:a,direction:l}=c;function h(u,d){switch(i){case"wr":return l*(u.age-d.age);case"cr":{const f=`${u.continent.id} ${u.age}`,p=`${d.continent.id} ${d.age}`;return l*f.localeCompare(p)}case"nr":{const f=`${u.country.id} ${u.age}`,p=`${d.country.id} ${d.age}`;return l*f.localeCompare(p)}}}function m(u,d){const f=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],p=f.indexOf(u.event.id),y=f.indexOf(d.event.id);return p===y&&u.eventType!==d.eventType?l*(u.eventType==="single"?-1:1):l*(p-y)}function v(u,d){if(u.event.format!==d.event.format)return u.event.format==="time"||d.event.format==="time"?l*(u.event.format==="time"?-1:1):l*(u.event.format==="number"?-1:1);switch(u.event.format){case"time":{const[f,p]=[u.result,d.result].map(B);return l*(f-p)}case"number":return l*(Number(u.result)-Number(d.result));case"multi":{const[f,p]=[u.result,d.result].map(X);return f.score!==p.score?-l*(f.score-p.score):f.seconds!==p.seconds?l*(f.seconds-p.seconds):l*(f.unsolved-p.unsolved)}}}switch(a){case"date":case"name":r.sort((u,d)=>l*u[a].localeCompare(d[a]));break;case"rank":r.sort((u,d)=>l*(u[a]-d[a]));break;case"event":r.sort(m);break;case"group":r.sort(h);break;case"result":r.sort(v);break}return r}}function P(t){return{type:g.sortColumnsChanged,payload:t}}function Dt(t=[],n){const{type:i,payload:r}=n;switch(i){case g.sortColumnsChanged:return Et(t,r)}return t}function Et(t,n){const i=[...t],r=t.findIndex(e=>e.name===n.name);return r<0?(i[n.position]={name:n.name,label:n.label,direction:n.defaultDirection||1},i):r===n.position?(i[n.position].direction*=-1,i):(i.splice(r,1),i.splice(n.position,0,t[r]),i)}function kt(t){return{type:g.uiStateSet,payload:t}}function Tt(t=T.uiState,n){const{type:i,payload:r}=n;switch(i){case g.uiStateSet:return r}return t}const T={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{},activeRegions:{continents:new Set,countries:new Set}},results:[],filters:{search:"",event:"",eventType:"",age:"",continent:"",country:"",topN:10,rankingType:"wr",timeFrame:30},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}],uiState:{scrollX:0,scrollY:0,activeID:null}},It=K({rankings:q,results:gt,filters:ut,sortColumns:Dt,uiState:Tt});function Rt(t=T,n){return It(t,n)}function Ft(t){return o.h("div",{id:"info"},o.h("p",{class:"refreshed"},"Last refreshed: ",t.lastUpdated," (UTC)"),o.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}function wt(){const t=["40, 50, 60, etc.","competitor name","competition name"];return"e.g. "+t[Math.floor(Math.random()*t.length)]}function Ot(t){const{store:n,handleRender:i}=t,{search:r}=n.getState().filters;function e(s){const c=s.target;n.dispatch(et(c.value)),i()}return o.h("div",{id:"search"},o.h("label",{class:"strong"},"Search:"),o.h("input",{id:"search-input",value:r,onInput:W(e,350),type:"search",size:19,placeholder:wt()}))}function b(t,n){return t.map(i=>o.h("option",{value:i.value,selected:i.value==n},i.label))}function Pt(t){const{store:n,handleRender:i}=t,{event:r}=n.getState().filters,e=[];for(const c of n.getState().rankings.data.events)e.push({label:c.name,value:c.id});function s(){n.dispatch(nt(this.value)),i()}return o.h("div",null,o.h("label",{class:"strong"},"Event:"),o.h("select",{id:"event-filter",onChange:s},o.h("option",{value:""},"All Events"),b(e,r)))}function Lt(t){const{store:n,handleRender:i}=t,{rankings:r,filters:e}=n.getState(),{continent:s,country:c}=e,{countryIDToIndex:a}=r,{continents:l,countries:h}=r.data,m=r.activeRegions.continents,v=[];function u(){n.dispatch(it(this.value)),i()}let d;if(c){const f=h[a[c]];d=l.filter(p=>f.continent===p.id)}else d=l.filter(f=>m.has(f.id));for(const f of d)v.push({label:f.name,value:f.id});return o.h("div",null,o.h("label",{class:"strong"},"Continent:"),o.h("select",{id:"continent-filter",onChange:u},o.h("option",{value:""},"All Continents"),b(v,s)))}function xt(t){const{store:n,handleRender:i}=t,r=n.getState().rankings.data.countries,e=n.getState().rankings.activeRegions.countries,s=n.getState().filters.country,c=n.getState().filters.continent;function a(){n.dispatch(st(this.value)),i()}const l=r.filter(m=>e.has(m.id)).filter(m=>c===""||m.continent===c),h=[];for(const m of l)h.push({label:m.name,value:m.id});return o.h("div",null,o.h("label",{class:"strong"},"Country:"),o.h("select",{id:"country-filter",onChange:a},o.h("option",{value:""},"All Countries"),b(h,s)))}const Ht=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"}],Mt=[{value:"wr",label:"World (WR)"},{value:"cr",label:"Continent (CR)"},{value:"nr",label:"National (NR)"}],Nt=[{value:"7",label:"7 days"},{value:"14",label:"14 days"},{value:"30",label:"30 days"},{value:"60",label:"60 days"},{value:"90",label:"90 days"}];function $t(t){const{store:n,handleRender:i}=t,{timeFrame:r,topN:e,rankingType:s}=n.getState().filters;function c(){n.dispatch(lt(Number(this.value))),i()}function a(){n.dispatch(at(Number(this.value))),i()}function l(){n.dispatch(ct(this.value)),i()}return o.h("div",{id:"parameters"},o.h("div",null,o.h("label",{class:"strong"},"Top:"),o.h("select",{id:"top-n",onChange:a},b(Ht,e))),o.h("div",null,o.h("label",{class:"strong"},"Ranking Type:"),o.h("select",{id:"ranking-type-filter",onChange:l},b(Mt,s))),o.h("div",null,o.h("label",{class:"strong"},"Time frame:"),o.h("select",{id:"time-frame",onChange:c},b(Nt,r))))}let O,L,F;function At(t){return O=t.store,L=t.handleRender,o.h("div",{id:"sort-columns"},o.h("div",{class:"strong"},"Sort:"),O.getState().sortColumns.map(Ut))}function Ut(t,n){const i=["primary","secondary","tertiary"],r=t.direction==1?"ascending":"descending";return o.h("button",{onClick:Yt,onDragStart:M,onDragEnter:Bt,onDragOver:Xt,onDragLeave:Kt,onDrop:Wt,onDragEnd:N,class:`sort-column ${r} ${i[n]} strong`,draggable:"true","data-sort-on":t.name,"data-position":n},t.label,o.h("span",{"aria-hidden":"true"}))}function Yt(t){const n=t.currentTarget,i=String(n.dataset.sortOn),r=String(n.textContent).trim(),e=Number(n.dataset.position);O.dispatch(P({name:i,label:r,position:e,defaultDirection:null})),L()}function M(t){const n=t.currentTarget,i=t.dataTransfer;F=n,n.style.opacity="0.4",i.effectAllowed="move"}function Xt(t){const n=t.dataTransfer;t.preventDefault(),n.dropEffect="move"}function Bt(t){t.currentTarget.classList.add("over")}function Kt(t){t.currentTarget.classList.remove("over")}function Wt(t){const n=t.currentTarget;if(t.stopPropagation(),n.classList.remove("over"),F.dataset.sortOn!==n.dataset.sortOn){const i=F.querySelector("span.text"),r=String(F.dataset.sortOn),e=String(i?.textContent).trim(),s=Number(n.dataset.position),c=Number(F.dataset.defaultDirection)||null;O.dispatch(P({name:r,label:e,position:s,defaultDirection:c})),L()}}function N(t){t.currentTarget.removeAttribute("style")}function jt(t){const{store:n,handleRender:i}=t,{eventType:r}=n.getState().filters;function e(){n.dispatch(rt(this.value)),i()}const s=[{label:"Single",value:"single"},{label:"Average",value:"average"}];return o.h("div",null,o.h("label",{class:"strong"},"Result:"),o.h("select",{id:"event-type-filter",onChange:e},o.h("option",{value:""},"Any"),b(s,r)))}function Gt(t){const{store:n,handleRender:i}=t,{age:r}=n.getState().filters;function e(){n.dispatch(ot(Number(this.value))),i()}const s=[{label:"Over 40",value:"40"},{label:"Over 50",value:"50"},{label:"Over 60",value:"60"},{label:"Over 70",value:"70"},{label:"Over 80",value:"80"},{label:"Over 90",value:"90"}];return o.h("div",null,o.h("label",{class:"strong"},"Age:"),o.h("select",{id:"age-filter",onChange:e},b(s,r)))}function Vt(t){return o.h("div",{id:"panel"},o.h("div",{class:"panel-grid"},o.h($t,{...t}),o.h(qt,{...t}),o.h(At,{...t})))}function qt(t){return o.h("div",{id:"dropdown-filters"},o.h(Pt,{...t}),o.h(jt,{...t}),o.h(Gt,{...t}),o.h(Lt,{...t}),o.h(xt,{...t}),o.h(Ot,{...t}))}const Zt=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function zt(t){const{results:n}=t.store.getState();return!n||n.length===0?oe():Jt(t)}function Jt(t){const{results:n}=t.store.getState(),i=[];for(const r of n)i.push(o.h(re,{rowData:r,appProps:t}));return o.h("table",{id:"ranking-table",class:"rankings sortable"},o.h("thead",null,o.h(Qt,{headers:Zt,appProps:t})),o.h("tbody",null,i))}function Qt(t){const{headers:n,appProps:i}=t,r=[];for(const e of n)r.push(o.h(te,{columnHeader:e,appProps:i}));return o.h("tr",null,r)}function te(t){const{columnHeader:n,appProps:i}=t;return n.defaultSortDirection===null?o.h(ne,{columnHeader:n}):o.h(ee,{columnHeader:n,appProps:i})}function ee(t){const{columnHeader:n,appProps:i}=t,{sortColumns:r}=i.store.getState();function e(a){const l=(a.ctrlKey?1:0)+(a.shiftKey?1:0);i.store.dispatch(P({name:n.name,label:n.label,position:l,defaultDirection:n.defaultSortDirection})),i.handleRender()}const s=[n.name];let c=null;for(const[a,l]of r.entries())if(l.name===n.name){const h=l.direction==1?"ascending":"descending",m=["primary","secondary","tertiary"];s.push(h),s.push(m[a]),a===0&&(c=h)}return o.h("th",{draggable:"true",class:s.join(" "),"data-sort-on":n.name,"data-default-direction":n.defaultSortDirection,"aria-sort":c,onClick:e,onDragStart:M,onDragEnd:N},o.h("button",{class:"strong",type:"button"},o.h("div",{class:"column"},o.h("span",{class:"text"},n.label)),o.h("div",{class:"column"},o.h("span",{class:"sort up","aria-hidden":"true"},"▲"),o.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function ne(t){return o.h("th",{class:`${t.columnHeader.name} no-sort strong`},o.h("span",null,t.columnHeader.label))}function re(t){const n="https://www.worldcubeassociation.org/persons",i="https://www.worldcubeassociation.org/competitions",r="https://wca-seniors.org/Senior_Rankings.html",{rowData:e,appProps:s}=t,c=s.store.getState().filters.rankingType,a=e.date.indexOf("-"),l=e.date.slice(0,a+1),h=e.date.slice(a+1),m=`${n}/${e.wcaID}?event=${e.event.id}`,v=`${i}/${e.compWebID}/results/by_person#${e.wcaID}`,u=`${r}#${e.event.id}-${e.eventType}-${e.age}`;let d;switch(c){case"wr":{d=o.h("a",{href:u,target:"_blank"},e.age,"+");break}case"cr":{d=o.h("a",{href:u+`-${e.continent.id}`,target:"_blank"},e.continent.id," ",e.age,"+");break}case"nr":{d=o.h("a",{href:u+`-xx-${e.country.id}`,target:"_blank"},e.country.id," ",e.age,"+");break}}return o.h("tr",null,o.h("td",{class:"date"},l,o.h("wbr",null),h),o.h("td",{class:"event"},o.h("i",{class:`event-${e.event.id} cubing-icon icon`}),e.event.id," ",e.eventType),o.h("td",{class:"group"},d),o.h("td",{class:"rank"},e.rank),o.h("td",{class:"name"},o.h("a",{href:m,target:"_blank"},o.h("span",{class:`flag-${e.country.id} flag`})," ",e.name)),o.h("td",{class:"result"},e.result),o.h("td",{class:"competition"},o.h("a",{href:v,target:"_blank"},o.h("span",{class:`flag-${e.compCountry} flag`})," ",e.compName)))}function oe(){return o.h("h3",{class:"no-results"},"No results")}function ie(t){const i=t.store.getState(),r=i.results;return o.h("div",null,o.h(Ft,{lastUpdated:i.rankings.lastUpdated}),o.h(Vt,{...t}),o.h("div",{class:"strong"},"Showing ",r.length," ",r.length===1?"result":"results"),o.h(zt,{...t}))}function se(){return o.h("h3",{class:"message"},"Loading... please wait")}function $(t){return o.h("div",{class:"error"},o.h("h3",null,"Something went wrong ™"),o.h("div",{class:"message"},t))}const A=window.rankings,w=j("#app");if(!A)throw w.render($("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const k=G(T,Rt);k.dispatch(V(A));U();function U(){try{const t=k.getState();k.dispatch(kt(ae())),w.render(se()),k.dispatch(dt(t.rankings,t.filters)),k.dispatch(ht(t.sortColumns,t.filters.rankingType)),w.render(ie({store:k,handleRender:U})),ce(t.uiState)}catch(t){throw t instanceof Error&&w.render($(t.message)),t}}function ae(){const t=T.uiState;t.scrollX=window.scrollX,t.scrollY=window.scrollY,t.activeID=document.activeElement?.id||null;const n=document.getElementById("search-input");return t.selectionStart=n?.selectionStart,t.selectionEnd=n?.selectionEnd,t.selectionDirection=n?.selectionDirection,t}function ce(t){if(t.activeID&&document.getElementById(t.activeID)?.focus(),t.activeID==="search-input"){const n=document.getElementById("search-input");n.selectionStart=t?.selectionStart||null,n.selectionEnd=t?.selectionEnd||null,n.selectionDirection=t?.selectionDirection||"none"}window.scroll(t.scrollX,t.scrollY)}
