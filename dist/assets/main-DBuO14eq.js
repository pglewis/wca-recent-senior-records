(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();var ne;(function(t){var o=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},n.prototype.getData=function(e){return this._data[e]||""},n.prototype.setData=function(e,r){this._data[e]=r},n.prototype.setDragImage=function(e,r,i){var a=s._instance;a._imgCustom=e,a._imgOffset={x:r,y:i}},n}();t.DataTransfer=o;var s=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var r=document,i=this._touchstart.bind(this),a=this._touchmove.bind(this),u=this._touchend.bind(this),l=e?{passive:!1,capture:!1}:!1;r.addEventListener("touchstart",i,l),r.addEventListener("touchmove",a,l),r.addEventListener("touchend",u),r.addEventListener("touchcancel",u)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(e){var r=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var i=this._closestDraggable(e.target);i&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=i,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){r._dragSource==i&&r._img==null&&r._dispatchEvent(e,"contextmenu",i)&&r._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){r._isDragEnabled=!0,r._touchmove(e)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var r=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",r)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",r)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),r!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",r),this._lastTarget=r),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",r))}},n.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},n.prototype._shouldHandleMove=function(e){return!n._ISPRESSHOLDMODE&&this._shouldHandle(e)},n.prototype._shouldHandlePressHoldMove=function(e){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},n.prototype._shouldCancelPressHoldMove=function(e){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(e){var r=this._getDelta(e);return r>n._THRESHOLD||n._ISPRESSHOLDMODE&&r>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new o,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(e,r){return e&&e.touches&&(e=e.touches[0]),{x:r?e.pageX:e.clientX,y:r?e.pageY:e.clientY}},n.prototype._getDelta=function(e){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var r=this._getPoint(e);return Math.abs(r.x-this._ptDown.x)+Math.abs(r.y-this._ptDown.y)},n.prototype._getTarget=function(e){for(var r=this._getPoint(e),i=document.elementFromPoint(r.x,r.y);i&&getComputedStyle(i).pointerEvents=="none";)i=i.parentElement;return i},n.prototype._createImage=function(e){this._img&&this._destroyImage();var r=this._imgCustom||this._dragSource;if(this._img=r.cloneNode(!0),this._copyStyle(r,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var i=r.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-i.left,y:a.y-i.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(e){var r=this;requestAnimationFrame(function(){if(r._img){var i=r._getPoint(e,!0),a=r._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(i.x-r._imgOffset.x)+"px",a.top=Math.round(i.y-r._imgOffset.y)+"px"}})},n.prototype._copyProps=function(e,r,i){for(var a=0;a<i.length;a++){var u=i[a];e[u]=r[u]}},n.prototype._copyStyle=function(e,r){if(n._rmvAtts.forEach(function(D){r.removeAttribute(D)}),e instanceof HTMLCanvasElement){var i=e,a=r;a.width=i.width,a.height=i.height,a.getContext("2d").drawImage(i,0,0)}for(var u=getComputedStyle(e),l=0;l<u.length;l++){var g=u[l];g.indexOf("transition")<0&&(r.style[g]=u[g])}r.style.pointerEvents="none";for(var l=0;l<e.children.length;l++)this._copyStyle(e.children[l],r.children[l])},n.prototype._dispatchEvent=function(e,r,i){if(e&&i){var a=document.createEvent("Event"),u=e.touches?e.touches[0]:e;return a.initEvent(r,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,n._kbdProps),this._copyProps(a,u,n._ptProps),a.dataTransfer=this._dataTransfer,i.dispatchEvent(a),a.defaultPrevented}return!1},n.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},n}();s._instance=new s,s._THRESHOLD=5,s._OPACITY=.5,s._DBLCLICK=500,s._CTXMENU=900,s._ISPRESSHOLDMODE=!1,s._PRESSHOLDAWAIT=400,s._PRESSHOLDMARGIN=25,s._PRESSHOLDTHRESHOLD=0,s._rmvAtts="id,class,style,draggable".split(","),s._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),s._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=s})(ne||(ne={}));function Re(t){return(o={},s)=>{const n={};for(const e in t){const r=t[e];n[e]=r(o[e],s)}return n}}function Pe(t,o){let s=t;function n(){return s}function e(r){s=o(n(),r)}return{getState:n,dispatch:e}}var m=(t=>(t.searchFilterChanged="searchFilterChanged",t.topNChanged="topNChanged",t.timeFrameChanged="timeFrameChanged",t.regionChanged="regionChanged",t.rankingsDataSet="rankingsDataSet",t.rankingsFiltered="rankingsFiltered",t.resultsSorted="resultsSorted",t.sortColumnsChanged="sortColumnsChanged",t))(m||{});function xe(t){return{type:m.topNChanged,payload:t}}function we(t){return{type:m.timeFrameChanged,payload:t}}function Ae(t){return{type:m.searchFilterChanged,payload:t}}function ke(t){return{type:m.regionChanged,payload:t}}function Le(t=J.filters,o){const{type:s,payload:n}=o;switch(s){case m.topNChanged:return{...t,topN:n};case m.timeFrameChanged:return{...t,timeFrame:n};case m.searchFilterChanged:return{...t,search:n};case m.regionChanged:return{...t,region:n}}return t}function Me(t){return{type:m.rankingsDataSet,payload:t}}function He(t=J.rankings,o){const{type:s,payload:n}=o;switch(s){case m.rankingsDataSet:return{lastUpdated:n.refreshed,data:n,competitionIDToIndex:Ne(n),personIDToIndex:je(n),continentIDToIndex:$e(n),countryIDToIndex:Fe(n)}}return t}function Ne(t){const o={};for(const[s,n]of t.competitions.entries())o[n.id]=s;return o}function je(t){const o={};for(const[s,n]of t.persons.entries())o[n.id]=s;return o}function $e(t){const o={};for(const[s,n]of t.continents.entries())o[n.id]=s;return o}function Fe(t){const o={};for(const[s,n]of t.countries.entries())o[n.id]=s;return o}function qe(t,o){return{type:m.rankingsFiltered,payload:{rankings:t,filters:o}}}function Ue(t,o){return{type:m.resultsSorted,payload:{sortColumns:t,region:o}}}function Be(t=[],o){const{type:s,payload:n}=o;switch(s){case m.rankingsFiltered:return Ke(n.rankings,n.filters);case m.resultsSorted:return Ye(t,n.sortColumns,n.region)}return t}function Ke(t,o){var D,d,f,h,p,x,ee;const s=t.data,{competitionIDToIndex:n,personIDToIndex:e,continentIDToIndex:r,countryIDToIndex:i}=t,{topN:a,timeFrame:u}=o,l=24*60*60*1e3,g=[];for(const F of s.events)for(const S of F.rankings){const E={world:0,continents:{},countries:{}};for(const[B,C]of S.ranks.entries()){const P=s.competitions[n[C.competition]];if(!P)throw new Error(`Missing competition ID ${C.competition}`);const w=s.persons[e[C.id]];if(!w)throw new Error(`Missing competitor ID ${C.id}`);const _=s.countries[i[w.country]];if(!_)throw new Error(`Missing country ID ${w.country}`);const T=s.continents[r[_.continent]];if(!T)throw new Error(`Missing continent ID ${_.continent}`);const Ie=Math.floor((new Date().getTime()-new Date(P.startDate).getTime())/l);E.world++,(D=E.continents)[d=T.id]??(D[d]=0),E.continents[T.id]++,(f=E.countries)[h=_.id]??(f[h]=0),E.countries[_.id]++;const O=((p=S.missing)==null?void 0:p.world)??0;let A,I=1,R;o.region==="continent"?((x=S.missing.continents)!=null&&x[T.id]?(A=S.missing.continents[T.id],O>0&&(I=A/O)):O>0&&(I=0),R=E.continents[T.id]+I*(C.rank-B-1)):o.region==="country"?((ee=S.missing.countries)!=null&&ee[_.id]?(A=S.missing.countries[_.id],O>0&&(I=A/O)):O>0&&(I=0),R=E.countries[_.id]+I*(C.rank-B-1)):(A=O,R=E.world+I*(C.rank-B-1)),R=Number(R.toFixed(0));const te={eventID:F.id,eventName:F.name,eventType:S.type,eventFormat:F.format,age:S.age,date:P.startDate,rank:R,name:w.name,wcaID:w.id,continent:T,country:_,result:C.best,compName:P.name,compWebID:P.webId,compCountry:P.country};Ie<=u&&R<=a&&Ve(te,o)&&g.push(te)}}return g}function Ve(t,o){const{search:s}=o;return s?[t.date,t.eventID,t.continent.id,t.age,t.eventID,t.country.id,t.age,t.eventID,t.age,t.eventID,t.eventType,t.continent.id,t.age,t.eventID,t.eventType,t.country.id,t.age,t.eventID,t.eventType,t.age,t.name,t.compName].map(r=>String(r)).join(" ").toLowerCase().includes(s.toLowerCase()):!0}function Ye(t,o,s){const n=[...t];return[...o].reverse().map(r),n;function r(i){const{name:a,direction:u}=i;function l(d,f){switch(s){case"world":return u*(d.age-f.age);case"continent":{const h=`${d.continent.id} ${d.age}`,p=`${f.continent.id} ${f.age}`;return u*h.localeCompare(p)}case"country":{const h=`${d.country.id} ${d.age}`,p=`${f.country.id} ${f.age}`;return u*h.localeCompare(p)}}}function g(d,f){const h=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],p=h.indexOf(d.eventID),x=h.indexOf(f.eventID);return p===x&&d.eventType!==f.eventType?u*(d.eventType==="single"?-1:1):u*(p-x)}function D(d,f){if(d.eventFormat!==f.eventFormat)return d.eventFormat==="time"||f.eventFormat==="time"?u*(d.eventFormat==="time"?-1:1):u*(d.eventFormat==="number"?-1:1);switch(d.eventFormat){case"time":{const[h,p]=[d.result,f.result].map(ve);return u*(h-p)}case"number":return u*(Number(d.result)-Number(f.result));case"multi":{const[h,p]=[d.result,f.result].map(Ge);return h.score!==p.score?-u*(h.score-p.score):h.seconds!==p.seconds?u*(h.seconds-p.seconds):u*(h.unsolved-p.unsolved)}}}switch(a){case"date":case"name":n.sort((d,f)=>u*d[a].localeCompare(f[a]));break;case"rank":n.sort((d,f)=>u*(d[a]-f[a]));break;case"event":n.sort(g);break;case"group":n.sort(l);break;case"result":n.sort(D);break}return n}}function Ge(t){const[o,s]=t.split(" in "),[n,e]=o.split("/").map(Number),r=e-n,i=n-r,a=ve(s);return{score:i,seconds:a,unsolved:r}}function ve(t){const o=t.split(":").reverse();let s=0,n=1;for(const e of o)s+=Number(e)*n,n*=60;return s}function z(t){return{type:m.sortColumnsChanged,payload:t}}function Xe(t=[],o){const{type:s,payload:n}=o;switch(s){case m.sortColumnsChanged:return We(t,n)}return t}function We(t,o){const s=[...t],n=t.findIndex(e=>e.name===o.name);return n<0?(s[o.position]={name:o.name,label:o.label,direction:o.defaultDirection||1},s):n===o.position?(s[o.position].direction*=-1,s):(s.splice(n,1),s.splice(o.position,0,t[n]),s)}const J={rankings:{lastUpdated:"",data:{},competitionIDToIndex:{},personIDToIndex:{},continentIDToIndex:{},countryIDToIndex:{}},results:[],filters:{search:"",topN:10,timeFrame:30,region:"world"},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}]},Ze=Re({rankings:He,results:Be,filters:Le,sortColumns:Xe});function ze(t){const o=document.querySelector(t);function s(n){if(!o)throw new Error(`render(): "${t}" was not found`);Array.isArray(n)?o.replaceChildren(...n):o.replaceChildren(n)}return{render:s}}var k={},v={},L={},M={},K={},re;function Je(){return re||(re=1,Object.defineProperty(K,"__esModule",{value:!0})),K}var V={},oe;function Qe(){return oe||(oe=1,Object.defineProperty(V,"__esModule",{value:!0})),V}var Y={},se;function et(){return se||(se=1,Object.defineProperty(Y,"__esModule",{value:!0})),Y}var G={},ie;function tt(){return ie||(ie=1,Object.defineProperty(G,"__esModule",{value:!0})),G}var X={},ae;function nt(){return ae||(ae=1,Object.defineProperty(X,"__esModule",{value:!0})),X}var H={},ce;function rt(){if(ce)return H;ce=1,Object.defineProperty(H,"__esModule",{value:!0}),H.classnames=void 0;const t=i=>Object.entries(i).map(([a,u])=>u&&a),o=i=>!!i,s=(i,a,u)=>u.indexOf(i)===a,n=[];function e(i){return i?typeof i=="string"?[i]:Array.isArray(i)?i.flatMap(e).filter(o):t(i).filter(o):n}function r(i){const a=e(i).filter(s);return a.length>0?a.join(" "):void 0}return H.classnames=r,H}var ue;function ot(){return ue||(ue=1,function(t){var o=M.__createBinding||(Object.create?function(n,e,r,i){i===void 0&&(i=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,i,a)}:function(n,e,r,i){i===void 0&&(i=r),n[i]=e[r]}),s=M.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&o(e,n,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(Je(),t),s(Qe(),t),s(et(),t),s(tt(),t),s(nt(),t),s(rt(),t)}(M)),M}var le;function ye(){if(le)return L;le=1,Object.defineProperty(L,"__esModule",{value:!0}),L.setAttributes=void 0;const t=ot();function o(e,r){for(const i of Object.keys(e))i in r&&(r[i]=e[i])}const s=new RegExp("^on\\p{Lu}","u");function n(e,r){for(const i of Object.keys(r)){if(i==="__source"||i==="__self"||i==="tsxTag")continue;const a=r[i];if(i==="class"){const u=(0,t.classnames)(a);u&&e.setAttribute(i,u)}else if(i==="ref")a.current=e;else if(s.test(i)){const u=i.replace(/Capture$/,""),l=i!==u,g=u.toLowerCase().substring(2);e.addEventListener(g,a,l)}else i==="style"&&typeof a!="string"?o(a,e.style):i==="dangerouslySetInnerHTML"?e.innerHTML=a:a===!0?e.setAttribute(i,i):(a||a===0)&&e.setAttribute(i,a.toString())}}return L.setAttributes=n,L}var y={},de;function be(){if(de)return y;de=1,Object.defineProperty(y,"__esModule",{value:!0}),y.applyTsxTag=y.createDomElement=y.applyChildren=void 0;function t(e,r){r instanceof Element?e.appendChild(r):typeof r=="string"||typeof r=="number"?e.appendChild(document.createTextNode(r.toString())):console.warn("Unknown type to append: ",r)}function o(e,r){for(const i of r)!i&&i!==0||(Array.isArray(i)?o(e,i):t(e,i))}y.applyChildren=o;function s(e,r){const i=r!=null&&r.is?{is:r.is}:void 0;return r!=null&&r.xmlns?document.createElementNS(r.xmlns,e,i):document.createElement(e,i)}y.createDomElement=s;function n(e,r){let i=e,a=r;return a&&"tsxTag"in a&&(i=a.tsxTag,!a.is&&e.includes("-")&&(a={...a,is:e})),{finalTag:i,finalAttrs:a}}return y.applyTsxTag=n,y}var fe;function st(){if(fe)return v;fe=1,Object.defineProperty(v,"__esModule",{value:!0}),v.createRef=v.h=v.createElement=void 0;const t=ye(),o=be();function s(e,r,...i){if(typeof e=="function")return e({...r,children:i});const{finalTag:a,finalAttrs:u}=(0,o.applyTsxTag)(e,r),l=(0,o.createDomElement)(a,u);return u&&(0,t.setAttributes)(l,u),(0,o.applyChildren)(l,i),l}v.createElement=s,v.h=s;const n=()=>({current:null});return v.createRef=n,v}var N={},b={},he;function De(){if(he)return b;he=1,Object.defineProperty(b,"__esModule",{value:!0}),b.jsxDEV=b.jsxs=b.jsx=void 0;const t=ye(),o=be();function s(n,e){if(typeof n=="function")return n(e);const{children:r,...i}=e,{finalTag:a,finalAttrs:u}=(0,o.applyTsxTag)(n,i),l=(0,o.createDomElement)(a,u);return(0,t.setAttributes)(l,u),(0,o.applyChildren)(l,[r]),l}return b.jsx=s,b.jsxs=s,b.jsxDEV=s,b}var pe;function it(){if(pe)return N;pe=1,Object.defineProperty(N,"__esModule",{value:!0}),N.defineCustomElement=void 0;const t=De();function o(s,n,e){return customElements.define(s,n,e),r=>(0,t.jsx)(s,r)}return N.defineCustomElement=o,N}var W={},me;function at(){return me||(me=1,Object.defineProperty(W,"__esModule",{value:!0})),W}var ge;function ct(){return ge||(ge=1,function(t){var o=k.__createBinding||(Object.create?function(n,e,r,i){i===void 0&&(i=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(n,i,a)}:function(n,e,r,i){i===void 0&&(i=r),n[i]=e[r]}),s=k.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&o(e,n,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(st(),t),s(it(),t),s(De(),t),s(at(),t)}(k)),k}var c=ct();function ut(t){const{store:o}=t,{lastUpdated:s}=o.getState().rankings;return c.h("div",{id:"info"},c.h("p",{class:"refreshed"},"Last refreshed: ",s," (UTC)"),c.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}let U,Q,j;function lt(t){return U=t.store,Q=t.handleRender,c.h("div",{id:"sort-columns"},c.h("div",{class:"strong"},"Sort:"),U.getState().sortColumns.map(dt))}function dt(t,o){const s=["primary","secondary","tertiary"],n=t.direction==1?"ascending":"descending";return c.h("button",{onClick:ft,onDragStart:Se,onDragEnter:pt,onDragOver:ht,onDragLeave:mt,onDrop:gt,onDragEnd:Ee,class:`sort-column ${n} ${s[o]} strong`,draggable:"true","data-sort-on":t.name,"data-position":o},t.label,c.h("span",{"aria-hidden":"true"}))}function ft(t){const o=t.currentTarget,s=String(o.dataset.sortOn),n=String(o.textContent).trim(),e=Number(o.dataset.position);U.dispatch(z({name:s,label:n,position:e,defaultDirection:null})),Q()}function Se(t){const o=t.currentTarget,s=t.dataTransfer;j=o,o.style.opacity="0.4",s.effectAllowed="move"}function ht(t){const o=t.dataTransfer;t.preventDefault(),o.dropEffect="move"}function pt(t){t.currentTarget.classList.add("over")}function mt(t){t.currentTarget.classList.remove("over")}function gt(t){const o=t.currentTarget;if(t.stopPropagation(),o.classList.remove("over"),j.dataset.sortOn!==o.dataset.sortOn){const s=j.querySelector("span.text"),n=String(j.dataset.sortOn),e=String(s==null?void 0:s.textContent).trim(),r=Number(o.dataset.position),i=Number(j.dataset.defaultDirection)||null;U.dispatch(z({name:n,label:e,position:r,defaultDirection:i})),Q()}}function Ee(t){t.currentTarget.removeAttribute("style")}function _t(t,o=300){let s=null;return(...n)=>{s!==null&&window.clearTimeout(s),s=window.setTimeout(()=>t(...n),o)}}const _e=["333bf","333 60","sq1 eu","555 au 40","60"],vt=_e[Math.floor(Math.random()*_e.length)];function yt(t){const{store:o,handleRender:s}=t,{search:n}=o.getState().filters,e="e.g. "+vt;function r(a){const u=a.target;o.dispatch(Ae(u.value)),s()}function i(){const a=this.value.length;this.setSelectionRange(a,a)}return c.h("div",{id:"search"},c.h("label",{class:"strong"},"Search: ",c.h("input",{value:n,onInput:_t(r,500),onFocus:i,id:"search-input",type:"search",size:20,placeholder:e})))}const bt=[{value:"5",label:"5"},{value:"10",label:"10"},{value:"25",label:"25"},{value:"50",label:"50"}],Dt=[{value:"world",label:"World"},{value:"continent",label:"Continent"},{value:"country",label:"Country"}],St=[{value:"7",label:"7 days"},{value:"14",label:"14 days"},{value:"30",label:"30 days"},{value:"60",label:"60 days"},{value:"90",label:"90 days"}];function Et(t){const{store:o,handleRender:s}=t,{timeFrame:n,topN:e,region:r}=o.getState().filters;function i(){o.dispatch(we(Number(this.value))),s()}function a(){o.dispatch(xe(Number(this.value))),s()}function u(){o.dispatch(ke(this.value)),s()}return c.h("div",{id:"parameters"},c.h("label",{class:"strong"},"Top: ",c.h("select",{id:"top-n",onChange:a},Z(bt,e))),c.h("label",{class:"strong"},"  Region: ",c.h("select",{id:"region",onChange:u},Z(Dt,r))),c.h("label",{class:"strong"},"  Time frame: ",c.h("select",{id:"time-frame",onChange:i},Z(St,n))))}function Z(t,o){return t.map(s=>c.h("option",{value:s.value,selected:s.value==o},s.label))}function Ct(t){const{results:o}=t.store.getState();return c.h("div",{id:"panel"},c.h("div",{class:"panel-grid"},c.h(yt,t),c.h(Et,t),c.h(lt,t),c.h("div",{class:"strong"},"Showing ",o.length," ",o.length===1?"result":"results")))}const Tt=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function Ot(t){const{results:o}=t.store.getState();return!o||o.length===0?kt():It(t)}function It(t){const{results:o}=t.store.getState(),s=[];for(const n of o)s.push(c.h(At,{rowData:n,appProps:t}));return c.h("table",{id:"ranking-table",class:"rankings sortable"},c.h("thead",null,c.h(Rt,{headers:Tt,appProps:t})),c.h("tbody",null,s))}function Rt(t){const{headers:o,appProps:s}=t,n=[];for(const e of o)n.push(c.h(Pt,{columnHeader:e,appProps:s}));return c.h("tr",null,n)}function Pt(t){const{columnHeader:o,appProps:s}=t;return o.defaultSortDirection===null?c.h(wt,{columnHeader:o}):c.h(xt,{columnHeader:o,appProps:s})}function xt(t){const{columnHeader:o,appProps:s}=t,{sortColumns:n}=s.store.getState();function e(a){const u=(a.ctrlKey?1:0)+(a.shiftKey?1:0);s.store.dispatch(z({name:o.name,label:o.label,position:u,defaultDirection:o.defaultSortDirection})),s.handleRender()}const r=[o.name];let i=null;for(const[a,u]of n.entries())if(u.name===o.name){const l=u.direction==1?"ascending":"descending",g=["primary","secondary","tertiary"];r.push(l),r.push(g[a]),a===0&&(i=l)}return c.h("th",{draggable:"true",class:r.join(" "),"data-sort-on":o.name,"data-default-direction":o.defaultSortDirection,"aria-sort":i,onClick:e,onDragStart:Se,onDragEnd:Ee},c.h("button",{class:"strong",type:"button"},c.h("div",{class:"column"},c.h("span",{class:"text"},o.label)),c.h("div",{class:"column"},c.h("span",{class:"sort up","aria-hidden":"true"},"▲"),c.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function wt(t){return c.h("th",{class:`${t.columnHeader.name} no-sort strong`},c.h("span",null,t.columnHeader.label))}function At(t){const o="https://www.worldcubeassociation.org/persons",s="https://www.worldcubeassociation.org/competitions",n="https://wca-seniors.org/Senior_Rankings.html",{rowData:e,appProps:r}=t,i=r.store.getState().filters.region,a=e.date.indexOf("-"),u=e.date.slice(0,a+1),l=e.date.slice(a+1),g=`${o}/${e.wcaID}?event=${e.eventID}`,D=`${s}/${e.compWebID}/results/by_person#${e.wcaID}`,d=`${n}#${e.eventID}-${e.eventType}-${e.age}`;let f;switch(i){case"world":{f=c.h("a",{href:d,target:"_blank"},e.age,"+");break}case"continent":{f=c.h("a",{href:d+`-${e.continent.id}`,target:"_blank"},e.continent.id," ",e.age,"+");break}case"country":{f=c.h("a",{href:d+`-xx-${e.country.id}`,target:"_blank"},c.h("span",{class:`flag-${e.country.id} flag`})," ",e.country.id," ",e.age,"+");break}}return c.h("tr",null,c.h("td",{class:"date"},u,c.h("wbr",null),l),c.h("td",{class:"event"},c.h("i",{class:`event-${e.eventID} cubing-icon icon`}),e.eventID," ",e.eventType),c.h("td",{class:"group"},f),c.h("td",{class:"rank"},e.rank),c.h("td",{class:"name"},c.h("a",{href:g,target:"_blank"},e.name)),c.h("td",{class:"result"},e.result),c.h("td",{class:"competition"},c.h("a",{href:D,target:"_blank"},c.h("span",{class:`flag-${e.compCountry} flag`})," ",e.compName)))}function kt(){return c.h("h3",{class:"no-results"},"No results")}function Lt(t){return c.h("div",null,c.h(ut,t),c.h(Ct,t),c.h(Ot,t))}function Mt(){return c.h("h3",{class:"message"},"Loading... please wait")}function Ce(t){return c.h("div",{class:"error"},c.h("h3",null,"Something went wrong ™"),c.h("div",{class:"message"},t))}const Te=window.rankings,q=ze("#app");if(!Te)throw q.render(Ce("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const $=Pe(J,Ze);$.dispatch(Me(Te));Oe();function Oe(){var t,o;try{const s=$.getState(),n=((t=document.activeElement)==null?void 0:t.id)||null;q.render(Mt()),$.dispatch(qe(s.rankings,s.filters)),$.dispatch(Ue(s.sortColumns,s.filters.region)),q.render(Lt({store:$,handleRender:Oe})),n&&((o=document.getElementById(n))==null||o.focus())}catch(s){throw s instanceof Error&&q.render(Ce(s.message)),s}}
