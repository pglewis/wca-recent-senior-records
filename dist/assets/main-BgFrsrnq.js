(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();var j;(function(t){var i=function(){function r(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),r.prototype.clearData=function(e){e!=null?delete this._data[e]:this._data=null},r.prototype.getData=function(e){return this._data[e]||""},r.prototype.setData=function(e,n){this._data[e]=n},r.prototype.setDragImage=function(e,n,s){var a=o._instance;a._imgCustom=e,a._imgOffset={x:n,y:s}},r}();t.DataTransfer=i;var o=function(){function r(){if(this._lastClick=0,r._instance)throw"DragDropTouch instance already created.";var e=!1;if(document.addEventListener("test",function(){},{get passive(){return e=!0,!0}}),"ontouchstart"in document){var n=document,s=this._touchstart.bind(this),a=this._touchmove.bind(this),c=this._touchend.bind(this),l=e?{passive:!1,capture:!1}:!1;n.addEventListener("touchstart",s,l),n.addEventListener("touchmove",a,l),n.addEventListener("touchend",c),n.addEventListener("touchcancel",c)}}return r.getInstance=function(){return r._instance},r.prototype._touchstart=function(e){var n=this;if(this._shouldHandle(e)){if(Date.now()-this._lastClick<r._DBLCLICK&&this._dispatchEvent(e,"dblclick",e.target)){e.cancelable&&e.preventDefault(),this._reset();return}this._reset();var s=this._closestDraggable(e.target);s&&!this._dispatchEvent(e,"mousemove",e.target)&&!this._dispatchEvent(e,"mousedown",e.target)&&(this._dragSource=s,this._ptDown=this._getPoint(e),this._lastTouch=e,e.cancelable&&e.preventDefault(),setTimeout(function(){n._dragSource==s&&n._img==null&&n._dispatchEvent(e,"contextmenu",s)&&n._reset()},r._CTXMENU),r._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){n._isDragEnabled=!0,n._touchmove(e)},r._PRESSHOLDAWAIT)))}},r.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e)){this._reset();return}if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var n=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",n)){this._lastTouch=e,e.cancelable&&e.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",n)),this._img&&(this._lastTouch=e,e.cancelable&&e.preventDefault(),n!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",n),this._lastTarget=n),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",n))}},r.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target)){e.cancelable&&e.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},r.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},r.prototype._shouldHandleMove=function(e){return!r._ISPRESSHOLDMODE&&this._shouldHandle(e)},r.prototype._shouldHandlePressHoldMove=function(e){return r._ISPRESSHOLDMODE&&this._isDragEnabled&&e&&e.touches&&e.touches.length},r.prototype._shouldCancelPressHoldMove=function(e){return r._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(e)>r._PRESSHOLDMARGIN},r.prototype._shouldStartDragging=function(e){var n=this._getDelta(e);return n>r._THRESHOLD||r._ISPRESSHOLDMODE&&n>=r._PRESSHOLDTHRESHOLD},r.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new i,clearInterval(this._pressHoldInterval)},r.prototype._getPoint=function(e,n){return e&&e.touches&&(e=e.touches[0]),{x:n?e.pageX:e.clientX,y:n?e.pageY:e.clientY}},r.prototype._getDelta=function(e){if(r._ISPRESSHOLDMODE&&!this._ptDown)return 0;var n=this._getPoint(e);return Math.abs(n.x-this._ptDown.x)+Math.abs(n.y-this._ptDown.y)},r.prototype._getTarget=function(e){for(var n=this._getPoint(e),s=document.elementFromPoint(n.x,n.y);s&&getComputedStyle(s).pointerEvents=="none";)s=s.parentElement;return s},r.prototype._createImage=function(e){this._img&&this._destroyImage();var n=this._imgCustom||this._dragSource;if(this._img=n.cloneNode(!0),this._copyStyle(n,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var s=n.getBoundingClientRect(),a=this._getPoint(e);this._imgOffset={x:a.x-s.left,y:a.y-s.top},this._img.style.opacity=r._OPACITY.toString()}this._moveImage(e),document.body.appendChild(this._img)},r.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},r.prototype._moveImage=function(e){var n=this;requestAnimationFrame(function(){if(n._img){var s=n._getPoint(e,!0),a=n._img.style;a.position="absolute",a.pointerEvents="none",a.zIndex="999999",a.left=Math.round(s.x-n._imgOffset.x)+"px",a.top=Math.round(s.y-n._imgOffset.y)+"px"}})},r.prototype._copyProps=function(e,n,s){for(var a=0;a<s.length;a++){var c=s[a];e[c]=n[c]}},r.prototype._copyStyle=function(e,n){if(r._rmvAtts.forEach(function(f){n.removeAttribute(f)}),e instanceof HTMLCanvasElement){var s=e,a=n;a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0)}for(var c=getComputedStyle(e),l=0;l<c.length;l++){var d=c[l];d.indexOf("transition")<0&&(n.style[d]=c[d])}n.style.pointerEvents="none";for(var l=0;l<e.children.length;l++)this._copyStyle(e.children[l],n.children[l])},r.prototype._dispatchEvent=function(e,n,s){if(e&&s){var a=document.createEvent("Event"),c=e.touches?e.touches[0]:e;return a.initEvent(n,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,e,r._kbdProps),this._copyProps(a,c,r._ptProps),a.dataTransfer=this._dataTransfer,s.dispatchEvent(a),a.defaultPrevented}return!1},r.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},r}();o._instance=new o,o._THRESHOLD=5,o._OPACITY=.5,o._DBLCLICK=500,o._CTXMENU=900,o._ISPRESSHOLDMODE=!1,o._PRESSHOLDAWAIT=400,o._PRESSHOLDMARGIN=25,o._PRESSHOLDTHRESHOLD=0,o._rmvAtts="id,class,style,draggable".split(","),o._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),o._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=o})(j||(j={}));function ue(t){return(i={},o)=>{const r={};for(const e in t){const n=t[e];r[e]=n(i[e],o)}return r}}function ce(t,i){let o=t;function r(){return o}function e(n){o=i(r(),n)}return{getState:r,dispatch:e}}var h=(t=>(t.topNChanged="topNChanged",t.timeFrameChanged="timeFrameChanged",t.searchFilterChanged="searchFilterChanged",t.rankingsDataSet="rankingsDataSet",t.rankingsFiltered="rankingsFiltered",t.resultsSorted="resultsSorted",t.sortColumnsChanged="sortColumnsChanged",t))(h||{});function le(t){return{type:h.topNChanged,payload:t}}function de(t){return{type:h.timeFrameChanged,payload:t}}function fe(t){return{type:h.searchFilterChanged,payload:t}}function he(t=x.filters,i){const{type:o,payload:r}=i;switch(o){case h.topNChanged:return{...t,topN:r};case h.timeFrameChanged:return{...t,timeFrame:r};case h.searchFilterChanged:return{...t,search:r}}return t}function pe(t){return{type:h.rankingsDataSet,payload:t}}function me(t=x.rankings,i){const{type:o,payload:r}=i;switch(o){case h.rankingsDataSet:return{lastUpdated:r.refreshed,data:r}}return t}function ge(t,i){return{type:h.rankingsFiltered,payload:{rankingsData:t,filters:i}}}function _e(t){return{type:h.resultsSorted,payload:t}}function ve(t=[],i){const{type:o,payload:r}=i;switch(o){case h.rankingsFiltered:return ye(r.rankingsData,r.filters);case h.resultsSorted:return Se(t,r)}return t}function ye(t,i){const{topN:o,timeFrame:r}=i,e=24*60*60*1e3,n=[];for(const s of t.events)for(const a of s.rankings)for(const c of a.ranks){const l=t.competitions.find(p=>p.id===c.competition);if(!l)throw`Missing competition ID ${c.competition}`;const d=t.persons.find(p=>p.id===c.id);if(!d)throw`Missing competitor ID ${c.id}`;const f=Math.floor((new Date().getTime()-new Date(l.startDate).getTime())/e),m={eventID:s.id,eventName:s.name,eventType:a.type,eventFormat:s.format,age:a.age,date:l.startDate,rank:c.rank,name:d.name,wcaID:d.id,result:c.best,compName:l.name,compWebID:l.webId,compCountry:l.country};if(f<=r&&be(m,i)&&n.push(m),c.rank>Math.min(a.ranks.length,o)-1)break}return n}function be(t,i){const{search:o}=i;return o?["date","eventID","eventType","name","compName"].map(n=>t[n]).join(" ").toLowerCase().includes(o.toLowerCase()):!0}function Se(t,i){const o=[...t];return[...i].reverse().map(e),o;function e(n){const{name:s,direction:a}=n;switch(s){case"date":case"name":o.sort((d,f)=>a*d[s].localeCompare(f[s]));break;case"age":case"rank":o.sort((d,f)=>a*(d[s]-f[s]));break;case"event":o.sort(c);break;case"result":o.sort(l);break}return o;function c(d,f){const m=["333","222","444","555","666","777","333bf","333fm","333oh","clock","minx","pyram","skewb","sq1","444bf","555bf","333mbf"],p=m.indexOf(d.eventID),N=m.indexOf(f.eventID);return p===N&&d.eventType!==f.eventType?a*(d.eventType==="single"?-1:1):a*(p-N)}function l(d,f){if(d.eventFormat!==f.eventFormat)return d.eventFormat==="time"||f.eventFormat==="time"?a*(d.eventFormat==="time"?-1:1):a*(d.eventFormat==="number"?-1:1);switch(d.eventFormat){case"time":{const[m,p]=[d.result,f.result].map(Q);return a*(m-p)}case"number":return a*(Number(d.result)-Number(f.result));case"multi":{const[m,p]=[d.result,f.result].map(De);return m.score!==p.score?-a*(m.score-p.score):m.seconds!==p.seconds?a*(m.seconds-p.seconds):a*(m.unsolved-p.unsolved)}}}}}function De(t){const[i,o]=t.split(" in "),[r,e]=i.split("/").map(Number),n=e-r,s=r-n,a=Q(o);return{score:s,seconds:a,unsolved:n}}function Q(t){const i=t.split(":").reverse();let o=0,r=1;for(const e of i)o+=+e*r,r*=60;return o}function k(t){return{type:h.sortColumnsChanged,payload:t}}function Ee(t=[],i){const{type:o,payload:r}=i;switch(o){case h.sortColumnsChanged:return Ce(t,r)}return t}function Ce(t,i){const o=[...t],r=t.findIndex(e=>e.name===i.name);return r<0?(o[i.position]={name:i.name,label:i.label,direction:i.defaultDirection||1},o):r===i.position?(o[i.position].direction*=-1,o):(o.splice(r,1),o.splice(i.position,0,t[r]),o)}const x={rankings:{lastUpdated:"",data:{}},results:[],filters:{topN:10,timeFrame:30,search:""},sortColumns:[{name:"date",label:"Date",direction:-1},{name:"rank",label:"Rank",direction:1},{name:"event",label:"Event",direction:1}]},Te=ue({rankings:me,results:ve,filters:he,sortColumns:Ee});function Oe(t){const i=document.querySelector(t);function o(r){if(!i)throw new Error(`render(): "${t}" was not found`);Array.isArray(r)?i.replaceChildren(...r):i.replaceChildren(r)}return{render:o}}var y={},g={},b={},S={},P={},F;function Re(){return F||(F=1,Object.defineProperty(P,"__esModule",{value:!0})),P}var A={},q;function Pe(){return q||(q=1,Object.defineProperty(A,"__esModule",{value:!0})),A}var I={},$;function Ae(){return $||($=1,Object.defineProperty(I,"__esModule",{value:!0})),I}var L={},B;function Ie(){return B||(B=1,Object.defineProperty(L,"__esModule",{value:!0})),L}var M={},U;function Le(){return U||(U=1,Object.defineProperty(M,"__esModule",{value:!0})),M}var D={},K;function Me(){if(K)return D;K=1,Object.defineProperty(D,"__esModule",{value:!0}),D.classnames=void 0;const t=s=>Object.entries(s).map(([a,c])=>c&&a),i=s=>!!s,o=(s,a,c)=>c.indexOf(s)===a,r=[];function e(s){return s?typeof s=="string"?[s]:Array.isArray(s)?s.flatMap(e).filter(i):t(s).filter(i):r}function n(s){const a=e(s).filter(o);return a.length>0?a.join(" "):void 0}return D.classnames=n,D}var Y;function we(){return Y||(Y=1,function(t){var i=S.__createBinding||(Object.create?function(r,e,n,s){s===void 0&&(s=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,s,a)}:function(r,e,n,s){s===void 0&&(s=n),r[s]=e[n]}),o=S.__exportStar||function(r,e){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&i(e,r,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(Re(),t),o(Pe(),t),o(Ae(),t),o(Ie(),t),o(Le(),t),o(Me(),t)}(S)),S}var G;function ee(){if(G)return b;G=1,Object.defineProperty(b,"__esModule",{value:!0}),b.setAttributes=void 0;const t=we();function i(e,n){for(const s of Object.keys(e))s in n&&(n[s]=e[s])}const o=new RegExp("^on\\p{Lu}","u");function r(e,n){for(const s of Object.keys(n)){if(s==="__source"||s==="__self"||s==="tsxTag")continue;const a=n[s];if(s==="class"){const c=(0,t.classnames)(a);c&&e.setAttribute(s,c)}else if(s==="ref")a.current=e;else if(o.test(s)){const c=s.replace(/Capture$/,""),l=s!==c,d=c.toLowerCase().substring(2);e.addEventListener(d,a,l)}else s==="style"&&typeof a!="string"?i(a,e.style):s==="dangerouslySetInnerHTML"?e.innerHTML=a:a===!0?e.setAttribute(s,s):(a||a===0)&&e.setAttribute(s,a.toString())}}return b.setAttributes=r,b}var _={},X;function te(){if(X)return _;X=1,Object.defineProperty(_,"__esModule",{value:!0}),_.applyTsxTag=_.createDomElement=_.applyChildren=void 0;function t(e,n){n instanceof Element?e.appendChild(n):typeof n=="string"||typeof n=="number"?e.appendChild(document.createTextNode(n.toString())):console.warn("Unknown type to append: ",n)}function i(e,n){for(const s of n)!s&&s!==0||(Array.isArray(s)?i(e,s):t(e,s))}_.applyChildren=i;function o(e,n){const s=n!=null&&n.is?{is:n.is}:void 0;return n!=null&&n.xmlns?document.createElementNS(n.xmlns,e,s):document.createElement(e,s)}_.createDomElement=o;function r(e,n){let s=e,a=n;return a&&"tsxTag"in a&&(s=a.tsxTag,!a.is&&e.includes("-")&&(a={...a,is:e})),{finalTag:s,finalAttrs:a}}return _.applyTsxTag=r,_}var V;function ke(){if(V)return g;V=1,Object.defineProperty(g,"__esModule",{value:!0}),g.createRef=g.h=g.createElement=void 0;const t=ee(),i=te();function o(e,n,...s){if(typeof e=="function")return e({...n,children:s});const{finalTag:a,finalAttrs:c}=(0,i.applyTsxTag)(e,n),l=(0,i.createDomElement)(a,c);return c&&(0,t.setAttributes)(l,c),(0,i.applyChildren)(l,s),l}g.createElement=o,g.h=o;const r=()=>({current:null});return g.createRef=r,g}var E={},v={},W;function ne(){if(W)return v;W=1,Object.defineProperty(v,"__esModule",{value:!0}),v.jsxDEV=v.jsxs=v.jsx=void 0;const t=ee(),i=te();function o(r,e){if(typeof r=="function")return r(e);const{children:n,...s}=e,{finalTag:a,finalAttrs:c}=(0,i.applyTsxTag)(r,s),l=(0,i.createDomElement)(a,c);return(0,t.setAttributes)(l,c),(0,i.applyChildren)(l,[n]),l}return v.jsx=o,v.jsxs=o,v.jsxDEV=o,v}var Z;function xe(){if(Z)return E;Z=1,Object.defineProperty(E,"__esModule",{value:!0}),E.defineCustomElement=void 0;const t=ne();function i(o,r,e){return customElements.define(o,r,e),n=>(0,t.jsx)(o,n)}return E.defineCustomElement=i,E}var w={},z;function He(){return z||(z=1,Object.defineProperty(w,"__esModule",{value:!0})),w}var J;function Ne(){return J||(J=1,function(t){var i=y.__createBinding||(Object.create?function(r,e,n,s){s===void 0&&(s=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(r,s,a)}:function(r,e,n,s){s===void 0&&(s=n),r[s]=e[n]}),o=y.__exportStar||function(r,e){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&i(e,r,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(ke(),t),o(xe(),t),o(ne(),t),o(He(),t)}(y)),y}var u=Ne();function je(t){const{store:i}=t,{results:o}=i.getState(),{lastUpdated:r}=i.getState().rankings,{topN:e,timeFrame:n,search:s}=i.getState().filters;return u.h("div",{id:"info"},u.h("p",{class:"refreshed"},"Last refreshed: ",r," (UTC)"),u.h("p",{class:"result-info"},"Showing ",o.length," ",o.length===1?"result":"results",s?' matching "'+s+'"':" ","in the top ",e," set in the past ",n," day(s)"),u.h("p",null,"Drag the columns in the sort column list to rearrange the sort order. Column headers can be dragged to the list to change the sort columns. You can also click a column header to set the primary sort, ctrl-click to set the secondary sort, and ctrl+shift-click to set the tertiary sort."))}let R,H,C;function Fe(t){return R=t.store,H=t.handleRender,u.h("div",{id:"sort-columns"},u.h("div",{class:"strong"},"Sort:"),R.getState().sortColumns.map(qe))}function qe(t,i){const o=["primary","secondary","tertiary"],r=t.direction==1?"ascending":"descending";return u.h("button",{onClick:$e,onDragStart:re,onDragEnter:Ue,onDragOver:Be,onDragLeave:Ke,onDrop:Ye,onDragEnd:se,class:`sort-column ${r} ${o[i]} strong`,draggable:"true","data-sort-on":t.name,"data-position":i},t.label,u.h("span",{"aria-hidden":"true"}))}function $e(t){const i=t.currentTarget,o=String(i.dataset.sortOn),r=String(i.textContent),e=Number(i.dataset.position);R.dispatch(k({name:o,label:r,position:e,defaultDirection:null})),H()}function re(t){const i=t.currentTarget,o=t.dataTransfer;C=i,i.style.opacity="0.4",o.effectAllowed="move"}function Be(t){const i=t.dataTransfer;t.preventDefault(),i.dropEffect="move"}function Ue(t){t.currentTarget.classList.add("over")}function Ke(t){t.currentTarget.classList.remove("over")}function Ye(t){const i=t.currentTarget;if(t.stopPropagation(),i.classList.remove("over"),C.dataset.sortOn!==i.dataset.sortOn){const o=C.querySelector("span.text"),r=String(C.dataset.sortOn),e=String(o==null?void 0:o.textContent).trim(),n=Number(i.dataset.position),s=Number(C.dataset.defaultDirection)||null;R.dispatch(k({name:r,label:e,position:n,defaultDirection:s})),H()}}function se(t){t.currentTarget.removeAttribute("style")}function Ge(t){const{store:i,handleRender:o}=t,{search:r}=i.getState().filters,e="e.g. 333bf";function n(a){const c=a.currentTarget;i.dispatch(fe(c.value)),o()}function s(){const a=this.value.length;this.setSelectionRange(a,a)}return u.h("div",{id:"search"},u.h("label",{class:"strong"},"Search: ",u.h("input",{value:r,onInput:n,onFocus:s,id:"search-input",type:"search",size:15,placeholder:e})))}function Xe(t){const{store:i,handleRender:o}=t,{timeFrame:r,topN:e}=i.getState().filters;function n(a){const c=a.currentTarget;i.dispatch(de(Number(c.value))),o()}function s(a){const c=a.currentTarget;i.dispatch(le(Number(c.value))),o()}return u.h("div",{id:"parameters"},u.h("div",null,u.h("label",{class:"strong"},"Show the top ",u.h("select",{id:"top-n",onChange:s},u.h("option",{value:"5",selected:e===5},"5"),u.h("option",{value:"10",selected:e===10},"10"),u.h("option",{value:"25",selected:e===25},"25"),u.h("option",{value:"50",selected:e===50},"50"))),u.h("label",{class:"strong"}," in the past ",u.h("select",{id:"time-frame",onChange:n},u.h("option",{value:"7",selected:r===7},"7 days"),u.h("option",{value:"14",selected:r===14},"14 days"),u.h("option",{value:"30",selected:r===30},"30 days"),u.h("option",{value:"60",selected:r===60},"60 days"),u.h("option",{value:"90",selected:r===90},"90 days")))))}function Ve(t){return u.h("div",{id:"panel"},u.h("div",{class:"panel-grid"},u.h(Ge,t),u.h(Xe,t),u.h(Fe,t)))}const We=[{name:"date",label:"Date",defaultSortDirection:-1},{name:"event",label:"Event",defaultSortDirection:1},{name:"group",label:"Group",defaultSortDirection:1},{name:"rank",label:"Rank",defaultSortDirection:1},{name:"name",label:"Name",defaultSortDirection:1},{name:"result",label:"Result",defaultSortDirection:1},{name:"competition",label:"Competition",defaultSortDirection:null}];function Ze(t){const{results:i}=t.store.getState();return!i||i.length===0?nt():ze(t)}function ze(t){const i=t.store.getState().results;return u.h("table",{id:"ranking-table",class:"rankings sortable"},u.h("thead",null,u.h(Je,{headers:We,appProps:t})),u.h("tbody",null,i.map(tt)))}function Je(t){const{headers:i,appProps:o}=t,r=[];for(const e of i)r.push(u.h(Qe,{header:e,appProps:o}));return u.h("tr",null,r)}function Qe(t){const{header:i,appProps:o}=t,{sortColumns:r}=o.store.getState();if(!i.defaultSortDirection)return et(i);const e=[i.name];let n=null;for(const[c,l]of r.entries()){const d=l.direction==1?"ascending":"descending";if(l.name===i.name){const f=["primary","secondary","tertiary"];c===0&&(n=d),e.push(d),e.push(f[c])}}function s(c){const l=(c.ctrlKey?1:0)+(c.shiftKey?1:0);o.store.dispatch(k({name:i.name,label:i.label,position:l,defaultDirection:i.defaultSortDirection})),o.handleRender()}const a={class:e.join(" "),draggable:"true","data-sort-on":i.name,"data-default-direction":i.defaultSortDirection===1?null:i.defaultSortDirection,"aria-sort":n,onClick:s,onDragStart:re,onDragEnd:se};return u.h("th",a,u.h("button",{class:"strong",type:"button"},u.h("div",{class:"column"},u.h("span",{class:"text"},i.label)),u.h("div",{class:"column"},u.h("span",{class:"sort up","aria-hidden":"true"},"▲"),u.h("span",{class:"sort down","aria-hidden":"true"},"▼"))))}function et(t){return u.h("th",{class:`${t.name} no-sort strong`},u.h("span",null,t.label))}function tt(t){const i="https://www.worldcubeassociation.org/persons",o="https://www.worldcubeassociation.org/competitions",r="https://wca-seniors.org/Senior_Rankings.html",e=t.date.indexOf("-"),n=t.date.slice(0,e+1),s=t.date.slice(e+1),a=`${r}#${t.eventID}-${t.eventType}-${t.age}`,c=`${i}/${t.wcaID}?event=${t.eventID}`,l=`${o}/${t.compWebID}/results/by_person#${t.wcaID}`;return u.h("tr",null,u.h("td",{class:"date"},n,u.h("wbr",null),s),u.h("td",{class:"event"},u.h("i",{class:`event-${t.eventID} cubing-icon icon`}),t.eventID," ",t.eventType),u.h("td",{class:"age"},u.h("a",{href:a,target:"_blank"},t.age,"+")),u.h("td",{class:"rank"},t.rank),u.h("td",{class:"name"},u.h("a",{href:c,target:"_blank"},t.name)),u.h("td",{class:"result"},t.result),u.h("td",{class:"competition"},u.h("i",{class:`flag-${t.compCountry} flag`})," ",u.h("a",{href:l,target:"_blank"},t.compName)))}function nt(){return u.h("h3",{class:"no-results"},"No results")}function rt(t){return u.h("div",null,u.h(je,t),u.h(Ve,t),u.h(Ze,t))}function st(){return u.h("h3",{class:"no-results"},"No results")}function ie(t){return u.h("div",{class:"error"},u.h("h3",null,"Something went wrong ™"),u.h("div",{class:"message"},t))}const oe=window.rankings,O=Oe("#app");if(!oe)throw O.render(ie("The rankings data is missing, try back in a bit.")),new Error("Missing rankings data");const T=ce(x,Te);T.dispatch(pe(oe));ae();function ae(){var t,i;try{const o=T.getState(),r=((t=document.activeElement)==null?void 0:t.id)||null;O.render(st()),T.dispatch(ge(o.rankings.data,o.filters)),T.dispatch(_e(o.sortColumns)),O.render(rt({store:T,handleRender:ae})),r&&((i=document.getElementById(r))==null||i.focus())}catch(o){throw o instanceof Error&&O.render(ie(o.message)),o}}
